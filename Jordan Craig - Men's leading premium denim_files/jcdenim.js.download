(function(){try{
"use strict";(()=>{function ua(){return a.TAG_SRC||"JS"}function v(){return ua()==="ShopifyAppExtension"}function K(t,e,r,o){function n(i){typeof o=="function"&&o(i)}try{fetch(t,e).then(i=>{if(i.ok)typeof r=="function"&&r(i);else if(e?.mode!=="no-cors"){let s=`${i.status} ${i.statusText}`;try{i.json().then(c=>{let u=c.errors[0];s=`${u.error_type}: ${u.error_message}`,n(new Error(s))}).catch(()=>{n(new Error(s))})}catch{n(new Error(s))}}}).catch(n)}catch(i){n(i)}}function Em(){try{return window.location!==window.top.location}catch{return!0}}function Mo(){return v()?window.location.hostname:window.top.location.hostname}function ku(){return v()?window.location:Em()?window.top.location:window.location}function Me(){return ku()?.pathname}function O(){return ku().href}function Ee(){return window?.navigator?.userAgent}function Yt(t){return performance&&typeof performance.getEntriesByType=="function"&&performance.getEntriesByType(t)||[]}function Cn(){return performance&&typeof performance.now=="function"&&performance.now()||0}function Qr(t,e){let r=globalThis.browser;if(v()&&r){K(t,{method:"POST",keepalive:!0,mode:"no-cors",body:e},()=>{},o=>{o.message=`${o.message} - ${t}`,o.status="warn",a.error(o)});return}window?.navigator?.sendBeacon(t,e)}var bm=["clicktripz","example","partner"],Sm=[".shopifypreview.","localhost.","demo.","staging.","development-","development.","dev-","dev.","devstore-","devstore.","development2","sandbox-","sandbox.","-sandbox"],Pm=["localhost","127.0.0.1"];function xm(){let t=Mo();return t===""||Pm.includes(t)}function Tm(){let t=Mo().toLocaleLowerCase();return Sm.some(e=>t.indexOf(e.toLocaleLowerCase())!==-1)}function Dt(t){return bm.indexOf(t.toLowerCase())!==-1||xm()||Tm()}function he(t,e={},r="info"){if(Dt(f))return;let o="https://monitor-api.blackcrow.ai/",n=!1,i=parseInt("15769",10)||0,s=JSON.stringify({message:t,status:r,service:"javascript-api",version:i,ddsource:"browser",ddtags:`env:${n?"dev":"production"},version:${i}`,"logger.name":"monitor-api","http.useragent":Ee(),"view.site":f,...e});Qr(o,s)}function Nn(t){let e=Math.random();(t.overrideSampling||e>=.3&&e<.4)&&he(t.message,{status:t.status||"error","error.kind":t.name,"error.message":t.message,"error.stack":t.stack,"view.url":O(),"view.referrer":document.referrer})}var Rn=`
`;function ue(t,e){if(typeof t=="string"){let r=t.split(Rn);return r.splice(1,e),r.join(Rn)}return""}function Ou(t){return typeof t=="string"?t.split(Rn).filter(o=>{o=o.toLowerCase();let n=p.toLowerCase(),i="jcdenim.js".toLowerCase();return!(o.includes(n)&&o.includes(i))}).join(Rn):t}function T(t){let e=new Error(t);return e.name="GlobalInterfaceError",e.status="warn",e.stack=ue(e.stack,1),e}var d=window.IntentProperties?window.IntentProperties.namespace||"intent":"blackcrow",a=window.blackcrow||window.intent||{},l=[];Array.isArray(a)&&(l=a,a={});typeof a.push!="function"&&(a.push=t=>l.push(t));a.TAG_SRC=window.blackcrowTagSrc||"JS";function Am(){try{if(window?.blackcrowBundleName)return window.blackcrowBundleName;if(document?.currentScript instanceof HTMLScriptElement)return new URL(document.currentScript.src)?.pathname?.split("/")?.pop()?.split(".")[0]||"";throw new Error("Failed to obtain bundle name from current script or window")}catch(t){return Nn(T(`Error determining bundle name dynamically: ${t}`)),"blackcrow"}}var m=Am();a.BUNDLE_NAME=m;a.BUILD_NUMBER="15769";window.blackcrow=a;window.intent=a;var f=a.SITE_NAME||"jordancraig",da="init.blackcrow.ai";if(document.currentScript&&document.currentScript instanceof HTMLElement){let e=document.currentScript.src.split("/")[2];if(!e)throw new Error("Failed to extract CDN host from tag");da=e}else a.TAG_SRC==="ShopifyAppExtension"&&(da="shopify-init.blackcrow.ai");var p=`https://${da}/`;function Im(t){let e=!0;return t.skipNotify&&(e=!1),t.message.indexOf("com.gargoylesoftware.htmlunit")!==-1&&(e=!1),e}function km(t,e){let o=`BlackCrow${e?` ${e}`:""} ${t.stack}`;globalThis.console&&(globalThis.console.error?globalThis.console.error(o):globalThis.console.log(o))}function Om(t){let e=new Error(t);return ue(e.stack,1)}function Ln(t,e={}){if(!t)return;t.stack||(t.stack=Om(t.msg)),!1&&km(t,e.appName),Im(t)&&typeof Ln.sendErrorToServer=="function"&&Ln.sendErrorToServer(t)}Ln.sendErrorToServer=Nn;a.error=Ln;function Dn(t,e){let r=document.createElement("link");r.rel=e,r.href=t,document.head.appendChild(r)}a.TAG_SRC!=="ShopifyAppExtension"&&!window.blackcrowpreconnected&&(Dn("https://api.blackcrow.ai/","preconnect"),Dn("https://api.blackcrow.ai/","dns-prefetch"),Dn(p,"preconnect"),Dn(p,"dns-prefetch"),window.blackcrowpreconnected=1);function P(t,e,r){if(t)if(typeof t.length<"u"){for(let o=0,n=t.length;o<n;o+=1)if(e.call(r,t[o],o,t)===!1)return}else{let o=Object.keys(t);for(let n=0,i=o.length;n<i;n+=1)if(e.call(r,t[o[n]],o[n],t)===!1)return}}var Cm="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var Cu=(t=21)=>{let e="",r=t;for(;r--;)e+=Cm[Math.random()*64|0];return e};var Nu=Cu;function vt(t,e){if(v())return window.blackcrow.cookie.get(t);e=e||document.cookie;let r={};return P(e.split(/\s?;\s?/),o=>{let n=o.split(/\s?=\s?/);r[n.shift().trim()]=n.join("=").trim()}),r[t]}async function I(t,e){try{return v()?await globalThis.browser.cookie.get(t):vt(t,e)}catch{}return null}var fa="_bcai_h",$o="_bcai_i",pa="_bcai_e",Fn="_bcai_t",Ru="_bcai_up",la="_bcai_lpi",ma="_bcai_vn",ga="_bcai_vs",Mn="_bcai_v",Bo="_bcai_pu",ha="_bcai_lpv",ya="_bcai_spv",$n="_bcai_em",va="_bcai_fn",_a="_bcai_ln",Bn="_bcai_ph",Lu="_bcai_koc",Du="_bcai_khs",Fu="_bcai_kps",wa="_bcai_kid",Mu="_bcai_pwo_ebc",Uo="_bcai_isn",Ea="_bcai_fcpes",Un="_bcai_fbcapi",ba="_bcai_aos_pes",eo="_bcai_urr",$u="fbclid",Xt="_fbc",_t="_fbp",Vn="__kla_id";var Vo;function Sa(){if(Vo)return Vo;let t=document.location.hostname.split("."),e,r=t.length;if(r===1)Vo="";else{for(;r>2;){r-=1,e=t.slice(1).join("."),document.cookie=`${Fn}=1; domain=${e}`;let o=vt(Fn);if(document.cookie=`${Fn}=1; expires=Thu, 01 Jan 1970 00:00:00 GMT; domain=${e}`,!o)break;t.shift()}Vo=t.join(".")}return Vo}function Q(t,e,r){try{let o;if(r){let i=new Date;i.setTime(i.getTime()+r*60*1e3),o=`;expires=${i.toUTCString()}`}else o="";let n=`${t}=${e}${o};domain=${Sa()};path=/`;v()?(browser.cookie.set(n),window.blackcrow.cookie.set(t,e)):document.cookie=n}catch{}}var _r;function Ft(){return _r||(_r=vt($o),_r||(_r=Nu(),Q($o,_r,1051200)),_r)}function Nm(t,e){var r,o,n,i,s,c,u,g,h,S;for(r=t.length&3,o=t.length-r,n=e,s=3432918353,u=461845907,S=0;S<o;)h=t.charCodeAt(S)&255|(t.charCodeAt(++S)&255)<<8|(t.charCodeAt(++S)&255)<<16|(t.charCodeAt(++S)&255)<<24,++S,h=(h&65535)*s+(((h>>>16)*s&65535)<<16)&4294967295,h=h<<15|h>>>17,h=(h&65535)*u+(((h>>>16)*u&65535)<<16)&4294967295,n^=h,n=n<<13|n>>>19,i=(n&65535)*5+(((n>>>16)*5&65535)<<16)&4294967295,n=(i&65535)+27492+(((i>>>16)+58964&65535)<<16);switch(h=0,r){case 3:h^=(t.charCodeAt(S+2)&255)<<16;case 2:h^=(t.charCodeAt(S+1)&255)<<8;case 1:h^=t.charCodeAt(S)&255,h=(h&65535)*s+(((h>>>16)*s&65535)<<16)&4294967295,h=h<<15|h>>>17,h=(h&65535)*u+(((h>>>16)*u&65535)<<16)&4294967295,n^=h}return n^=t.length,n^=n>>>16,n=(n&65535)*2246822507+(((n>>>16)*2246822507&65535)<<16)&4294967295,n^=n>>>13,n=(n&65535)*3266489909+(((n>>>16)*3266489909&65535)<<16)&4294967295,n^=n>>>16,n>>>0}var Rm=4294967295,Lm=108;function Pa(t){return Nm(t||"",Lm)/Rm}function ie(t={}){let e=vt("_shopify_y")||Ft(),r=t.name||"",{force:o,allocations:n}=t,i=Pa(`${e}${r}`);if(o)return n.find(g=>g.name===o)?.value;let s=0,c=[];P(t.allocations,g=>{if(c.push({min:s,max:s+g.percent,value:g.value}),s+=g.percent,s>1)throw new Error("Bucket allocation exceeds 100%")});let u;return P(c,g=>i>=g.min&&i<g.max?(u=g.value,!1):!0),u}function Oe(){return document.referrer}function to(){return document.title}function Dm(t,e){let r=e.split("[");return r.length>1?t&&t[r[0]]&&t[r[0]][parseInt(r[1],10)]:t&&t[e]}function E(t,e){if(!(!t||!e||typeof e!="string"))return e.split(".").reduce(Dm,t)}function wr(t,e,r,o,n){!t||!e||typeof e!="string"||(e.indexOf(".")!==-1?(e=e.split("."),wr(t,e.shift(),r,e,n)):!o||o.length===0?(!n||!Object.prototype.hasOwnProperty.call(t,e))&&(t[e]=r):((!n||!Object.prototype.hasOwnProperty.call(t,e))&&(t[e]=t[e]||{}),wr(t[e],o.shift(),r,o,n)))}a.storage=a.storage||{};function Fm(t,e){let r=a.storage[t].audience;typeof r=="object"&&e?.audience===!1?a.storage[t]={audience:r}:a.storage[t]={}}function fe(t){t&&(a.storage[t]=a.storage[t]||{});function e(){return a.storage[t]}return{clear:r=>{t==="bound_events"&&r?Fm(t,r):a.storage[t]={}},getAll:()=>e()||{},get:r=>E(e(),r),set:(r,o)=>{let n=e();typeof r=="string"?wr(n,r,o):P(r,(i,s)=>{wr(n,s,i)})},push:(r,o)=>{let n=e(),i=E(n,r);Array.isArray(i)?i.push(o):wr(n,r,[o])}}}var xa=fe("page"),Ta="history";function Mm(t,e){return typeof e=="function"?e.toString().replace(/\s+/g," "):e}function Bu(){return console.group(`${d} history`),P(xa.get(Ta),t=>{console.groupCollapsed(t.name),console.log("data",JSON.stringify(t.data,Mm,4)),console.log(t.source),console.groupEnd()}),console.groupEnd(),""}function Uu(){return xa.get(Ta)}function pe(t,e){let r=new Error("");r.name="source",r.stack=ue(r.stack,1),xa.push(Ta,{name:t,data:e,source:r})}var $m=Object.prototype.toString,Aa=Array.prototype.slice;function b(t,...e){return t=t||{},P(e,r=>{P(r,(o,n)=>{let i=$m.call(o).split(" ").pop();if(i!=="Undefined]"){if(!o||o===o.window||o.nodeType||o._isVue){t[n]=o;return}if(i==="Object]"){t[n]=t[n]||{},b(t[n],o);return}if(i==="Array]"){t[n]=t[n]||[],t[n]=Aa.call(t[n]).concat(o);return}if(i==="NodeList]"||i==="HTMLCollection]"){t[n]=t[n]||[],t[n]=Aa.call(t[n]).concat(Aa.call(o));return}t[n]=o}})},this),t}window.blackcrow.pushedData=window.blackcrow.pushedData||{};function Ia(){let t=window.blackcrow.pushedData;t&&t.winLocation!==O()&&(window.blackcrow.pushedData={})}function Wn(t){b(window.blackcrow.pushedData,t,{winLocation:O()})}function qn(t){window.blackcrow.pushedData={...t,winLocation:O()}}function R(t){return E(window.blackcrow.pushedData,t)}var ka=fe("events_api_response"),Oa=fe("api_config");function ro(t){let e=new Error(t);return e.name="SequencingError",e.status="warn",e.stack=ue(e.stack,1),e}var Vu=!1,Wu=!1;function qu(t,e){if(t){let r=e.get(`data.${t}`);if(typeof r=="string"){let o=r.toLowerCase();return o==="off"||o==="false"?!1:r}return r}return e.get("data")}function Ca(t){Oa.set("data",t),Wu=!0}function $(t){return Wu===!1&&a.error(new ro("Attempting to access apiConfig before it has been set!")),qu(t,Oa)}function Wo(t){ka.set("data",t),Vu=!0}function Na(t){return Vu===!1&&a.error(new ro("Attempting to access events api response before it has been set!")),qu(t,ka)}function Ra(){return!!Na("history_id")}function Bm(t){let e=new Error(t);return e.name="URIDecodingError",e.status="warn",e.stack=ue(e.stack,1),e}function be(t){let e={};if(typeof t=="string"&&t.length){let r=t.split("?");r.shift(),r=r.join("?"),r=r.split("#")[0],P(r.split("&"),o=>{let n=o;try{n=decodeURIComponent(n)}catch{a.error(new Bm(`Unable to decode URI component: ${n}`))}let i=n.indexOf("="),s=i>0?[n.slice(0,i),n.slice(i+1)]:[n];typeof s[1]<"u"&&(e[s[0]]=s[1])})}return e}function le(t,e){let r=e?be(e):be(O()),o=Object.keys(r).find(n=>n?.toLowerCase()===t?.toLowerCase());return r[o]}var Gu="config.visitor.query_string";function Um(t){let e=t?E(t,Gu):$(Gu);return e?{param:e.param,separator:e.separator,index:e.index}:{}}function Vm(t){let e=t.param;if(e)return le(e)}function Wm(t,e){let r=e.separator,o=e.index;return r&&o?t.split(r)[o]||void 0:t}function ju(t){let e=Um(t),r=Vm(e);if(r)return Wm(r,e)}var La,Da;function qm(){let t,e=window.GoogleAnalyticsObject?window[window.GoogleAnalyticsObject]:window.ga;return e&&typeof e.getAll=="function"&&P(e.getAll(),r=>{try{let o=r.get("clientId");if(o)return t=o,!1}catch{}}),t}async function Gm(){try{if(typeof Da<"u")return Da;let t,e=await I("_ga");if(e){let r=e.split(".");r.shift(),r.shift(),t=r.join(".")}return Da=t,t}catch(t){a.error(t);return}}async function Qt(t){try{if(La)return La;let e=R("google_id")||ju(t)||window.gaGlobal&&window.gaGlobal.vid||qm()||await Gm();return La=e,e}catch(e){a.error(e);return}}var Hu="blackcrow",zu="cookie",Ju="global",Zu="google",Fa="pushed_data";var Er,Qe=Hu.toUpperCase(),et=Mn,Gn=!1;function Ku(t,e,r){Q(Mn,t,1051200),Q(ga,e,1051200),Q(ma,r,1051200)}async function tt(){if(Er)return{id:Er,source:Qe,name:et,fallback:Gn};if(Er=await I(Mn),Er)return Qe=await I(ga)||Qe,et=await I(ma)||et,Ku(Er,Qe,et),{id:Er,source:Qe,name:et,fallback:Gn};let t=$("config.visitor.id_source"),e=$("config.visitor.id_name"),r=R("visitor_id");if(r&&(Qe=Fa.toUpperCase(),et="visitor_id"),t===zu){let o=await I(e);o&&(r=o,Qe=t.toUpperCase(),et=e)}else if(t===Ju){let o=E(window,e);o&&(r=o,Qe=t.toUpperCase(),et=e)}else if(t===Fa){let o=R(e);o&&(r=o,Qe=t.toUpperCase(),et=e)}else if(t===Zu){let o=await Qt();o&&(r=o,Qe=t.toUpperCase(),et=e)}return r||(r=Ft(),Gn=!0),Er=r,Ku(r,Qe,et),{id:r,source:Qe,name:et,fallback:Gn}}async function jm(t){try{if(t.overrideSampling||ie({name:"error_sampling",allocations:[{percent:.1,value:!0}]})){let r=await tt();he(t.message,{status:t.status||"error","error.kind":t.name,"error.message":t.message,"error.stack":t.stack,"usr.id":r.id,"view.url":R("page_url")||O(),"view.referrer":R("page_referrer_url")||Oe()})}pe(t.name,t)}catch{}}function Yu(){a.error.sendErrorToServer=jm}function Hm(t){let e={name:"other",major:0,minor:0};if(/googlebot/.test(t)||/adsbot/.test(t)||/bingbot/.test(t)||/bingpreview/.test(t)||/slurp/.test(t)||/storebot/.test(t)||/spider/.test(t)||/crawler/.test(t)||/yandexbot/.test(t)||/ptst[ \/]/.test(t)||/externalhit/.test(t))return e.name="bot",e;let o=/(msie) ([\w.]+)/.exec(t)||/(ucbrowser)[ \/]([\w.]+)/.exec(t)||/(miuibrowser)[ \/]([\w.]+)/.exec(t)||/(opera mini)[ \/]([\w.]+)/.exec(t)||/(opr)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(t)||/(firefox)[ \/]([\w.]+)/.exec(t)||/(trident)(?:.*? rv:([\w.]+))?/.exec(t)||/(edg)[ \/]([\w.]+)/.exec(t)||/(edge)[ \/]([\w.]+)/.exec(t);if(o){o[1]==="opr"?o[1]="opera":o[1]==="trident"?o[1]="msie":o[1]==="edg"&&(o[1]="edge"),e.name=o[1].replace(/\s+/,"");let n=(o[2]||"").split(/\.|-|_/);e.major=parseInt(n[0],10)||0,e.minor=parseInt(n[1],10)||0}return e}function zm(t){return!!(t.match(/ipad/)||t.match(/android/)&&!t.match(/mobi|mini|fennec/)||t.match(/macintosh/)&&window.navigator.maxTouchPoints>1)}function Jm(t){return!!t.match(/ip(hone|od)|android.+mobile|windows (ce|phone)|blackberry|bb10|symbian|webos|firefox.+fennec|opera m(ob|in)i|tizen.+mobile|polaris|iemobile|lgtelecom|nokia|sonyericsson|dolfin|uzard|natebrowser|ktf;|skt;/)}function Zm(t){return Jm(t)?"mobile":zm(t)?"tablet":"desktop"}function br(t){t=t||"";let e=t.toLowerCase();return{browser:Hm(e),deviceType:Zm(e)}}function wt(t){let e=new Error(t);return e.name="NotSupportedError",e.status="warn",e.stack=ue(e.stack,1),e}function Km(){try{return!new Error("")}catch(t){return t}}function Ym(){let t=Km();if(t)throw t.name="NotSupportedError",t.status="warn",t.message="Missing feature: errorConstructor",t}function Xm(){let{browser:t}=br(Ee());if(typeof t=="object"){let e=t.name,r=t.major;if(e==="bot"||e==="msie"||e==="edge"&&r<15||e==="firefox"&&r<54||e==="chrome"&&r<42||e==="safari"&&r<10||e==="ucbrowser"||e==="miuibrowser"||e==="opera"&&r<38||e==="operamini")return!1}return!0}function Xu(){return le("bcai-bypass")==="true"}function Qu(){if(!Xm())throw new wt("Browser not supported");Ym()}function $e(){return!!E(window,"Shopify")}function Ma(){return $e()&&Me()?.includes("products")}function ed(){return $e()&&Me()?.includes("/search")}function Qm(){return $e()&&Me()==="/"}function td(){return $e()&&Me()?.includes("/cart")}function rd(){return!!E(window,"Shopify.Checkout")}function $a(){let t=O();return t&&t.includes("/checkouts")}function Ba(){let t=O();return t&&(t.includes("/thank_you")||t.includes("/purchase/thanks")||t.includes("/thank-you"))}function eg(){let t=E(window,"Shopify.Checkout.isOrderStatusPage"),e=E(window,"Shopify.checkout");return t!==void 0||e!==void 0}function oo(){return E(window,"Shopify.Checkout.currency")||E(window,"cart_json.currency")||E(window,"Shopify.currency.active")||E(window,"afterpay_shop_currency")}function jn(){return E(window,"Shopify.Checkout.totalPrice")?.toString()}function Hn(){if(!$e())return;let t=E(window,"Shopify.Checkout.step");if(t)switch(t){case"payment_method":return"payment";case"shipping_method":return"shipping";case"contact_information":return"contact";case"thank_you":return"confirmation";default:return t}return eg()?"order_status":Ma()?"products":Qm()?"index":Me()}function qo(){return globalThis?.Shopify?.routes?.root}function Ua(){return globalThis?.Shopify?.routes?.cart_url}function od(){let t=qo(),e=Ua();return t?`${t}cart.js`:e?`${e}.js`:"/cart.js"}function Va(){return v()&&E(window,"shopifyEvent.name")==="checkout_completed"}function Wa(){return v()&&E(window,"shopifyEvent.name")==="payment_info_submitted"}function nd(){return v()&&E(window,"shopifyEvent.name")==="page_viewed"}function zn(){return Va()||Wa()?window?.shopifyCheckout:{}}var tg="https://init.blackcrow.ai/",rg="https://shopify-init.blackcrow.ai/";function qa(){let t="jcdenim.js"?.replace(".js","");if(!t?.length)throw T("Error determining bundle name");let e=p;return e?.includes("init.blackcrow.ai")||(e=$e()?rg:tg,a.error(T(`jcdenim.js is not hosted on the blackcrow CDN but on ${p}.`))),`${e}config/${t}.json`}async function id(){let t=await fetch(qa(),{method:"GET"});if(!t.ok)throw new Error(`${t.status} ${t.statusText}`);let e=await t.json(),r=atob(e.data);return JSON.parse(r)}function Go(t,e,r){if(t){let n=(t.options||{}).origEvent||{};if(clearTimeout(n.timeout),typeof t.callback=="function"&&!n.timeoutReached){try{t.callback(e)}catch(i){a.error(i)}typeof r=="function"&&r()}}}var og=fe("bound_events"),ng=fe("triggered_events");function q(t,e,r,o={}){let n={appName:t,eventName:e,callback:r,options:o};og.push(`${t}.${e}`,n),P(ng.get(`${t}.${e}`),i=>{Go(n,i.data,i.onExec)})}function Be(t,e,r=!0,o="error"){let n=new Error(t);return n.name=`${e||""}RequestError`,n.status=o,n.skipNotify=r,n.stack=ue(n.stack,1),n}function ae(t,...e){return new Promise(r=>{setTimeout(r,t,[...e])}).catch(r=>a.error(r))}function Jn(t,e,r){return function(...n){try{return t.apply({},n)}catch(i){r&&r.interval&&clearInterval(r.interval),a.error(i,{appName:e})}}}function ig(t,e,...r){return setTimeout.apply(globalThis,[Jn(t,this.appName),e].concat(r))}function ag(t,e,...r){let o={},n=setInterval.apply(globalThis,[Jn(t,this.appName,o),e].concat(r));return o.interval=n,n}var Ga=class{constructor(e,r){this.asyncFn=e,this.interval=r,this.running=!1}start(){this.running||(this.running=!0,this.cycle())}stop(){this.running&&(this.running=!1)}async cycle(){try{await this.asyncFn()}catch{}try{await ae(this.interval),this.running&&this.cycle()}catch(e){a.error(e),this.stop()}}};function sg(t,e,r,o){let n=r.wrapped||Jn(r,this.appName);r.wrapped=n,t.addEventListener?t.addEventListener(e,n,o):t.attachEvent&&t.attachEvent(e,n)}function cg(t,e,r,o){r?t.removeEventListener(e,r.wrapped,o):t.removeEventListener(e)}var _={fn:Jn,addListener:sg,removeListener:cg,setInterval:ag,SafeAsyncInterval:Ga,setTimeout:ig};function Ge(t,e,r,o){function n(c){let u=new Be(c.message,e.servletName);a.error(u,{customDimensions:{url:t}}),typeof o=="function"&&_.fn(o)(u)}function i(c){if(typeof c!="object"){n(new Error("JSON is not an object"));return}typeof r=="function"&&_.fn(r)(c||{})}function s(c){c.json().then(_.fn(i)).catch(u=>{n(new Error(`Invalid JSON ${u.message}`))})}K(t,e,s,n)}function ja(){let t=Math.round(Cn());if(!t||t<1)return"0";if(t<10)return"10";let e="0";return P(`${t}`,(r,o)=>{o===0?e=r:e+="0"}),e}var Ha=document.documentElement,ad=window.screen,sd=Math.max;function cd(){let t=window?.innerHeight+window?.scrollY||0;return sd(Ha?.offsetHeight,Ha?.scrollHeight,t)}function ud(){return v()?window.outerHeight:ad?.height}function dd(){return v()?window.outerWidth:ad?.width}function Zn(){return sd(window.pageYOffset,Ha?.scrollTop)}async function ye(t){try{let e=v()?await globalThis.browser.localStorage.get(t):window.localStorage.getItem(t);return e?JSON.parse(e):null}catch{}return null}async function z(t){try{if(v()){let e=await globalThis.browser.sessionStorage.getItem(t);return JSON.parse(e)}return JSON.parse(window.sessionStorage.getItem(t))}catch{}return null}var za,Ja;async function ug(){try{if(typeof Ja<"u")return Ja;let t,e=await I(_t);if(e){let r=e.split(".");r.shift(),r.shift(),t=r.join(".")}return Ja=t,t}catch(t){a.error(t);return}}async function fd(){try{if(za)return za;let t=R("facebook_id")||await ug();return za=t,t}catch(t){a.error(t);return}}var Za;function dg(){let t=E(window,"Shopify.checkout.customer_id")||E(window,"ShopifyAnalytics.meta.page.customerId")||E(window,"__st.cid");if(t)return t.toString()}function pd(){if(Za)return Za;let t=dg();return Za=t,t}var Ka;async function fg(){try{return JSON.parse(window.atob(await I(Vn))).$exchange_id}catch{return}}async function no(){try{if(Ka)return Ka;let t=await fg();return Ka=t,t}catch(t){a.error(t);return}}function ld(){return window?.ju_config?.ju_vid}function md(){return window?.bouncex?.cookie?.hardID}function gd(){return window?.bouncex?.cookie?.softID}function hd(){return window?.edgemesh?.id}function Ue(t,e){try{e&&(v()?(window.blackcrow.localStorage.set(t,JSON.stringify(e)),browser.localStorage.setItem(t,JSON.stringify(e))):window.localStorage.setItem(t,JSON.stringify(e)))}catch{}}function er(t){return`${Math.random().toString(36).substring(2,3)}${btoa(t)}`}function Sr(t){return t?atob(t.substring(1)):void 0}function jo(t){try{return document.querySelectorAll(`:is(${t})`)}catch{}try{return document.querySelectorAll(`:matches(${t})`)}catch{}try{return document.querySelectorAll(`:-webkit-any(${t})`)}catch{}try{return document.querySelectorAll(`:-moz-any(${t})`)}catch{return[]}}function yd(t){_.addListener(window,"message",e=>{if(e.origin&&e.origin.indexOf(".attn.tv")>0){let r=e.data.__attentive||{};r&&r.email&&t(r.email)}})}function vd(t){_.addListener(window,"postscriptPopup",e=>{if(e.detail.type==="formSubmit"){let{email:r}=e.detail.values;r&&t(r)}})}function _d(t){let e=document.getElementById("continue_button"),r=document.querySelectorAll("input[type=email]");e&&r&&_.addListener(e,"click",()=>{t(r[0]&&r[0].value)})}function Kn(){return E(window,"ShopifyCustomer.email")||E(window,"Shopify.checkout.email")||E(window,"Shopify.Checkout.customer.email")}function wd(){return E(window,"userProperties.email")}function Ed(){let t=E(window,"_learnq");if(t&&typeof t.identify=="function")return t.identify().$email}function es(t){if(t)return t.trim()}function ts(t){return new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(t)}function Pr(t){let e=es(t);return e&&ts(e)?e:void 0}function xr(t){let e=Pr(t);return e?er(e):void 0}function Y(t){let e=xr(t);e&&Ue($n,e)}function Ya(t,e=()=>{}){t.value&&e(t.value)}function pg(t,e){let r=t.textContent||t.innerText;return r&&(r=r.toLowerCase()),r&&r.indexOf(e.toLowerCase())!==-1}function Xa(t){return pg(t,"email")}function lg(t){if(t.labels){if(Array.from(t.labels).some(r=>Xa(r)))return!0}else if(t.id&&Array.from(document.getElementsByTagName("label")).some(r=>r.htmlFor===t.id&&Xa(r)))return!0;if(t.parentNode){let e=t.parentNode;return e.tagName.toLowerCase()==="label"&&Xa(e)}return!1}function mg(t){return Array.from(t).filter(r=>lg(r))}var Qa='input[type="email"], input[autocomplete~="email"], input[placeholder~="email" i], input[type="text"][id*="email" i], input[type="text"][name*="email" i]';function rs(){let t=jo(Qa);if(!t.length){let e=document.querySelectorAll('input[type="text"]');e.length&&(t=mg(e))}return t}function Yn(t=e=>{}){let e=rs();P(e,r=>{Ya(r,t)}),_.addListener(window,"focusout",r=>{let o=r.target;o.matches(Qa)||Array.isArray(e)&&e.includes(o)?Ya(o,t):o.shadowRoot&&o.shadowRoot.querySelectorAll(Qa).forEach(n=>{Ya(n,t)})},!0)}function bd(t){let e=Kn()||wd()||Ed();e&&t(e),yd(r=>{t(r)}),vd(r=>{t(r)}),_d(r=>{t(r)}),Yn(r=>{t(r)})}function Sd(t=()=>{}){let e=Kn()||wd()||Ed();return e?(Y(e),t()):(yd(r=>{Y(r)}),_d(r=>{Y(r)}),Yn(r=>{Y(r),t()}),vd(r=>{Y(r)})),e}async function we(t=!0){try{let e=await ye($n)||await I($n);return e?t?Sr(e):e:void 0}catch(e){a.error(e);return}}function tr(t,e){var r=(t&65535)+(e&65535),o=(t>>16)+(e>>16)+(r>>16);return o<<16|r&65535}function gg(t,e){return t<<e|t>>>32-e}function Xn(t,e,r,o,n,i){return tr(gg(tr(tr(e,t),tr(o,i)),n),r)}function Se(t,e,r,o,n,i,s){return Xn(e&r|~e&o,t,e,n,i,s)}function Pe(t,e,r,o,n,i,s){return Xn(e&o|r&~o,t,e,n,i,s)}function xe(t,e,r,o,n,i,s){return Xn(e^r^o,t,e,n,i,s)}function Te(t,e,r,o,n,i,s){return Xn(r^(e|~o),t,e,n,i,s)}function hg(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;var r,o,n,i,s,c=1732584193,u=-271733879,g=-1732584194,h=271733878;for(r=0;r<t.length;r+=16)o=c,n=u,i=g,s=h,c=Se(c,u,g,h,t[r],7,-680876936),h=Se(h,c,u,g,t[r+1],12,-389564586),g=Se(g,h,c,u,t[r+2],17,606105819),u=Se(u,g,h,c,t[r+3],22,-1044525330),c=Se(c,u,g,h,t[r+4],7,-176418897),h=Se(h,c,u,g,t[r+5],12,1200080426),g=Se(g,h,c,u,t[r+6],17,-1473231341),u=Se(u,g,h,c,t[r+7],22,-45705983),c=Se(c,u,g,h,t[r+8],7,1770035416),h=Se(h,c,u,g,t[r+9],12,-1958414417),g=Se(g,h,c,u,t[r+10],17,-42063),u=Se(u,g,h,c,t[r+11],22,-1990404162),c=Se(c,u,g,h,t[r+12],7,1804603682),h=Se(h,c,u,g,t[r+13],12,-40341101),g=Se(g,h,c,u,t[r+14],17,-1502002290),u=Se(u,g,h,c,t[r+15],22,1236535329),c=Pe(c,u,g,h,t[r+1],5,-165796510),h=Pe(h,c,u,g,t[r+6],9,-1069501632),g=Pe(g,h,c,u,t[r+11],14,643717713),u=Pe(u,g,h,c,t[r],20,-373897302),c=Pe(c,u,g,h,t[r+5],5,-701558691),h=Pe(h,c,u,g,t[r+10],9,38016083),g=Pe(g,h,c,u,t[r+15],14,-660478335),u=Pe(u,g,h,c,t[r+4],20,-405537848),c=Pe(c,u,g,h,t[r+9],5,568446438),h=Pe(h,c,u,g,t[r+14],9,-1019803690),g=Pe(g,h,c,u,t[r+3],14,-187363961),u=Pe(u,g,h,c,t[r+8],20,1163531501),c=Pe(c,u,g,h,t[r+13],5,-1444681467),h=Pe(h,c,u,g,t[r+2],9,-51403784),g=Pe(g,h,c,u,t[r+7],14,1735328473),u=Pe(u,g,h,c,t[r+12],20,-1926607734),c=xe(c,u,g,h,t[r+5],4,-378558),h=xe(h,c,u,g,t[r+8],11,-2022574463),g=xe(g,h,c,u,t[r+11],16,1839030562),u=xe(u,g,h,c,t[r+14],23,-35309556),c=xe(c,u,g,h,t[r+1],4,-1530992060),h=xe(h,c,u,g,t[r+4],11,1272893353),g=xe(g,h,c,u,t[r+7],16,-155497632),u=xe(u,g,h,c,t[r+10],23,-1094730640),c=xe(c,u,g,h,t[r+13],4,681279174),h=xe(h,c,u,g,t[r],11,-358537222),g=xe(g,h,c,u,t[r+3],16,-722521979),u=xe(u,g,h,c,t[r+6],23,76029189),c=xe(c,u,g,h,t[r+9],4,-640364487),h=xe(h,c,u,g,t[r+12],11,-421815835),g=xe(g,h,c,u,t[r+15],16,530742520),u=xe(u,g,h,c,t[r+2],23,-995338651),c=Te(c,u,g,h,t[r],6,-198630844),h=Te(h,c,u,g,t[r+7],10,1126891415),g=Te(g,h,c,u,t[r+14],15,-1416354905),u=Te(u,g,h,c,t[r+5],21,-57434055),c=Te(c,u,g,h,t[r+12],6,1700485571),h=Te(h,c,u,g,t[r+3],10,-1894986606),g=Te(g,h,c,u,t[r+10],15,-1051523),u=Te(u,g,h,c,t[r+1],21,-2054922799),c=Te(c,u,g,h,t[r+8],6,1873313359),h=Te(h,c,u,g,t[r+15],10,-30611744),g=Te(g,h,c,u,t[r+6],15,-1560198380),u=Te(u,g,h,c,t[r+13],21,1309151649),c=Te(c,u,g,h,t[r+4],6,-145523070),h=Te(h,c,u,g,t[r+11],10,-1120210379),g=Te(g,h,c,u,t[r+2],15,718787259),u=Te(u,g,h,c,t[r+9],21,-343485551),c=tr(c,o),u=tr(u,n),g=tr(g,i),h=tr(h,s);return[c,u,g,h]}function yg(t){var e,r="",o=t.length*32;for(e=0;e<o;e+=8)r+=String.fromCharCode(t[e>>5]>>>e%32&255);return r}function vg(t){var e,r=[];for(r[(t.length>>2)-1]=void 0,e=0;e<r.length;e+=1)r[e]=0;var o=t.length*8;for(e=0;e<o;e+=8)r[e>>5]|=(t.charCodeAt(e/8)&255)<<e%32;return r}function _g(t){return yg(hg(vg(t),t.length*8))}function wg(t){var e="0123456789abcdef",r="",o,n;for(n=0;n<t.length;n+=1)o=t.charCodeAt(n),r+=e.charAt(o>>>4&15)+e.charAt(o&15);return r}function Eg(t){return unescape(encodeURIComponent(t))}function bg(t){return _g(Eg(t))}function Sg(t){return wg(bg(t))}function os(t){return Sg(t)}function ns(t){return($("experiments")||[]).find(r=>r.name===t)||{}}function is(t){let e=ns(t);if(!e.name)return e;let r=be(O());function o(i,s){let c,u;if(Array.isArray(i)&&i.length&&i[0].value&&typeof i[0].percent=="number")c=`${t}_${s}`,u=i;else if(i.allocations){let g=i.name||s;c=`${t}_${g}`,u=i.allocations}if(c&&u){let g=t,h=i.short_name||s;return ie({name:c,allocations:u,force:r[`bcai_${g}_${h}`]})}return i}function n(i,s){if(!i)return i;let c=Array.isArray(i)?[]:{},u;return Object.keys(i).forEach(g=>{let h=s?`${s}_${g}`:g;u=o(i[g],h),c[g]=typeof u=="object"?n(u,h):u}),c}return{name:e.name,active:e.active,data:n(e.data)}}async function as(){try{if(is("pwo_additional_context")?.active){let e=await we();if(e)return os(`${e}bcai${f}`)}return}catch(t){a.error(t);return}}function Pd(){return window?.__fudge__?.deviceId}var xd=t=>async()=>{try{return R(t)||await z(t)||await ye(t)||await I(t)}catch(e){a.error(e);return}},Ho=t=>async()=>{try{return await I(t)}catch(e){a.error(e);return}},ve=(t,e)=>{let r;return async()=>{try{return r=r||await e(),{platform:t,id:r}}catch(o){a.error(o);return}}},Pg=ve("fa",fd),xg=ve("ga",Qt),Tg=ve("cdp",xd("cdp_id")),Ag=ve("shop_cid",pd),Ig=ve("shop_aid",Ho("_shopify_y")),kg=ve("kl_cid",no),Og=ve("attv_cid",Ho("__attentive_id")),Cg=ve("ju_cid",ld),Ng=ve("bx_hid",md),Rg=ve("bx_sid",gd),Lg=ve("tab_cid",xd("taboola global:user-id")),Dg=ve("bc_cid",Ho($o)),Fg=ve("_bc_i",Ft),Mg=ve("_bt_uid",Ho("tag_user_id")),$g=ve("_bc_em",as),Bg=ve("edme_id",hd),Ug=ve("fdg_id",Pd),Vg=ve("_bcai_z",Ho("_bcai_z"));async function ss(){try{return[await Pg(),await xg(),await Tg(),await Ag(),await Ig(),await kg(),await Og(),await Lg(),await Dg(),await Fg(),await Cg(),await Ng(),await Rg(),await Mg(),await $g(),await Bg(),await Ug(),await Vg()]}catch(t){return a.error(t),[]}}var cs;async function us(){try{return cs||await I(fa)||void 0}catch(t){return a.error(t),cs||void 0}}function Td(t){t&&(cs=t,Q(fa,t,1051200))}async function Ad(){try{let e=(await us())?.split("_",3);if(e)return{page_correlation_id:e[0],session_id:e[1]};throw new ro("Attempted to parse historyId before it has been set!")}catch(t){a.error(t);return}}var zo=fe("page"),Wg={page:{ignored:!1,log_purchase:!1}};function Id(t){return{page:{ignored:t.ignored,log_purchase:t.log_purchase}}}function kd(t={},e){let r=R("page_id"),o=Wg;r!==void 0&&t?P(t.filter(c=>c.pageName),c=>{if(c.pageName===r)return o=Id(c),!1}):r===void 0&&t&&P(t.filter(c=>c.pattern),c=>{try{let u=e.match(c.pattern);if(u){if(r=c.pageName,o=Id(c),u.length>1)for(let g=1;g<u.length;g+=1)r=r.replace(`$${g}`,u[g]);return!1}}catch{}}),r||(r="other");let n=zo.get("lastUrl"),i=zo.get("lastId"),s=r!==i||e!==n;return zo.set("lastUrl",e),zo.set("lastId",r),{id:r,config:o,isNewPage:s,currentUrl:e,lastUrl:n}}function Tr(){return zo.get("lastId")}var ds={};function Od(t){ds=t}async function Cd(t,e,r){try{let o={},n=Object.keys(ds||{});for(let i=0;i<n.length;i+=1){let s=n[i],c=ds[s];typeof c=="function"?o[s]=await c(t[s],e,r):typeof c<"u"&&(o[s]=c)}return o}catch(o){return a.error(o),{}}}function qg(t,e){return e||(t==="_shopify_y"?"aid":t)}async function Gg(t){try{let e,r=t.value,o=t.nameOverride,n=await I(r);return r&&n&&(e={name:qg(r,o),value:n}),e}catch(e){a.error(e);return}}async function re(t){try{let e=[];for(let r=0;r<t.length;r+=1){let o=t[r];if(o.source==="cookie"){let i=await Gg(o);i&&e.push(i)}}return e}catch(e){return a.error(e),[]}}function rt(t,e){let r=[];return t&&e&&r.push({name:t,value:e}),r}function Nd(){let t=Me(),e=/.*(\/checkouts\/[a-z]{1,3}\/)/gm;if(t?.match(e))return t=t.replace(e,""),t?.replace(/\/$/,"").split("/")[0];if(t?.includes("/checkouts/"))return t=t.replace(/.*checkouts\//,""),t?.replace(/\/$/,"").split("/")[0]}function jg(){let t="0123456789abcdef";return t.charAt(Math.floor(Math.random()*t.length))}function Jo(t){return new Array(t).fill(".",0,t).map(()=>jg()).join("")}function Zo(){return`${Jo(8)}-${Jo(4)}-${Jo(4)}-${Jo(4)}-${Jo(12)}`}function rr(t){return t!==void 0?(t*.01).toLocaleString("en-US",{currency:"USD",minimumFractionDigits:2,useGrouping:!1}):void 0}function Ko(t){return t?typeof t=="string"?rr(t.replace(/\D/g,"")*1):t.toString():"0.00"}async function Yo(t){try{let[e]=await re(t);return e?.value?{external_id:e.value}:void 0}catch(e){a.error(e);return}}function Rd(){let t=document.getElementById("shopify-pay-alternate-title");if(E(window,"ShopifyPay")&&t)return{custom_dimensions:{payment_type:"shop-pay"}};if(E(window,"Shopify.checkout")){let e=document.getElementsByClassName("payment-icon");if(e.length&&e[0].textContent)return{custom_dimensions:{payment_type:e[0].textContent.trim()}}}}function fs(){let t={},e=E(window,"Shopify.checkout"),r=E(window,"shopifyEvent.name");if(r&&b(t,{shopify_event_name:r}),e&&(b(t,{event_id:e.order_id,total_price:Ko(e.total_price),currency:e.presentment_currency,shipping_method:e.shipping_rate?.title,shipping_price:Ko(e.shipping_rate?.price),cart:e.line_items&&e.line_items.map(o=>({id:o.product_id,price:Ko(o.price),quantity:o.quantity,categories:[o.title],msrp:Ko(o.line_price),color:o.variant_title,brand:o.vendor}))}),e.discount)){let o=e.discount;b(t,{discounts:[{code:o.code,discount_amount:o.amount,discount_currency:e.currency,discount_percent:o.rate,applicable:o.applicable,reason:o.reason}]})}return t}function ps(t){return{destination_airport:t.destination_airport,destination_city:t.destination_city,destination_country:t.destination_country,destination_state:t.destination_state,end_date:t.end_date,lodging_id:t.lodging_id,origin_airport:t.origin_airport,rooms:t.rooms,start_date:t.start_date,travelers:t.travelers}}function ls(){return R("partner_controlled_experiments")}var Hg=.1,Ld=ie({name:"performance_sampling",allocations:[{percent:Hg,value:!0}]});function Xo(t=`${p}js/core/`){try{let e=Yt("resource").find(r=>r.name.includes(t));return e&&e.startTime}catch{a.error(new wt("Unable to get start time: Browser does not support PerformanceResourceTiming interface"));return}}function zg(){try{let t=Yt("resource").find(e=>e.name.includes("gtm.js"));return t&&t.startTime}catch{a.error(new wt("Unable to get start time: Browser does not support PerformanceResourceTiming interface"));return}}function Dd(){try{let t=Yt("resource").find(e=>e.name.includes(`${p}js/core/`));if(t){let{name:e}=t;if(e.includes("shopify-init"))return"SHOPIFY";if(e.includes("source=gtm"))return"GTM"}return"JS"}catch{a.error(new wt("Unable to get start time: Browser does not support PerformanceResourceTiming interface"));return}}function Jg(){let t=Xo(),e=Dd();if(t&&e==="GTM"){let r=zg();if(r)return t-r}}function Zg(){try{let t=Yt("resource").find(e=>e.name.includes("https://api.blackcrow.ai/v1/events/view"));return t&&t.startTime}catch{a.error(new wt("Unable to get time to view request: Browser does not support PerformanceResourceTiming interface"));return}}function Fd(){if(Ld){let t=Xo(),e=Dd()||"unknown",r=e==="GTM"?Jg()||"unknown":"N/A";t&&he(`Initial script load after ${t} ms`,{"script.start_time":t,"script.load_method":e,"script.time_since_gtm_start":r,"view.url":R("page_url")||O(),"view.referrer":R("page_referrer_url")||Oe()})}}function Md(){if(Ld){let t=Zg()-Xo();t&&he(`Time to initiate view request: ${t} ms`,{"script.time_to_view":t,"view.url":R("page_url")||O(),"view.referrer":R("page_referrer_url")||Oe()})}}function $d(){return{nb:{active:!!window.Northbeam},tw:{active:!!window.TriplePixel},bt:{active:!!window.edgetag},rb:{active:!!window.Rebuy},np:{active:!!window.fetchNovelSession},yp:{active:!!window.Yotpo},jm:{active:!!window.judgeme},lx:{active:!!window.LOOX},oke:{active:!!window.okeConnectApi}}}var H={VIEW:"view",PURCHASE:"purchase",DELAYED_PURCHASE:"delayed_purchase",BAD_ACTOR_TIMEOUT:"bad_actor_timeout",BAD_ACTOR_BEFOREUNLOAD:"bad_actor_beforeunload",PWO_IMPR:"pwo_impression",PWO_EMAIL_LEAD:"pwo_email_lead",PWO_SMS_LEAD:"pwo_sms_lead",PWO_CLOSE:"pwo_close",PWO_OPEN_ATTEMPT:"pwo_open_attempt",PWO_DECISION:"pwo_decision",PRED_WELCOME_DECISION:"pred_welcome_decision",EXIT_INTENT:"exit_intent",SITE_SPEED_BUCKETING:"site_speed_bucketing",SITE_SPEED_FID_METRIC:"site_speed_fid_metric",SITE_SPEED_LCP_METRIC:"site_speed_lcp_metric"};function Qn(){return{api_client_type:"JS",api_client_version:"15769",api_client_source:ua()}}function Et(t){let e=R(`custom_${t}`);return typeof e=="object"?Array.isArray(e)?String(e):JSON.stringify(e):e}function Kg(t,...e){return t=t||{},P(e,r=>{P(r,(o,n)=>{(o||o===0||o===!1)&&(t[n]=o)})}),t}function Yg(){return{coupon:R("coupon"),shipping_method:R("shipping_method"),shipping_price:R("shipping_price"),total_price:R("total_price"),zip_code:R("zip_code"),custom_1:Et(1),custom_2:Et(2),custom_3:Et(3),custom_4:Et(4),custom_5:Et(5),custom_6:Et(6),custom_7:Et(7),custom_8:Et(8),custom_9:Et(9),custom_10:Et(10),traffic_groups:R("traffic_groups"),partner_controlled_experiments:ls(),referrer_source:R("referrer_source"),referrer_medium:R("referrer_medium"),referrer_campaign:R("referrer_campaign"),referrer_term:R("referrer_term"),cart:R("cart"),currency:R("currency"),is_logged_in_user:R("user_is_logged_in"),user_has_subscription:R("user_has_subscription")}}async function Xg(t){try{let e=await tt();return{metadata:Qn(),build:"15769",site_name:f,custom_dimensions:R("custom_dimensions"),device_info:Ee(),device_width:dd(),device_height:ud(),page_id:t,page_url:R("page_url")||O(),page_referrer_url:R("page_referrer_url")||Oe(),page_title:R("page_title")||to(),page_time:ja(),visitor_id:e.id,internal_id:Ft(),member_id:R("member_id"),history_id:await us(),user_identifiers:await ss(),user_metadata:{visitor_id:{source:e.source,name:e.name,fallback_used:e.fallback}},bundle_load_start:Xo(),attr:$d()}}catch(e){return a.error(e),{}}}function Qg(t){return t?["view","purchase","delayed_purchase"].includes(t):!0}function eh(t){return t?["view","purchase"].includes(t):!0}function th(t){return t?t==="purchase":!0}var rh={travel:ps};function oh(){let t={};return P(rh,(e,r)=>{let o=R(`${r}`);o&&(t[r]=e(o))}),t}function nh(t){["custom_dimensions","event_id"].forEach(r=>{t[r]===void 0&&(t[r]="")})}function ih(t){return[H.PWO_DECISION,H.PWO_OPEN_ATTEMPT,H.PWO_IMPR,H.PWO_EMAIL_LEAD,H.PWO_SMS_LEAD,H.PWO_CLOSE].includes(t)}function ah(t){return[H.SITE_SPEED_BUCKETING,H.SITE_SPEED_FID_METRIC,H.SITE_SPEED_LCP_METRIC].includes(t)}async function ms(t,e={}){try{let r=e.page_id||Tr(),o=await Xg(r);Qg(t)&&(o={...o,...Yg()},b(o,oh(),fs())),th(t)&&o.purchase_type===void 0&&(o.purchase_type=""),(ih(t)||ah(t))&&(o={...o,...e}),nh(o),P(o,(i,s)=>{typeof e[s]<"u"&&(o[s]=e[s])}),eh(t)||b(o,{custom_dimensions:await Ad()});let n=await Cd(o,t,r);return Kg({},o,n)}catch(r){return a.error(r),{}}}var sh=500,gs={},hs={};function ys(){hs={},gs={}}function Bd(t){return hs[t]||0}function ch(t){let e=!1,r=t==="view"?1:$(`config.events.${t}.dedupe.limit_per_page`);return r&&(e=Bd(t)>=r),e?"limit_per_page":""}function uh(t,e){return t.startsWith("datalayer-")?"":e-(gs[t]||0)<sh?"debounce":""}async function dh(t,e,r){try{let o="",n=e.event_id,i=$(`config.events.${t}.dedupe.time_threshold`);if(n||i){let s=await ye(pa)||{},c=s[t]||{};i&&r-(c.time||0)<parseInt(i,10)&&(o="time_threshold"),!o&&n&&n===c.id&&(o="repeat_id"),o||(s[t]={time:r,id:n},Ue(pa,s))}return o}catch(o){return a.error(o),""}}async function Ud(t,e){try{let r=Date.now(),o=uh(t,r)||ch(t)||await dh(t,e,r);return o||(hs[t]=Bd(t)+1,gs[t]=r),o}catch(r){a.error(r);return}}var vs="EventsAPI";async function se(t,e,r,o){try{let n=`https://api.blackcrow.ai/v1/events/${t}?`;Dt(f)&&(n=`https://api.sandbox.blackcrow.ai/v1/events/${t}?`);let i=await ms(t,e),s=await Ud(t,i);if(s){a.error(new Be(`Duplicate ${t}: ${s}`,vs));return}let c=JSON.stringify(i),u={servletName:vs,method:"POST",cache:"no-cache",body:c};pe(`request: ${t}`,{body:c}),Ge(n,u,r,o)}catch(n){a.error(new Be(n,vs))}}function Vd(t){let e="https://api.blackcrow.ai/v1/events/platform?";Dt(f)&&(e="https://api.sandbox.blackcrow.ai/v1/events/platform?");let r=JSON.stringify(t);Qr(e,r)}var y={START:"start",SESSION:"session",SET:"set",EXTEND:"extend",REFRESH:"refresh",PARTNER_EVENT:"partner_event",VIEW:"view",VIEW_RESPONSE:"view_response",PURCHASE:"purchase",SCORES_UPDATE:"scores_update",IDENTIFY:"identify",PWO_IMPR:"pwo_impression",PWO_EMAIL_LEAD:"pwo_email_lead",PWO_SMS_LEAD:"pwo_sms_lead",PWO_CLOSE:"pwo_close",PWO_OPEN_ATTEMPT:"pwo_open_attempt",OVERRIDES:"overrides",CLEAR_OVERRIDES:"clear_overrides",EXIT_INTENT:"exit_intent",ADD_TO_CART:"add_to_cart",INITIATE_CHECKOUT:"initiate_checkout"};var fh=["purchase","referral","call","update_account"],ph=["purchase","referral","call"];function Wd(t){return fh.indexOf(t)!==-1}function lh(t){let e=t.trigger,r=t.data||{};e==="call"&&(r.purchase_type="call"),ph.indexOf(e)!==-1&&(e=H.PURCHASE),se(e,r)}function qd(){q("platform",y.PARTNER_EVENT,lh)}function _s({appName:t,eventName:e,data:r,sendFn:o}){let n={namespace:d,app_name:t,event_name:e,data:r};if(o)o(n,"*");else try{window.top.postMessage(n,"*")}catch(i){if(i instanceof DataCloneError)a.error(new wt("Attempting to post invalid message object"));else throw i}}var mh=fe("bound_events"),gh=fe("triggered_events");function Ae(t,e,r,o){o=o||{},o.noCache||gh.push(`${t}.${e}`,{data:r,onExec:o.onExec});let n=mh.get(`${t}.${e}`);P(n,i=>{Go(i,r,o.onExec)}),o.postMessage&&_s({appName:t,eventName:e,data:r})}function D(t,e=()=>{},r=9,o=300,n=!1){try{return t()}catch(i){return r?_.setTimeout(()=>D(t,e,r-1,n?o*2:o,n),o):e(i)}}function hh(){v()||(a.postMessageEventListener&&_.removeListener(window,"message",a.postMessageEventListener),a.postMessageEventListener=t=>{let e=t.data||{};e.namespace===d&&(pe(`trigger: ${e.event_name}`,e.data),Ae(e.app_name||"platform",e.event_name,e.data))},_.addListener(window,"message",a.postMessageEventListener))}function io(t){if(!t)return;let e=t.app_name||"platform",r=t.data,o=t.trigger;if(o){pe(`trigger: ${o}`,t),o===y.EXTEND?Wn(r):o===y.SET?qn(r):Wd(o)?Ae(e,y.PARTNER_EVENT,t):Ae(e,o,r);return}let n=t.bind;if(n){pe(`bind: ${n}`,t),q(e,n,t.callback,{origEvent:t});return}pe("unrecognized",t)}function Gd(){P(l,t=>{io(t)})}function jd(){return D(()=>hh(),t=>a.error(t)),io}function ws(){jd(),a.push=io,a.history=Bu}var Hd="IntentProperties";function Mt(t){return t?E(window[Hd],t):window[Hd]}function Es(){let t=Mt();if(t){let e={page_id:t.page_id,visitor_id:t.visitor_id||t.publisher_user_id,member_id:t.member_id,user_is_logged_in:t.is_logged_in_user,user_has_subscription:t.user_has_subscription,page_url:t.page_url,page_referrer_url:t.page_referrer_url,page_title:t.page_title,referrer_source:t.referrer_source,site_currency:t.site_currency,site_country:t.site_country,site_language:t.site_language,site_name:t.site_name,traffic_groups:t.traffic_groups,custom_1:t.site_custom_1,custom_2:t.site_custom_2,custom_3:t.site_custom_3,custom_4:t.site_custom_4,custom_5:t.site_custom_5,custom_6:t.site_custom_6,custom_7:t.site_custom_7};t.cart&&(e.cart=t.cart),t.travel&&(e.travel=b({},{start_date:t.travel.start_date,end_date:t.travel.end_date,origin_airport:t.travel.origin_airport,destination_airport:t.travel.destination_airport,travelers:t.travel.travelers})),io({trigger:y.EXTEND,data:e})}}var yh=fe("bound_events"),vh=fe("triggered_events");function bs(){yh.clear($("config.clearBindings")),vh.clear()}function zd(){let t=E(window,"Shopify.checkout.total_tax");if(t)return t;let e=document.querySelectorAll("[data-checkout-total-taxes-target]");return e.length?e[0].textContent.startsWith("$")?e[0].textContent.trim().substring(1):e[0].textContent.trim():"0.00"}function oe(t){/complete|interactive|loaded/.test(document.readyState)?t():_.addListener(document,"DOMContentLoaded",()=>{t()})}async function Ss(){try{let t=await I("cart"),e=await I(la);return t&&Q(la,t),!t||!e||e!==t}catch{return!0}}function _h(){return{total_price:Mt("total_price"),coupon:Mt("coupon"),shipping_method:Mt("shipping_method"),shipping_price:Mt("shipping_price"),zip_code:Mt("zip_code")}}function Ps(t){if(!t)return;let e=t.amount??0;return rr(e*100)}function Jd(){if(v()){let r=window.shopifyCheckout;return r?{total_price:Ps(r.totalPrice),shipping_price:Ps(r.shippingLine?.price),custom_dimensions:{tax_amount:Ps(r.totalTax)}}:{}}let t=Rd(),e={custom_dimensions:{tax_amount:window.Shopify?zd():void 0},total_price:window.cart_json?.total_price};return b({},t,e)}function wh(){window.IntentProperties&&Wn(_h()),Q(Ru,!0,1051200),se(H.PURCHASE,Jd())}async function xs(){$("page.log_purchase")&&await Ss()&&(wh(),oe(()=>{se(H.DELAYED_PURCHASE,Jd())}))}var ut="audience";function ot(t){return Na(`apps.${t}`)}var Zd="o",Kd=`${d}_audience|score_update`,Ts=`${d}_score`,Yd=`contextData.${Ts}`;function j(t){let e=Number(t);return isNaN(e)?t:e}var B="Integration not available";function ee(t,e){return(r,o,n)=>{if(!r)return;function i(s){s.message===B?a.error(new T(`${t} globals not found`),{appName:o}):a.error(s)}D(()=>e(r,o,n),i)}}var As="adobe_analytics";function bh(t,e,r){let o=E(window,"s.tl");if(typeof o=="function"){let n={contextData:{[Ts]:j(t.score)},linkTrackVars:Yd};o(!0,Zd,Kd,n),typeof r=="function"&&r(As,n);return}throw new Error(B)}var Is={name:As,send:ee(As,bh)};var Xd="event";function U(t,e="|"){return t.filter(r=>r!=null&&r!=="").join(e)}var ks="dynamic_yield";function Sh(t){return t==="1"?"low":t==="2"?"medium":"high"}function Ph(t,e,r){let o=E(window,"DY.API"),n;t.threshold_group_count==="3"&&(n=Sh(t.score));let i=U([d,t.comparison_group.toLowerCase(),n||`score_${t.score}`]);if(typeof o=="function"){let s=j(t.score);o(Xd,{name:i,properties:{}}),typeof r=="function"&&r(ks,{EVENT_PREFIX:`${d}_${e}`,score:s})}else throw new Error(B)}var Os={name:ks,send:ee(ks,Ph)};function Qo(t){let e=new Error(t);return e.name="ConfigDataError",e.status="warn",e.stack=ue(e.stack,1),e}function Qd(t,e){let r=encodeURIComponent(t);return e&&(r=r.replace(/%2C/g,",")),r}function Ie(t,e=!0){let r=[];return P(t,(o,n)=>{if(o!=null&&o!==""){let i=typeof o;i==="function"?o=o.name:i==="object"&&(Array.isArray(o)?o=o.toString():o=JSON.stringify(o)),r.push(`${Qd(n,e)}=${Qd(o,e)}`)}}),r.join("&")}function Cs(t,e){return typeof t=="string"&&typeof e=="string"?t.localeCompare(e,void 0,{sensitivity:"accent"})===0:t===e}function ef(t){let e=`${t}`;return e.length===1?`0${e}`:e}function Ar(t){if(t)return new Date(t?.replace(/-/g,"/"))}function ei(t,e=""){if(t)return`${t.getFullYear()}${e}${ef(t.getMonth()+1)}${e}${ef(t.getDate())}`}function xh(t){if(t&&t.formBuckets){let e=new Date,r=t.formBuckets||[],o=r.filter(i=>!i.startDate&&!i.endDate),n=r.filter(i=>i.startDate&&Ar(i.startDate)<=e&&(!i.endDate||Ar(i.endDate)>=e));if(n.length!==0){let i="01-Jan-2100 04:00:00 UTC";n.sort((u,g)=>Ar(g.startDate)-Ar(u.startDate)),n.sort((u,g)=>{let h=u.endDate||i,S=g.endDate||i;return Ar(h)-Ar(S)});let s=n[0].startDate,c=n[0].endDate;n=n.filter(u=>u.startDate===s&&u.endDate===c)}t.formBuckets=n.length>0?n:o,t.formBuckets.length===0&&delete t.formBuckets}return t}function Ns(t,e="PWO",r=["formBuckets","overlayBuckets","overlayBuckets_triggerBuckets","overlayBuckets_triggerBuckets_formBuckets"]){if(t?.overlaySetting===void 0||t?.overlaySetting===null)return t;let o=be(O());function n(s,c){let u,g;if(Array.isArray(s)&&s.length){let h=JSON.parse(JSON.stringify(s));typeof h[0].percent!="number"&&r.includes(c)&&(h[0].percent=1),typeof h[0].percent=="number"&&(u=`${e}_${c}`,g=h.map(S=>({percent:S.percent,value:{...S}})))}if(u&&g){let h=e,S=s.short_name||c;return ie({name:u,allocations:g,force:o[`bcai_${h}_${S}`]})}return s}function i(s,c){if(s==null)return s;let u=Array.isArray(s)?[]:{},g;return Object.keys(s).forEach(h=>{let S=c?`${c}_${h}`:h;g=n(s[h],S),u[h]=typeof g=="object"?i(g,S):g}),u}return{...t,overlaySetting:i(xh(t.overlaySetting))}}function Th(t){let e=O()?.toLowerCase();return e&&t?.length?t.find(r=>e.match(r.toLowerCase())):!1}function Ah(t,e){let r=t.filter(n=>Cs(n.app,e));return r.length?r.find(n=>Th(n.allowedUrlPatterns))||r.find(n=>!n.allowedUrlPatterns?.length)||{}:{}}function dt(t){if(t){let e=$("apps")||[];if(e)return Ah(e,t)}return{}}function ti(t){let e=dt(t).platforms||[],r=[];return e.forEach(o=>{r.push(o.platform.toLowerCase())}),r}function J(t,e){if(t&&e){let r=dt(t);if(r)return(r.platforms||[]).find(i=>Cs(i.platform,e))||{}}return{}}function ri(t){return t?Ns(dt(t),t).overlaySetting||{}:{}}function Ir(t){return t?dt(t).identitySetting||{}:{}}function en(t,e){let r=Ir(t).platforms?.filter(i=>i.platform?.toLowerCase()===e),o=[],n=O();return n&&(o=r?.filter(i=>i.allowedUrlPatterns?.some(s=>n.includes(s)))),o.length||(o=r?.filter(i=>!i.allowedUrlPatterns?.length)),o}async function bt(t,e=10,r=300,o=!1){let n=e,i=r,s;do try{return await t()}catch(c){n-=1,n&&(await ae(i),i=o?i*2:i,s=c)}while(n);throw s}var rf="event",tn="owox",oi=[];async function Ih(t){let e=await Qt();if(e)t(e);else throw new Error(B)}function tf(t,e,r,o){t.cid=e,t.z=Date.now(),K(`https://google-analytics.bi.owox.com/${r}?${Ie(t)}`,{method:"GET"},()=>o(tn,t))}function kh(t,e,r){let o=window.GoogleAnalyticsObject?window[window.GoogleAnalyticsObject]:window.ga,i=J(e,tn).tracking_id;if(typeof o=="function"){let s=_.setTimeout(()=>{a.error(new T(`${tn} ready hook not fired`))},5e3);o(c=>{if(clearTimeout(s),i=i||c&&c.get("trackingId"),i||P(o.getAll(),u=>{let g=u.get("trackingId");if(g)return i=g,!1}),i){if(!t)return;let u=`${d}_${e}`,g=U([u,t.integration_product,t.conversion_product,t.conversion_type]),h=U([t.comparison_type,t.threshold_setter,t.threshold_group_count,t.comparison_population,t.comparison_group]);oi.push({v:1,ni:1,t:rf,tid:i,dl:O(),ec:g,ea:h,el:j(t.score)}),Array.isArray(oi)&&bt(Ih(S=>{let W=oi;oi={push:ge=>{tf(ge,S,i,r)}},W.forEach(ge=>{tf(ge,S,i,r)})}))}else a.error(new Qo(`${tn} tracking id not found`))})}}var Rs={eventHitType:rf,name:tn,send:kh};var Oh=ie({name:"kpi_sampling",allocations:[{percent:.1,value:!0}]});async function $t(t,e,r){try{if(Oh){let o=await tt();he(`${r} ${e}`,{"evt.name":r,"evt.integration":e,appName:t,"usr.id":o.id,"view.url":R("page_url")||O(),"view.referrer":R("page_referrer_url")||Oe()})}}catch(o){a.error(o)}}var Ls={[Is.name]:Is,[Os.name]:Os,[Rs.name]:Rs};function Ds(t,e,r){$t(ut,t,e),pe(`${ut} ${e}: ${t}`,r)}function Ch(t,e){Ls[t]!==void 0&&e&&P(e,r=>{r.name&&Ls[t].send(r,ut,(o,n)=>{Ds(o,"score_push",n)})})}function Nh(){let t=ot(`${ut}.scores`);t&&t.length&&Ae(ut,y.SCORES_UPDATE,t,{onExec:()=>{Ds(f,y.SCORES_UPDATE,t)}});let e=t?t[0]:null;if(e){let r={score:parseInt(e.score,10),comparison_group:e.comparison_group,threshold_group_count:e.threshold_group_count};Ae(ut,"score_update",b({},r),{onExec:()=>{Ds(f,"score_update",r)}})}}function Rh(t){let e=ot(`${ut}.integrations`),r=[];return P(e,o=>{let n=o.platform;t[n]&&r.push(t[n].then(()=>{Ch(n,o.scores)}))}),Nh(),Promise.all(r)}var of={appName:ut,platforms:Ls,sendAppScores:Rh};function af(t){_.addListener(window,"message",e=>{if(e.origin&&e.origin.indexOf(".attn.tv")>0){let r=e.data.__attentive||{};r&&r.phone&&t(`+1${r.phone}`)}})}function sf(t){_.addListener(window,"postscriptPopup",e=>{if(e.detail.type==="formSubmit"){let{phone:r}=e.detail.values;r&&t(r.includes("+")?r:`+${r}`)}})}function cf(t){let e=document.getElementById("continue_button"),r=document.querySelectorAll("input[type=tel]");e&&r&&_.addListener(e,"click",()=>{if(r[0]){let o=r[0].value;t(o)}})}function uf(){return E(window,"Shopify.checkout.phone")}function df(){let t=E(window,"_learnq");if(t&&typeof t.identify=="function")return t.identify().$phone}function Ms(t){let e=t.match("\\+")?t:`+1${t}`;return e=e.replace(/^(\+)|\D/g,"$1"),e}function $s(t){return new RegExp(/^\+\d{10,14}$/g).test(t)}function kr(t){let e=Ms(t);return $s(e)?er(e):void 0}function te(t){let e=kr(t);e&&Ue(Bn,e)}function nf(t,e=()=>{}){t.value&&e(t.value)}var Fs='input[type="tel"], input[autocomplete~="tel"], input[type="text"][id*="phone" i], input[type="text"][name*="phone" i]';function ff(t=()=>{}){let e=jo(Fs);P(e,r=>{nf(r,t)}),_.addListener(document,"focusout",r=>{let o=r.target;if(o.matches(Fs)){let n=o.value;n&&t(n)}else o.shadowRoot&&o.shadowRoot.querySelectorAll(Fs).forEach(n=>{nf(n,t)})},!0)}function pf(t){let e=uf()||df();e&&t(e),af(r=>{t(r)}),sf(r=>{t(r)}),cf(r=>{t(r)}),ff(r=>{t(r)})}function lf(t=()=>{}){let e=uf()||df();return e?(te(e),t()):(af(r=>{te(r)}),cf(r=>{te(r)}),ff(r=>{te(r),t()}),sf(r=>{te(r)})),e}async function Or(t=!0){try{let e=await ye(Bn)||await I(Bn);return e?t?Sr(e):e:void 0}catch(e){a.error(e);return}}function Lh(t){let e=document.getElementById("continue_button"),r=document.getElementById("checkout_shipping_address_first_name"),o=document.getElementById("checkout_shipping_address_last_name");e&&r&&o&&_.addListener(e,"click",()=>{t(r.value,o.value)})}function mf(){Lh((t,e)=>{Ue(va,er(t)),Ue(_a,er(e))})}async function gf(){try{let t=await ye(va);return t?Sr(t):void 0}catch(t){a.error(t);return}}async function hf(){try{let t=await ye(_a);return t?Sr(t):void 0}catch(t){a.error(t);return}}function Dh(t){if(t)return t.replace(/['.,/#!$%^&*;:{}=\-_`~()]/g,"")}function ni(t){let e=Dh(t);return e?er(e):void 0}function Fh(t,e){let r=t[e];if(r){let{first_name:o,last_name:n}=r;if(n){let i={fn:o,ln:n};return o&&(i.fln=`${o} ${n}`),b({},i)}}}function yf(){let t=[],e=$e()&&E(window,"Shopify.checkout");return e&&["billing_address","credit_card","shipping_address"].forEach(r=>{let o=Fh(e,r);o&&t.push(o)}),t.length?t:void 0}function Bs(t,e){let r=document.createElement(t);return Object.keys(e).forEach(n=>{r[n]=e[n]}),r}function Us(t){if(!t||!crypto||!crypto.subtle||typeof crypto.subtle.digest!="function")return Promise.resolve(void 0);let e=new TextEncoder().encode(t);return crypto.subtle.digest("SHA-256",e).then(r=>Array.from(new Uint8Array(r))).then(r=>r.map(o=>o.toString(16).padStart(2,"0")).join(""))}function ii(t){let e=Object.keys(t).map(r=>Us(t[r]).then(o=>{t[r]=o}));return Promise.all(e).then(()=>b({},t))}var Mh="facebook_ads";async function Vs(){try{let t=await Or(),e={em:await we(),ph:t&&t.replace(/\D/g,""),fn:await gf(),ln:await hf()};return b({},e)}catch(t){return a.error(t),{}}}async function vf(t,e,r,o,n){try{let i=`https://www.facebook.com/tr?id=${t}&ev=${o}&noscript=1`,s=await Vs(),c=await ii(s),u=await I(_t),g=await I(Xt);return P(c,(h,S)=>{i+=`&ud[${S}]=${h}`}),P(n,(h,S)=>{i+=`&cd[${S}]=${h?.toString()}`}),r&&(i+=`&ud[external_id]=${r}`),e&&(i+=`&eid=${e}`,i+="&cdl=API_unavailable",i+="&rqm=GET",i+="&coo=false"),u&&(i+=`&fbp=${u}`),g&&(i+=`&fbc=${g}`),i}catch(i){return a.error(i),`https://www.facebook.com/tr?id=${t}&ev=${o}`}}function _f(t,e,r){return vf(t,void 0,void 0,e,r).then(o=>{let n=Bs("img",{width:1,height:1,src:o});n.style.display="none",document&&document.body&&typeof document.body.append=="function"&&document.body.append(n)})}function ai(t,e,r,o,n,i){return vf(t,e,r,o,n).then(s=>{s+="&",s+=Ie({dl:O(),rl:document.referrer}),D(()=>{K(s,{method:"GET"},i,c=>{throw c})},c=>a.error(new Error(`${Mh} api call failed with message ${c.message}`)),9,300,!0)})}var or="measure";function si(){return window.ShopifyAnalytics&&window.ShopifyAnalytics.lib&&window.ShopifyAnalytics.lib.config&&window.ShopifyAnalytics.lib.config["Facebook Pixel"]&&window.ShopifyAnalytics.lib.config["Facebook Pixel"].conversionsAPIEnabled}var wf=0;function Ef(){return wf+=1,wf}function Ws(){(function(t,e,r,o,n,i,s){t.fbq||(n=t.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)},t._fbq||(t._fbq=n),n.push=n,n.loaded=!0,n.version="2.0",n.queue=[],i=e.createElement(r),i.async=!0,i.src=o,s=e.getElementsByTagName(r)[0],s.parentNode.insertBefore(i,s))})(window,document,"script","https://connect.facebook.net/en_US/fbevents.js")}function qs(t){return e=>{e.message===B?a.error(new T(t)):a.error(e)}}function ci(t,e){v()||(Ws(),window.fbq("init",t,e))}var rn="facebook_ads",Sf="trackCustom";function Pf(t,e){window.fbq("init",t,e)}function xf(t){if(typeof window.fbq!="function"||typeof window.fbq.getState!="function")throw new Error(B);if(typeof window.fbq.getState().then=="function")window.fbq.getState().then(({pixels:e})=>{e&&e.length>0&&t(e)});else if(window.fbq.getState().pixels&&window.fbq.getState().pixels.length>0)t(window.fbq.getState().pixels);else throw new Error(B)}function ui(){return $("facebookAccounts")||[]}function Tf(t){return t===void 0?si():t}function Af(t,e){t.forEach(r=>{let o=r.pixelId,n=r.advancedMatching;if(o){let i=Tf(n)?e:{};v()||Pf(o,i)}})}function $h(t,e,r){let o=ui();o.length&&Af(o,e),r()}function Bh(t,e,r){Ws();let o=ui();function n(){xf(i=>{i.forEach(s=>{Tf()&&Pf(s.id,e)})})}D(()=>{if(typeof window.fbq!="function")throw new Error(B);o.length?Af(o,e):n(),r()},qs(`${rn} globals not found`))}function If(t,e,r){return function(){typeof t=="function"&&t(rn,{eventName:e,eventObject:r})}}function Uh(t,e,r,o){let n=If(o,e,r),i=ui();i.length&&i.forEach(s=>{let c=s.pixelId;ai(c,void 0,void 0,e,r,n)})}function Vh(t,e,r,o){let n=If(o,e,r);xf(()=>{window.fbq(Sf,e,r),n()})}function Wh(t,e){ui().forEach(o=>{let n=o.pixelId;n&&_f(n,t,e)})}function qh(t,e,r,o){return n=>(Wh(t,e),typeof o=="function"&&o(`${rn}`,{eventName:t,eventObject:e},"score_push_img_pixel"),r(n))}function Gh(t){return`${d}_${t}`}function jh(t,e,r){let o;return t===or?o=U([d,r],"_"):o=U([e,r]),o}function Hh(t,e){return{app_name:t,integration_product:e.integration_product,conversion_product:e.conversion_product,conversion_type:e.conversion_type,comparison_population:e.comparison_population,comparison_group:e.comparison_group,comparison_type:e.comparison_type,threshold_setter:e.threshold_setter,threshold_group_count:e.threshold_group_count,score:j(e.score),event_date:ei(new Date,"-"),eventDate:ei(new Date)}}function kf(t,e){let r=Gh(t);return{eventName:jh(t,r,e.integration_product),eventObject:Hh(r,e)}}function zh(t,e,r){if(!t)return;let o=kf(e,t);Uh(e,o.eventName,o.eventObject,r)}function Jh(t,e,r){if(!t)return;let o=kf(e,t),n=o.eventName,i=o.eventObject;D(()=>Vh(e,n,i,r),qh(n,b({},i,{eventHitId:Ef()}),qs(`${rn} globals not found`),r),80,150)}function Zh(t,e,r){v()?zh(t,e,r):Jh(t,e,r)}async function bf(t,e){try{let r=await Vs();v()?$h(t,r,e):Bh(t,r,e)}catch(r){a.error(r)}}var nr={eventHitType:Sf,name:rn,identify:bf,setup:bf,send:Zh};var Gs={[nr.name]:nr};function Kh(t,e,r="score_push"){$t(or,t,r),pe(`${or} ${r}: ${t}`,e)}function Yh(t,e){Gs[t]!==void 0&&e&&e.length>0?(Q(Bo,"scored",30),P(e,r=>{r.name&&Gs[t].send(r,or,Kh)})):Q(Bo,"enabled",30)}function Xh(t){let e=le("blackcrow_promising_user")||"";return t==="enabled"||t===void 0&&e.toLowerCase()==="active"||t===void 0&&O().toLowerCase().indexOf("blackcrow_promising_user%3dactive")>0}async function Qh(t){try{let e=ot(`${or}.integrations`),r=await I(Bo),o=[];return r==="scored"?Q(Bo,"scored",30):Xh(r)&&P(e,n=>{let i=n.platform;t[i]&&o.push(t[i].then(()=>{Yh(i,n.scores)}))}),Promise.all(o)}catch(e){return a.error(e),Promise.resolve([])}}var Of={appName:or,platforms:Gs,sendAppScores:Qh};var V="pwo",Cf="amped",di="attentive",ir="justuno",fi="klaviyo",pi="postscript",Nf="recart",Rf="sendlane",Lf="wisepops",Df="yotpo",Ff="smart_id",Cr={DO_NOT_SEND:"true"},ar={DELAY:"delay",SESSION_VIEW_COUNT:"page_view",EXIT_INTENT:"exit_intent"};var Nr=class{static getPlatformName(){return di}isIdentified(){return le("utm_source")==="attentive"}setup(){}isInitialized(){return!0}static getInstance(){return new Nr}};function js(){if(!window.klaviyo){window._klOnsite=window._klOnsite||[];try{window.klaviyo=new Proxy({},{get(t,e){return e==="push"?function(){let r;(r=window._klOnsite).push.apply(r,arguments)}:function(){for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];let i=typeof o[o.length-1]=="function"?o.pop():void 0;return new Promise(c=>{window._klOnsite.push([e].concat(o,[function(u){i&&i(u),c(u)}]))})}}})}catch{window.klaviyo=window.klaviyo||[],window.klaviyo.push=function(){let e;(e=window._klOnsite).push.apply(e,arguments)}}}}function li(){return T("Klaviyo globals not found.")}function on(t){let e=window?.klaviyo?.push||window?._learnq?.push||window?._klOnsite?.push;if(typeof e=="function")return e(t);throw li()}function mi(){return!!(window._klOnsite?._loaded||window._learnq?._loaded)}function gi(t,e={}){return t&&b(e,{$email:t}),e}function Hs(){return window?.klaviyo?.identify||window?._learnq?.identify}function nn(t){let e=Hs();return typeof e=="function"?e(t):on(["identify",t])}function Mf(){if(typeof window?.klaviyo?.isIdentified=="function")return window.klaviyo.isIdentified();if(typeof window?._learnq?.isIdentified=="function")return window._learnq.isIdentified();throw li()}function zs(){return window?.klaviyo?.openForm}function $f(t){let e=zs();if(typeof e=="function")return e(t);throw li()}async function Bf(){if(typeof window?.klaviyo?.account=="function")return window.klaviyo.account();if(typeof window?._learnq?.account=="function")return window._learnq.account();throw li()}function Uf(t,e,r=500){let o,n=new _.SafeAsyncInterval(async()=>{try{let i=await I(t);if(o===void 0)o=i;else if(o&&i!==o)try{await e(i)}catch(s){a.error(s),n.stop()}finally{o=i}}catch{}},r);return n.start(),n}function me(t,e){try{window.sessionStorage.setItem(t,JSON.stringify(e))}catch{}}async function Vf(t,e){try{v()?await globalThis.browser.sessionStorage.setItem(t,JSON.stringify(e)):window.sessionStorage.setItem(t,JSON.stringify(e))}catch{}}function ao(t,e,r=new Error("Request timed out")){let o=new Promise((n,i)=>{_.setTimeout(()=>{i(r)},e)});return Promise.race([t,o])}var Rr=class extends Error{constructor(r){super(r);this.status="warn"}};function an(t,...e){return new Promise((r,o)=>{t(...e,n=>r(n),n=>o(n))})}function hi(t,e){return an(K,t,e)}var Ce=class{constructor(){this.applicationName=V?.toUpperCase();this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return fi}setupEmailListenerCallback(){oe(()=>{Yn(e=>{let r=Pr(e);r&&nn(gi(r))})})}async sendIdentityIfUnidentified(){try{if(await this.isIdentified()===!1){let r=await we();r?nn(gi(r)):this.setupEmailListenerCallback()}}catch(e){a.error(e)}}handlePostSetup(){if(Hn()==="confirmation"){let e=Uf(Vn,async()=>{try{let r=await no();r&&(await se("kl_purchase",{kl_cid:r}),e.stop())}catch(r){a.error(r)}});return we().then(r=>{let o=r||Kn();o&&nn(gi(o))}).catch(r=>a.error(r))}return this.sendIdentityIfUnidentified()}static isKlaviyoLoaded(){return mi()&&typeof Hs()=="function"}setup(){return Ce.isKlaviyoLoaded()||js(),new Promise((e,r)=>D(()=>{if(!Ce.isKlaviyoLoaded())throw new Error(`${Ce.getPlatformName()} globals not found`);this.hasSetupCompletedSuccessfully=!0,this.handlePostSetup().catch(o=>{a.error(o)}).finally(e)},()=>{let o=T(`[${this.applicationName}] ${Ce.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}setIdentifiedByKlaviyoInSession(){me(wa,!0)}async isIdentified(){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call isIdentified as ${Ce.getPlatformName()} was not initialized.`);if(await z(wa))return!0;if(le("_kx"))return this.setIdentifiedByKlaviyoInSession(),!0;let r=`[${this.applicationName}] ${Ce.getPlatformName()}.isIdentified() Promise did not resolve.`,o=await ao(bt(async()=>{let n=await Mf();if(typeof n!="boolean")throw new Error(`[${this.applicationName}] Cannot call isIdentified as ${Ce.getPlatformName()}.isIdentified() is not returning a boolean.`);return n}),4e3,new Rr(r));return o===!0&&this.setIdentifiedByKlaviyoInSession(),o}async addAttributesToUserProfile(e){nn(b({},{$email:await we(),$phone:await Or()},e)),e.blackcrow_identified&&(on(["track","Black Crow Identified"]),await this.callServerEvent(e).catch(r=>a.error(r)))}async callServerEvent(e){let r=await Bf(),o=await Or(),n=await we(),i={method:"POST",headers:{accept:"application/json",revision:"2023-12-15","content-type":"application/json"},body:JSON.stringify({data:{type:"event",attributes:{properties:{},time:new Date().toISOString(),metric:{data:{type:"metric",attributes:{name:"Black Crow Identified"}}},profile:{data:{type:"profile",attributes:b({email:n,phone_number:o},{properties:{...e}})}}}}})};return hi(`https://a.klaviyo.com/client/events/?company_id=${r}`,i)}static getInstance(){return new Ce}};function ce(t,e){a.push({trigger:t,data:e})}function Js(t){try{t instanceof Error&&t.stack&&(t.stack=Ou(t.stack))}catch{}}function Wf(t){return typeof t=="string"?t:t instanceof Request?t.url??"":""}function sn(t,e){if(typeof e!="function")return;let r=window.fetch;window.fetch=(...o)=>r.apply(this,o).then(n=>{try{Wf(o[0]).match(t)&&e(n.clone())}catch(i){a.error(new Be(`Fetch Sniffer for "${t}" failing with "${i?.message}" possibly due to unexpected ${o}.`))}return n}).catch(n=>{throw Js(n),n})}function St(t,e,r){let o=window.fetch;window.fetch=function(...n){try{if(Wf(n[0]).match(t)){if(r)return o.apply(this,n).then(_.setTimeout(()=>e(n),500)).catch(i=>{throw Js(i),i});e(n)}}catch{a.error(new Be(`Fetch Intercept Error For URL: ${t}`))}return o.apply(this,n).catch(i=>{throw Js(i),i})}}var Pt=class{constructor(){this.appLogAppenders={}}static booleanToEmoji(e){return e?"\u2705":"\u274C"}static formatDiagnosticStatus({state:e,message:r}){return`${e!==void 0?`${Pt.booleanToEmoji(e)} - `:""}${r}`}static formatDiagnosticGroup({title:e,lines:r}){return`${e}:
${r.map(o=>Pt.formatDiagnosticStatus(o)).join(`
`)}`}static async formatAppLogAppender(e){return e.getLogData().then(r=>r.map(o=>Pt.formatDiagnosticGroup(o)).join(`
`))}static isDiagnosticLoggingEnabledForApp(e){return be(window.location.search)?.bcaiDiag?.includes(e)}setAppLogAppender(e,r){this.appLogAppenders[r]=e}getAppLogAppender(e){return this.appLogAppenders[e]}async logDiagnostics(e,r){try{if(!Pt.isDiagnosticLoggingEnabledForApp(r))return;let o=this.appLogAppenders[r];globalThis?.console?.log(`[${r} Diagnostics]
${e?`${e}
`:""}${o?await Pt.formatAppLogAppender(o):""}`)}catch(o){a.error(o)}}};var xt=class{static get diagnostics(){return this.diagnosticsInstance||(this.diagnosticsInstance=new Pt),this.diagnosticsInstance}static getAppLogAppender(e){return xt.diagnostics.getAppLogAppender(e)}static setAppLogAppender(e,r){xt.diagnostics.setAppLogAppender(e,r)}static logDiagnostics(e,r){xt.diagnostics.logDiagnostics(e,r)}};async function ey(){try{return Number(await I(ha))||0}catch(t){return a.error(t),0}}async function je(){try{return Number(await I(ya))||0}catch(t){return a.error(t),0}}async function qf(){try{let t=await ey();Q(ha,t+1,1051200);let e=await je();e<1&&Ae("platform",y.SESSION),Q(ya,e+1,30)}catch(t){a.error(t)}}var G;(function(t){t.assertEqual=n=>n;function e(n){}t.assertIs=e;function r(n){throw new Error}t.assertNever=r,t.arrayToEnum=n=>{let i={};for(let s of n)i[s]=s;return i},t.getValidEnumValues=n=>{let i=t.objectKeys(n).filter(c=>typeof n[n[c]]!="number"),s={};for(let c of i)s[c]=n[c];return t.objectValues(s)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let i=[];for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&i.push(s);return i},t.find=(n,i)=>{for(let s of n)if(i(s))return s},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function o(n,i=" | "){return n.map(s=>typeof s=="string"?`'${s}'`:s).join(i)}t.joinValues=o,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(G||(G={}));var Ks;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Ks||(Ks={}));var x=G.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),sr=t=>{switch(typeof t){case"undefined":return x.undefined;case"string":return x.string;case"number":return isNaN(t)?x.nan:x.number;case"boolean":return x.boolean;case"function":return x.function;case"bigint":return x.bigint;case"symbol":return x.symbol;case"object":return Array.isArray(t)?x.array:t===null?x.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?x.promise:typeof Map<"u"&&t instanceof Map?x.map:typeof Set<"u"&&t instanceof Set?x.set:typeof Date<"u"&&t instanceof Date?x.date:x.object;default:return x.unknown}},w=G.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),ty=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),ze=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(i){return i.message},o={_errors:[]},n=i=>{for(let s of i.issues)if(s.code==="invalid_union")s.unionErrors.map(n);else if(s.code==="invalid_return_type")n(s.returnTypeError);else if(s.code==="invalid_arguments")n(s.argumentsError);else if(s.path.length===0)o._errors.push(r(s));else{let c=o,u=0;for(;u<s.path.length;){let g=s.path[u];u===s.path.length-1?(c[g]=c[g]||{_errors:[]},c[g]._errors.push(r(s))):c[g]=c[g]||{_errors:[]},c=c[g],u++}}};return n(this),o}toString(){return this.message}get message(){return JSON.stringify(this.issues,G.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},o=[];for(let n of this.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(e(n))):o.push(e(n));return{formErrors:o,fieldErrors:r}}get formErrors(){return this.flatten()}};ze.create=t=>new ze(t);var cn=(t,e)=>{let r;switch(t.code){case w.invalid_type:t.received===x.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case w.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,G.jsonStringifyReplacer)}`;break;case w.unrecognized_keys:r=`Unrecognized key(s) in object: ${G.joinValues(t.keys,", ")}`;break;case w.invalid_union:r="Invalid input";break;case w.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${G.joinValues(t.options)}`;break;case w.invalid_enum_value:r=`Invalid enum value. Expected ${G.joinValues(t.options)}, received '${t.received}'`;break;case w.invalid_arguments:r="Invalid function arguments";break;case w.invalid_return_type:r="Invalid function return type";break;case w.invalid_date:r="Invalid date";break;case w.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:G.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case w.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case w.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case w.custom:r="Invalid input";break;case w.invalid_intersection_types:r="Intersection results could not be merged";break;case w.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case w.not_finite:r="Number must be finite";break;default:r=e.defaultError,G.assertNever(t)}return{message:r}},Hf=cn;function ry(t){Hf=t}function vi(){return Hf}var _i=t=>{let{data:e,path:r,errorMaps:o,issueData:n}=t,i=[...r,...n.path||[]],s={...n,path:i},c="",u=o.filter(g=>!!g).slice().reverse();for(let g of u)c=g(s,{data:e,defaultError:c}).message;return{...n,path:i,message:n.message||c}},oy=[];function A(t,e){let r=_i({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,vi(),cn].filter(o=>!!o)});t.common.issues.push(r)}var _e=class{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let o=[];for(let n of r){if(n.status==="aborted")return L;n.status==="dirty"&&e.dirty(),o.push(n.value)}return{status:e.value,value:o}}static async mergeObjectAsync(e,r){let o=[];for(let n of r)o.push({key:await n.key,value:await n.value});return _e.mergeObjectSync(e,o)}static mergeObjectSync(e,r){let o={};for(let n of r){let{key:i,value:s}=n;if(i.status==="aborted"||s.status==="aborted")return L;i.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof s.value<"u"||n.alwaysSet)&&(o[i.value]=s.value)}return{status:e.value,value:o}}},L=Object.freeze({status:"aborted"}),zf=t=>({status:"dirty",value:t}),Ne=t=>({status:"valid",value:t}),Ys=t=>t.status==="aborted",Xs=t=>t.status==="dirty",un=t=>t.status==="valid",wi=t=>typeof Promise<"u"&&t instanceof Promise,k;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(k||(k={}));var nt=class{constructor(e,r,o,n){this._cachedPath=[],this.parent=e,this.data=r,this._path=o,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Gf=(t,e)=>{if(un(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new ze(t.common.issues);return this._error=r,this._error}}};function F(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:o,description:n}=t;if(e&&(r||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(s,c)=>s.code!=="invalid_type"?{message:c.defaultError}:typeof c.data>"u"?{message:o??c.defaultError}:{message:r??c.defaultError},description:n}}var M=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return sr(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:sr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new _e,ctx:{common:e.parent.common,data:e.data,parsedType:sr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(wi(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let o=this.safeParse(e,r);if(o.success)return o.data;throw o.error}safeParse(e,r){var o;let n={common:{issues:[],async:(o=r?.async)!==null&&o!==void 0?o:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:sr(e)},i=this._parseSync({data:e,path:n.path,parent:n});return Gf(n,i)}async parseAsync(e,r){let o=await this.safeParseAsync(e,r);if(o.success)return o.data;throw o.error}async safeParseAsync(e,r){let o={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:sr(e)},n=this._parse({data:e,path:o.path,parent:o}),i=await(wi(n)?n:Promise.resolve(n));return Gf(o,i)}refine(e,r){let o=n=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,i)=>{let s=e(n),c=()=>i.addIssue({code:w.custom,...o(n)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(c(),!1)):s?!0:(c(),!1)})}refinement(e,r){return this._refinement((o,n)=>e(o)?!0:(n.addIssue(typeof r=="function"?r(o,n):r),!1))}_refinement(e){return new Ze({schema:this,typeName:N.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ft.create(this,this._def)}nullable(){return qt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Je.create(this,this._def)}promise(){return dr.create(this,this._def)}or(e){return Mr.create([this,e],this._def)}and(e){return $r.create(this,e,this._def)}transform(e){return new Ze({...F(this._def),schema:this,typeName:N.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new qr({...F(this._def),innerType:this,defaultValue:r,typeName:N.ZodDefault})}brand(){return new Ei({typeName:N.ZodBranded,type:this,...F(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new lo({...F(this._def),innerType:this,catchValue:r,typeName:N.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Gr.create(this,e)}readonly(){return go.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},ny=/^c[^\s-]{8,}$/i,iy=/^[a-z][a-z0-9]*$/,ay=/^[0-9A-HJKMNP-TV-Z]{26}$/,sy=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,cy=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,uy="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Zs,dy=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,fy=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,py=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function ly(t,e){return!!((e==="v4"||!e)&&dy.test(t)||(e==="v6"||!e)&&fy.test(t))}var He=class extends M{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==x.string){let i=this._getOrReturnCtx(e);return A(i,{code:w.invalid_type,expected:x.string,received:i.parsedType}),L}let o=new _e,n;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),A(n,{code:w.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),o.dirty());else if(i.kind==="max")e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),A(n,{code:w.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),o.dirty());else if(i.kind==="length"){let s=e.data.length>i.value,c=e.data.length<i.value;(s||c)&&(n=this._getOrReturnCtx(e,n),s?A(n,{code:w.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&A(n,{code:w.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),o.dirty())}else if(i.kind==="email")cy.test(e.data)||(n=this._getOrReturnCtx(e,n),A(n,{validation:"email",code:w.invalid_string,message:i.message}),o.dirty());else if(i.kind==="emoji")Zs||(Zs=new RegExp(uy,"u")),Zs.test(e.data)||(n=this._getOrReturnCtx(e,n),A(n,{validation:"emoji",code:w.invalid_string,message:i.message}),o.dirty());else if(i.kind==="uuid")sy.test(e.data)||(n=this._getOrReturnCtx(e,n),A(n,{validation:"uuid",code:w.invalid_string,message:i.message}),o.dirty());else if(i.kind==="cuid")ny.test(e.data)||(n=this._getOrReturnCtx(e,n),A(n,{validation:"cuid",code:w.invalid_string,message:i.message}),o.dirty());else if(i.kind==="cuid2")iy.test(e.data)||(n=this._getOrReturnCtx(e,n),A(n,{validation:"cuid2",code:w.invalid_string,message:i.message}),o.dirty());else if(i.kind==="ulid")ay.test(e.data)||(n=this._getOrReturnCtx(e,n),A(n,{validation:"ulid",code:w.invalid_string,message:i.message}),o.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),A(n,{validation:"url",code:w.invalid_string,message:i.message}),o.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),A(n,{validation:"regex",code:w.invalid_string,message:i.message}),o.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),A(n,{code:w.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),o.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),A(n,{code:w.invalid_string,validation:{startsWith:i.value},message:i.message}),o.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),A(n,{code:w.invalid_string,validation:{endsWith:i.value},message:i.message}),o.dirty()):i.kind==="datetime"?py(i).test(e.data)||(n=this._getOrReturnCtx(e,n),A(n,{code:w.invalid_string,validation:"datetime",message:i.message}),o.dirty()):i.kind==="ip"?ly(e.data,i.version)||(n=this._getOrReturnCtx(e,n),A(n,{validation:"ip",code:w.invalid_string,message:i.message}),o.dirty()):G.assertNever(i);return{status:o.value,value:e.data}}_regex(e,r,o){return this.refinement(n=>e.test(n),{validation:r,code:w.invalid_string,...k.errToObj(o)})}_addCheck(e){return new He({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...k.errToObj(e)})}url(e){return this._addCheck({kind:"url",...k.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...k.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...k.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...k.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...k.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...k.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...k.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...k.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...k.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...k.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...k.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...k.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...k.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...k.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...k.errToObj(r)})}nonempty(e){return this.min(1,k.errToObj(e))}trim(){return new He({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new He({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new He({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};He.create=t=>{var e;return new He({checks:[],typeName:N.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...F(t)})};function my(t,e){let r=(t.toString().split(".")[1]||"").length,o=(e.toString().split(".")[1]||"").length,n=r>o?r:o,i=parseInt(t.toFixed(n).replace(".","")),s=parseInt(e.toFixed(n).replace(".",""));return i%s/Math.pow(10,n)}var Tt=class extends M{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==x.number){let i=this._getOrReturnCtx(e);return A(i,{code:w.invalid_type,expected:x.number,received:i.parsedType}),L}let o,n=new _e;for(let i of this._def.checks)i.kind==="int"?G.isInteger(e.data)||(o=this._getOrReturnCtx(e,o),A(o,{code:w.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(o=this._getOrReturnCtx(e,o),A(o,{code:w.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(o=this._getOrReturnCtx(e,o),A(o,{code:w.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?my(e.data,i.value)!==0&&(o=this._getOrReturnCtx(e,o),A(o,{code:w.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(o=this._getOrReturnCtx(e,o),A(o,{code:w.not_finite,message:i.message}),n.dirty()):G.assertNever(i);return{status:n.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,k.toString(r))}gt(e,r){return this.setLimit("min",e,!1,k.toString(r))}lte(e,r){return this.setLimit("max",e,!0,k.toString(r))}lt(e,r){return this.setLimit("max",e,!1,k.toString(r))}setLimit(e,r,o,n){return new Tt({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:o,message:k.toString(n)}]})}_addCheck(e){return new Tt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:k.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:k.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:k.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:k.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:k.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&G.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(r===null||o.value>r)&&(r=o.value):o.kind==="max"&&(e===null||o.value<e)&&(e=o.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Tt.create=t=>new Tt({checks:[],typeName:N.ZodNumber,coerce:t?.coerce||!1,...F(t)});var At=class extends M{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==x.bigint){let i=this._getOrReturnCtx(e);return A(i,{code:w.invalid_type,expected:x.bigint,received:i.parsedType}),L}let o,n=new _e;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(o=this._getOrReturnCtx(e,o),A(o,{code:w.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(o=this._getOrReturnCtx(e,o),A(o,{code:w.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(o=this._getOrReturnCtx(e,o),A(o,{code:w.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):G.assertNever(i);return{status:n.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,k.toString(r))}gt(e,r){return this.setLimit("min",e,!1,k.toString(r))}lte(e,r){return this.setLimit("max",e,!0,k.toString(r))}lt(e,r){return this.setLimit("max",e,!1,k.toString(r))}setLimit(e,r,o,n){return new At({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:o,message:k.toString(n)}]})}_addCheck(e){return new At({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:k.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};At.create=t=>{var e;return new At({checks:[],typeName:N.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...F(t)})};var Lr=class extends M{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==x.boolean){let o=this._getOrReturnCtx(e);return A(o,{code:w.invalid_type,expected:x.boolean,received:o.parsedType}),L}return Ne(e.data)}};Lr.create=t=>new Lr({typeName:N.ZodBoolean,coerce:t?.coerce||!1,...F(t)});var Vt=class extends M{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==x.date){let i=this._getOrReturnCtx(e);return A(i,{code:w.invalid_type,expected:x.date,received:i.parsedType}),L}if(isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return A(i,{code:w.invalid_date}),L}let o=new _e,n;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),A(n,{code:w.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),o.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),A(n,{code:w.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),o.dirty()):G.assertNever(i);return{status:o.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Vt({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:k.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:k.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Vt.create=t=>new Vt({checks:[],coerce:t?.coerce||!1,typeName:N.ZodDate,...F(t)});var co=class extends M{_parse(e){if(this._getType(e)!==x.symbol){let o=this._getOrReturnCtx(e);return A(o,{code:w.invalid_type,expected:x.symbol,received:o.parsedType}),L}return Ne(e.data)}};co.create=t=>new co({typeName:N.ZodSymbol,...F(t)});var Dr=class extends M{_parse(e){if(this._getType(e)!==x.undefined){let o=this._getOrReturnCtx(e);return A(o,{code:w.invalid_type,expected:x.undefined,received:o.parsedType}),L}return Ne(e.data)}};Dr.create=t=>new Dr({typeName:N.ZodUndefined,...F(t)});var Fr=class extends M{_parse(e){if(this._getType(e)!==x.null){let o=this._getOrReturnCtx(e);return A(o,{code:w.invalid_type,expected:x.null,received:o.parsedType}),L}return Ne(e.data)}};Fr.create=t=>new Fr({typeName:N.ZodNull,...F(t)});var ur=class extends M{constructor(){super(...arguments),this._any=!0}_parse(e){return Ne(e.data)}};ur.create=t=>new ur({typeName:N.ZodAny,...F(t)});var Ut=class extends M{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ne(e.data)}};Ut.create=t=>new Ut({typeName:N.ZodUnknown,...F(t)});var pt=class extends M{_parse(e){let r=this._getOrReturnCtx(e);return A(r,{code:w.invalid_type,expected:x.never,received:r.parsedType}),L}};pt.create=t=>new pt({typeName:N.ZodNever,...F(t)});var uo=class extends M{_parse(e){if(this._getType(e)!==x.undefined){let o=this._getOrReturnCtx(e);return A(o,{code:w.invalid_type,expected:x.void,received:o.parsedType}),L}return Ne(e.data)}};uo.create=t=>new uo({typeName:N.ZodVoid,...F(t)});var Je=class extends M{_parse(e){let{ctx:r,status:o}=this._processInputParams(e),n=this._def;if(r.parsedType!==x.array)return A(r,{code:w.invalid_type,expected:x.array,received:r.parsedType}),L;if(n.exactLength!==null){let s=r.data.length>n.exactLength.value,c=r.data.length<n.exactLength.value;(s||c)&&(A(r,{code:s?w.too_big:w.too_small,minimum:c?n.exactLength.value:void 0,maximum:s?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),o.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(A(r,{code:w.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),o.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(A(r,{code:w.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),o.dirty()),r.common.async)return Promise.all([...r.data].map((s,c)=>n.type._parseAsync(new nt(r,s,r.path,c)))).then(s=>_e.mergeArray(o,s));let i=[...r.data].map((s,c)=>n.type._parseSync(new nt(r,s,r.path,c)));return _e.mergeArray(o,i)}get element(){return this._def.type}min(e,r){return new Je({...this._def,minLength:{value:e,message:k.toString(r)}})}max(e,r){return new Je({...this._def,maxLength:{value:e,message:k.toString(r)}})}length(e,r){return new Je({...this._def,exactLength:{value:e,message:k.toString(r)}})}nonempty(e){return this.min(1,e)}};Je.create=(t,e)=>new Je({type:t,minLength:null,maxLength:null,exactLength:null,typeName:N.ZodArray,...F(e)});function so(t){if(t instanceof X){let e={};for(let r in t.shape){let o=t.shape[r];e[r]=ft.create(so(o))}return new X({...t._def,shape:()=>e})}else return t instanceof Je?new Je({...t._def,type:so(t.element)}):t instanceof ft?ft.create(so(t.unwrap())):t instanceof qt?qt.create(so(t.unwrap())):t instanceof it?it.create(t.items.map(e=>so(e))):t}var X=class extends M{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=G.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==x.object){let g=this._getOrReturnCtx(e);return A(g,{code:w.invalid_type,expected:x.object,received:g.parsedType}),L}let{status:o,ctx:n}=this._processInputParams(e),{shape:i,keys:s}=this._getCached(),c=[];if(!(this._def.catchall instanceof pt&&this._def.unknownKeys==="strip"))for(let g in n.data)s.includes(g)||c.push(g);let u=[];for(let g of s){let h=i[g],S=n.data[g];u.push({key:{status:"valid",value:g},value:h._parse(new nt(n,S,n.path,g)),alwaysSet:g in n.data})}if(this._def.catchall instanceof pt){let g=this._def.unknownKeys;if(g==="passthrough")for(let h of c)u.push({key:{status:"valid",value:h},value:{status:"valid",value:n.data[h]}});else if(g==="strict")c.length>0&&(A(n,{code:w.unrecognized_keys,keys:c}),o.dirty());else if(g!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let g=this._def.catchall;for(let h of c){let S=n.data[h];u.push({key:{status:"valid",value:h},value:g._parse(new nt(n,S,n.path,h)),alwaysSet:h in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let g=[];for(let h of u){let S=await h.key;g.push({key:S,value:await h.value,alwaysSet:h.alwaysSet})}return g}).then(g=>_e.mergeObjectSync(o,g)):_e.mergeObjectSync(o,u)}get shape(){return this._def.shape()}strict(e){return k.errToObj,new X({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,o)=>{var n,i,s,c;let u=(s=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,r,o).message)!==null&&s!==void 0?s:o.defaultError;return r.code==="unrecognized_keys"?{message:(c=k.errToObj(e).message)!==null&&c!==void 0?c:u}:{message:u}}}:{}})}strip(){return new X({...this._def,unknownKeys:"strip"})}passthrough(){return new X({...this._def,unknownKeys:"passthrough"})}extend(e){return new X({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new X({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:N.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new X({...this._def,catchall:e})}pick(e){let r={};return G.objectKeys(e).forEach(o=>{e[o]&&this.shape[o]&&(r[o]=this.shape[o])}),new X({...this._def,shape:()=>r})}omit(e){let r={};return G.objectKeys(this.shape).forEach(o=>{e[o]||(r[o]=this.shape[o])}),new X({...this._def,shape:()=>r})}deepPartial(){return so(this)}partial(e){let r={};return G.objectKeys(this.shape).forEach(o=>{let n=this.shape[o];e&&!e[o]?r[o]=n:r[o]=n.optional()}),new X({...this._def,shape:()=>r})}required(e){let r={};return G.objectKeys(this.shape).forEach(o=>{if(e&&!e[o])r[o]=this.shape[o];else{let i=this.shape[o];for(;i instanceof ft;)i=i._def.innerType;r[o]=i}}),new X({...this._def,shape:()=>r})}keyof(){return Jf(G.objectKeys(this.shape))}};X.create=(t,e)=>new X({shape:()=>t,unknownKeys:"strip",catchall:pt.create(),typeName:N.ZodObject,...F(e)});X.strictCreate=(t,e)=>new X({shape:()=>t,unknownKeys:"strict",catchall:pt.create(),typeName:N.ZodObject,...F(e)});X.lazycreate=(t,e)=>new X({shape:t,unknownKeys:"strip",catchall:pt.create(),typeName:N.ZodObject,...F(e)});var Mr=class extends M{_parse(e){let{ctx:r}=this._processInputParams(e),o=this._def.options;function n(i){for(let c of i)if(c.result.status==="valid")return c.result;for(let c of i)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let s=i.map(c=>new ze(c.ctx.common.issues));return A(r,{code:w.invalid_union,unionErrors:s}),L}if(r.common.async)return Promise.all(o.map(async i=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(n);{let i,s=[];for(let u of o){let g={...r,common:{...r.common,issues:[]},parent:null},h=u._parseSync({data:r.data,path:r.path,parent:g});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:g}),g.common.issues.length&&s.push(g.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let c=s.map(u=>new ze(u));return A(r,{code:w.invalid_union,unionErrors:c}),L}}get options(){return this._def.options}};Mr.create=(t,e)=>new Mr({options:t,typeName:N.ZodUnion,...F(e)});var yi=t=>t instanceof Ur?yi(t.schema):t instanceof Ze?yi(t.innerType()):t instanceof Vr?[t.value]:t instanceof It?t.options:t instanceof Wr?Object.keys(t.enum):t instanceof qr?yi(t._def.innerType):t instanceof Dr?[void 0]:t instanceof Fr?[null]:null,fo=class extends M{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==x.object)return A(r,{code:w.invalid_type,expected:x.object,received:r.parsedType}),L;let o=this.discriminator,n=r.data[o],i=this.optionsMap.get(n);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(A(r,{code:w.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[o]}),L)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,o){let n=new Map;for(let i of r){let s=yi(i.shape[e]);if(!s)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let c of s){if(n.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);n.set(c,i)}}return new fo({typeName:N.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:n,...F(o)})}};function Qs(t,e){let r=sr(t),o=sr(e);if(t===e)return{valid:!0,data:t};if(r===x.object&&o===x.object){let n=G.objectKeys(e),i=G.objectKeys(t).filter(c=>n.indexOf(c)!==-1),s={...t,...e};for(let c of i){let u=Qs(t[c],e[c]);if(!u.valid)return{valid:!1};s[c]=u.data}return{valid:!0,data:s}}else if(r===x.array&&o===x.array){if(t.length!==e.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let s=t[i],c=e[i],u=Qs(s,c);if(!u.valid)return{valid:!1};n.push(u.data)}return{valid:!0,data:n}}else return r===x.date&&o===x.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var $r=class extends M{_parse(e){let{status:r,ctx:o}=this._processInputParams(e),n=(i,s)=>{if(Ys(i)||Ys(s))return L;let c=Qs(i.value,s.value);return c.valid?((Xs(i)||Xs(s))&&r.dirty(),{status:r.value,value:c.data}):(A(o,{code:w.invalid_intersection_types}),L)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([i,s])=>n(i,s)):n(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}};$r.create=(t,e,r)=>new $r({left:t,right:e,typeName:N.ZodIntersection,...F(r)});var it=class extends M{_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==x.array)return A(o,{code:w.invalid_type,expected:x.array,received:o.parsedType}),L;if(o.data.length<this._def.items.length)return A(o,{code:w.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),L;!this._def.rest&&o.data.length>this._def.items.length&&(A(o,{code:w.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...o.data].map((s,c)=>{let u=this._def.items[c]||this._def.rest;return u?u._parse(new nt(o,s,o.path,c)):null}).filter(s=>!!s);return o.common.async?Promise.all(i).then(s=>_e.mergeArray(r,s)):_e.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new it({...this._def,rest:e})}};it.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new it({items:t,typeName:N.ZodTuple,rest:null,...F(e)})};var Br=class extends M{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==x.object)return A(o,{code:w.invalid_type,expected:x.object,received:o.parsedType}),L;let n=[],i=this._def.keyType,s=this._def.valueType;for(let c in o.data)n.push({key:i._parse(new nt(o,c,o.path,c)),value:s._parse(new nt(o,o.data[c],o.path,c))});return o.common.async?_e.mergeObjectAsync(r,n):_e.mergeObjectSync(r,n)}get element(){return this._def.valueType}static create(e,r,o){return r instanceof M?new Br({keyType:e,valueType:r,typeName:N.ZodRecord,...F(o)}):new Br({keyType:He.create(),valueType:e,typeName:N.ZodRecord,...F(r)})}},po=class extends M{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==x.map)return A(o,{code:w.invalid_type,expected:x.map,received:o.parsedType}),L;let n=this._def.keyType,i=this._def.valueType,s=[...o.data.entries()].map(([c,u],g)=>({key:n._parse(new nt(o,c,o.path,[g,"key"])),value:i._parse(new nt(o,u,o.path,[g,"value"]))}));if(o.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let u of s){let g=await u.key,h=await u.value;if(g.status==="aborted"||h.status==="aborted")return L;(g.status==="dirty"||h.status==="dirty")&&r.dirty(),c.set(g.value,h.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let u of s){let g=u.key,h=u.value;if(g.status==="aborted"||h.status==="aborted")return L;(g.status==="dirty"||h.status==="dirty")&&r.dirty(),c.set(g.value,h.value)}return{status:r.value,value:c}}}};po.create=(t,e,r)=>new po({valueType:e,keyType:t,typeName:N.ZodMap,...F(r)});var Wt=class extends M{_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==x.set)return A(o,{code:w.invalid_type,expected:x.set,received:o.parsedType}),L;let n=this._def;n.minSize!==null&&o.data.size<n.minSize.value&&(A(o,{code:w.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&o.data.size>n.maxSize.value&&(A(o,{code:w.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());let i=this._def.valueType;function s(u){let g=new Set;for(let h of u){if(h.status==="aborted")return L;h.status==="dirty"&&r.dirty(),g.add(h.value)}return{status:r.value,value:g}}let c=[...o.data.values()].map((u,g)=>i._parse(new nt(o,u,o.path,g)));return o.common.async?Promise.all(c).then(u=>s(u)):s(c)}min(e,r){return new Wt({...this._def,minSize:{value:e,message:k.toString(r)}})}max(e,r){return new Wt({...this._def,maxSize:{value:e,message:k.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Wt.create=(t,e)=>new Wt({valueType:t,minSize:null,maxSize:null,typeName:N.ZodSet,...F(e)});var cr=class extends M{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==x.function)return A(r,{code:w.invalid_type,expected:x.function,received:r.parsedType}),L;function o(c,u){return _i({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,vi(),cn].filter(g=>!!g),issueData:{code:w.invalid_arguments,argumentsError:u}})}function n(c,u){return _i({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,vi(),cn].filter(g=>!!g),issueData:{code:w.invalid_return_type,returnTypeError:u}})}let i={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof dr){let c=this;return Ne(async function(...u){let g=new ze([]),h=await c._def.args.parseAsync(u,i).catch(ge=>{throw g.addIssue(o(u,ge)),g}),S=await Reflect.apply(s,this,h);return await c._def.returns._def.type.parseAsync(S,i).catch(ge=>{throw g.addIssue(n(S,ge)),g})})}else{let c=this;return Ne(function(...u){let g=c._def.args.safeParse(u,i);if(!g.success)throw new ze([o(u,g.error)]);let h=Reflect.apply(s,this,g.data),S=c._def.returns.safeParse(h,i);if(!S.success)throw new ze([n(h,S.error)]);return S.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new cr({...this._def,args:it.create(e).rest(Ut.create())})}returns(e){return new cr({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,o){return new cr({args:e||it.create([]).rest(Ut.create()),returns:r||Ut.create(),typeName:N.ZodFunction,...F(o)})}},Ur=class extends M{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Ur.create=(t,e)=>new Ur({getter:t,typeName:N.ZodLazy,...F(e)});var Vr=class extends M{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return A(r,{received:r.data,code:w.invalid_literal,expected:this._def.value}),L}return{status:"valid",value:e.data}}get value(){return this._def.value}};Vr.create=(t,e)=>new Vr({value:t,typeName:N.ZodLiteral,...F(e)});function Jf(t,e){return new It({values:t,typeName:N.ZodEnum,...F(e)})}var It=class extends M{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),o=this._def.values;return A(r,{expected:G.joinValues(o),received:r.parsedType,code:w.invalid_type}),L}if(this._def.values.indexOf(e.data)===-1){let r=this._getOrReturnCtx(e),o=this._def.values;return A(r,{received:r.data,code:w.invalid_enum_value,options:o}),L}return Ne(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e){return It.create(e)}exclude(e){return It.create(this.options.filter(r=>!e.includes(r)))}};It.create=Jf;var Wr=class extends M{_parse(e){let r=G.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(e);if(o.parsedType!==x.string&&o.parsedType!==x.number){let n=G.objectValues(r);return A(o,{expected:G.joinValues(n),received:o.parsedType,code:w.invalid_type}),L}if(r.indexOf(e.data)===-1){let n=G.objectValues(r);return A(o,{received:o.data,code:w.invalid_enum_value,options:n}),L}return Ne(e.data)}get enum(){return this._def.values}};Wr.create=(t,e)=>new Wr({values:t,typeName:N.ZodNativeEnum,...F(e)});var dr=class extends M{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==x.promise&&r.common.async===!1)return A(r,{code:w.invalid_type,expected:x.promise,received:r.parsedType}),L;let o=r.parsedType===x.promise?r.data:Promise.resolve(r.data);return Ne(o.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}};dr.create=(t,e)=>new dr({type:t,typeName:N.ZodPromise,...F(e)});var Ze=class extends M{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===N.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:o}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:s=>{A(o,s),s.fatal?r.abort():r.dirty()},get path(){return o.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){let s=n.transform(o.data,i);return o.common.issues.length?{status:"dirty",value:o.data}:o.common.async?Promise.resolve(s).then(c=>this._def.schema._parseAsync({data:c,path:o.path,parent:o})):this._def.schema._parseSync({data:s,path:o.path,parent:o})}if(n.type==="refinement"){let s=c=>{let u=n.refinement(c,i);if(o.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(o.common.async===!1){let c=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return c.status==="aborted"?L:(c.status==="dirty"&&r.dirty(),s(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(c=>c.status==="aborted"?L:(c.status==="dirty"&&r.dirty(),s(c.value).then(()=>({status:r.value,value:c.value}))))}if(n.type==="transform")if(o.common.async===!1){let s=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!un(s))return s;let c=n.transform(s.value,i);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(s=>un(s)?Promise.resolve(n.transform(s.value,i)).then(c=>({status:r.value,value:c})):s);G.assertNever(n)}};Ze.create=(t,e,r)=>new Ze({schema:t,typeName:N.ZodEffects,effect:e,...F(r)});Ze.createWithPreprocess=(t,e,r)=>new Ze({schema:e,effect:{type:"preprocess",transform:t},typeName:N.ZodEffects,...F(r)});var ft=class extends M{_parse(e){return this._getType(e)===x.undefined?Ne(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ft.create=(t,e)=>new ft({innerType:t,typeName:N.ZodOptional,...F(e)});var qt=class extends M{_parse(e){return this._getType(e)===x.null?Ne(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};qt.create=(t,e)=>new qt({innerType:t,typeName:N.ZodNullable,...F(e)});var qr=class extends M{_parse(e){let{ctx:r}=this._processInputParams(e),o=r.data;return r.parsedType===x.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};qr.create=(t,e)=>new qr({innerType:t,typeName:N.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...F(e)});var lo=class extends M{_parse(e){let{ctx:r}=this._processInputParams(e),o={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return wi(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ze(o.common.issues)},input:o.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new ze(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}};lo.create=(t,e)=>new lo({innerType:t,typeName:N.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...F(e)});var mo=class extends M{_parse(e){if(this._getType(e)!==x.nan){let o=this._getOrReturnCtx(e);return A(o,{code:w.invalid_type,expected:x.nan,received:o.parsedType}),L}return{status:"valid",value:e.data}}};mo.create=t=>new mo({typeName:N.ZodNaN,...F(t)});var gy=Symbol("zod_brand"),Ei=class extends M{_parse(e){let{ctx:r}=this._processInputParams(e),o=r.data;return this._def.type._parse({data:o,path:r.path,parent:r})}unwrap(){return this._def.type}},Gr=class extends M{_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return i.status==="aborted"?L:i.status==="dirty"?(r.dirty(),zf(i.value)):this._def.out._parseAsync({data:i.value,path:o.path,parent:o})})();{let n=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return n.status==="aborted"?L:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:o.path,parent:o})}}static create(e,r){return new Gr({in:e,out:r,typeName:N.ZodPipeline})}},go=class extends M{_parse(e){let r=this._def.innerType._parse(e);return un(r)&&(r.value=Object.freeze(r.value)),r}};go.create=(t,e)=>new go({innerType:t,typeName:N.ZodReadonly,...F(e)});var Zf=(t,e={},r)=>t?ur.create().superRefine((o,n)=>{var i,s;if(!t(o)){let c=typeof e=="function"?e(o):typeof e=="string"?{message:e}:e,u=(s=(i=c.fatal)!==null&&i!==void 0?i:r)!==null&&s!==void 0?s:!0,g=typeof c=="string"?{message:c}:c;n.addIssue({code:"custom",...g,fatal:u})}}):ur.create(),hy={object:X.lazycreate},N;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(N||(N={}));var yy=(t,e={message:`Input not instance of ${t.name}`})=>Zf(r=>r instanceof t,e),Kf=He.create,Yf=Tt.create,vy=mo.create,_y=At.create,Xf=Lr.create,wy=Vt.create,Ey=co.create,by=Dr.create,Sy=Fr.create,Py=ur.create,xy=Ut.create,Ty=pt.create,Ay=uo.create,Iy=Je.create,ky=X.create,Oy=X.strictCreate,Cy=Mr.create,Ny=fo.create,Ry=$r.create,Ly=it.create,Dy=Br.create,Fy=po.create,My=Wt.create,$y=cr.create,By=Ur.create,Uy=Vr.create,Vy=It.create,Wy=Wr.create,qy=dr.create,jf=Ze.create,Gy=ft.create,jy=qt.create,Hy=Ze.createWithPreprocess,zy=Gr.create,Jy=()=>Kf().optional(),Zy=()=>Yf().optional(),Ky=()=>Xf().optional(),Yy={string:t=>He.create({...t,coerce:!0}),number:t=>Tt.create({...t,coerce:!0}),boolean:t=>Lr.create({...t,coerce:!0}),bigint:t=>At.create({...t,coerce:!0}),date:t=>Vt.create({...t,coerce:!0})},Xy=L,C=Object.freeze({__proto__:null,defaultErrorMap:cn,setErrorMap:ry,getErrorMap:vi,makeIssue:_i,EMPTY_PATH:oy,addIssueToContext:A,ParseStatus:_e,INVALID:L,DIRTY:zf,OK:Ne,isAborted:Ys,isDirty:Xs,isValid:un,isAsync:wi,get util(){return G},get objectUtil(){return Ks},ZodParsedType:x,getParsedType:sr,ZodType:M,ZodString:He,ZodNumber:Tt,ZodBigInt:At,ZodBoolean:Lr,ZodDate:Vt,ZodSymbol:co,ZodUndefined:Dr,ZodNull:Fr,ZodAny:ur,ZodUnknown:Ut,ZodNever:pt,ZodVoid:uo,ZodArray:Je,ZodObject:X,ZodUnion:Mr,ZodDiscriminatedUnion:fo,ZodIntersection:$r,ZodTuple:it,ZodRecord:Br,ZodMap:po,ZodSet:Wt,ZodFunction:cr,ZodLazy:Ur,ZodLiteral:Vr,ZodEnum:It,ZodNativeEnum:Wr,ZodPromise:dr,ZodEffects:Ze,ZodTransformer:Ze,ZodOptional:ft,ZodNullable:qt,ZodDefault:qr,ZodCatch:lo,ZodNaN:mo,BRAND:gy,ZodBranded:Ei,ZodPipeline:Gr,ZodReadonly:go,custom:Zf,Schema:M,ZodSchema:M,late:hy,get ZodFirstPartyTypeKind(){return N},coerce:Yy,any:Py,array:Iy,bigint:_y,boolean:Xf,date:wy,discriminatedUnion:Ny,effect:jf,enum:Vy,function:$y,instanceof:yy,intersection:Ry,lazy:By,literal:Uy,map:Fy,nan:vy,nativeEnum:Wy,never:Ty,null:Sy,nullable:jy,number:Yf,object:ky,oboolean:Ky,onumber:Zy,optional:Gy,ostring:Jy,pipeline:zy,preprocess:Hy,promise:qy,record:Dy,set:My,strictObject:Oy,string:Kf,symbol:Ey,transformer:jf,tuple:Ly,undefined:by,union:Cy,unknown:xy,void:Ay,NEVER:Xy,ZodIssueCode:w,quotelessJson:ty,ZodError:ze});var Qy=["delay","page_view","exit_intent","none"],Qf=C.object({desktop:C.string(),mobile:C.string(),profile:C.string()}).partial(),ep=C.object({name:C.string(),percent:C.number().lte(1).default(1),formConfig:Qf}).partial(),ev=C.object({triggerType:C.enum(Qy),triggerCount:C.number().int(),scoreThreshold:C.number(),formConfig:Qf}).partial(),tv=C.object({name:C.string(),scoreName:C.string(),percent:C.number().lte(1).default(1),showOverlayOnATC:C.boolean(),showSecondOverlayOnExitIntent:C.boolean(),formBuckets:ep,maxTotalOverlays:C.number().int().gte(0),triggers:C.array(ev)}).partial(),rv=tv.required({name:!0}),ov=C.object({name:C.string(),percent:C.number().lte(1).default(1),triggerBuckets:rv}).partial(),nv=ov.required({name:!0}),iv=C.object({zIndex:C.string()}).partial(),av=C.object({renderer:C.string().toLowerCase(),rendererVersion:C.string(),identifyPlatforms:C.array(C.string()),ignoredPagePaths:C.array(C.string()),overlayClosedCookieDuration:C.number(),version:C.coerce.number(),excludedQueryParams:C.array(C.object({name:C.string(),value:C.string()})),styleSettings:C.array(iv),blockOverlayOnCssSelectors:C.array(C.string()),formBuckets:ep,overlayBuckets:nv}).partial(),tp=av.required({renderer:!0});var ho=class{constructor(e){this.setting=tp.parse(e)}static safeFromConfigJSON(){try{return this.isDisabled()?void 0:new ho(ri(V))}catch(e){a.error(new Error(`[PWO] Error parsing overlay setting: ${e}`));return}}static fromConfigJSON(){return new ho(ri(V))}static isDisabled(){return Object.keys(ri(V)||{})?.length===0}get rendererName(){return this.setting.renderer}get rendererVersion(){return this.setting.rendererVersion}get identifyPlatforms(){return this.setting.identifyPlatforms}get ignoredPagePaths(){return this.setting.ignoredPagePaths}get overlayClosedCookieDuration(){return this.setting.overlayClosedCookieDuration}get version(){return this.setting.version}get excludedQueryParams(){return this.setting.excludedQueryParams}get blockOverlayOnCssSelectors(){return this.setting.blockOverlayOnCssSelectors}get styleSettings(){return this.setting.styleSettings}get formBuckets(){return this.setting.formBuckets}get overlayBuckets(){return this.setting.overlayBuckets}get triggerBuckets(){return this.setting.overlayBuckets?.triggerBuckets}get maxTotalOverlays(){return this.setting.overlayBuckets?.triggerBuckets?.maxTotalOverlays}get showSecondOverlayOnExitIntent(){return this.setting.overlayBuckets?.triggerBuckets?.showSecondOverlayOnExitIntent}get showOverlayOnATC(){return this.triggerBuckets?.showOverlayOnATC}hasExcludedUrlParams(){return!!this.setting.excludedQueryParams?.some(({name:e,value:r})=>le(e,void 0)?.toLowerCase()===r.toLowerCase())}get scoreName(){return this.triggerBuckets?.scoreName}get defaultFormConfig(){return this.setting.formBuckets?.formConfig}get triggerBucketFormConfig(){return this.setting.overlayBuckets?.triggerBuckets?.formBuckets?.formConfig}hasValidOverlayBucketFormConfig(){return this.triggerBucketFormConfig!==void 0&&Object.keys(this.triggerBucketFormConfig).length>0}extractRelevantFormConfig(){let e=this.defaultFormConfig;return this.hasValidOverlayBucketFormConfig()&&(e=this.triggerBucketFormConfig),{formId:br(Ee()).deviceType==="mobile"?e?.mobile:e?.desktop,profile:e?.profile}}get identifierNames(){return this.identifyPlatforms||[this.rendererName]}},at=ho;var Gt=class{constructor(e){this.name=e}set(e,r){Q(this.name,e,r)}get(){return vt(this.name)}reset(){Q(this.name,"",-1)}};var ec=class{constructor(){this.SEPARATOR="|";this.overlayHistoryCookie=new Gt(Du)}get(){let e=this.overlayHistoryCookie.get();return e?e.split(this.SEPARATOR):[]}push(e){let r=this.get();r.push(e),this.overlayHistoryCookie.set(r.join(this.SEPARATOR),30)}count(e){return this.get().filter(r=>r===e).length}totalCount(){return this.get().length}},fr=class{constructor(){this.overlayClosedCookieDuration=30;this.openedOverlayEventData=[];this.history=new ec}static overlayWasClosed(){return!!fr.overlayClosedCookie.get()}static piiWasSubmitted(){return!!fr.piiSubmittedCookie.get()}static setPIISubmitCookie(){fr.piiSubmittedCookie.set("true",1051200)}closeOverlay(){this.openOverlayTriggerType=void 0}setOverlayClosedCookie(){this.isOverlayOpenedByATC()||fr.overlayClosedCookie.set("true",this.overlayClosedCookieDuration)}closeOverlayAndSetCookie(){this.closeOverlay(),this.setOverlayClosedCookie()}isOverlayOpen(){return!!this.openOverlayTriggerType}piiWasSubmitted(){return fr.piiWasSubmitted()}submitPII(){fr.setPIISubmitCookie()}setOverlayClosedDuration(e=30){this.overlayClosedCookieDuration=e}totalOverlaysOpenedCount(){return this.history.totalCount()}overlayOpenedEvent(e){e&&this.openedOverlayEventData.push(e)}handleOpenAttemptOutcome(e){let r=e?.resolved_form_id;if(r){if(!this.openedOverlayEventData.length){a.error(new Rr(`[PWO] Impression failed to render for formId: ${r}`));return}if(this.openedOverlayEventData.every(n=>!n.rendered_form_id||`${n.rendered_form_id}`?.trim()==="")){he("[PWO] All rendered form Ids undefined. Could be justuno overlay.");return}if(this.openedOverlayEventData.find(n=>`${n.rendered_form_id}`===r))he("[PWO] Impression rendered successfully.");else{let n=this.openedOverlayEventData.map(i=>!i.rendered_form_id||`${i.rendered_form_id}`==""?"<missing_id>":i.rendered_form_id);a.error(new Rr(`[PWO] Impression failed to render for formId: ${r} and external impression rendered form ids: ${n}`))}}}openAttemptEvent(e){this.openedOverlayEventData=[],_.setTimeout(()=>this.handleOpenAttemptOutcome(e),5e3)}openStandardOverlay(){this.openOverlayTriggerType="s",this.history.push("s")}standardOverlaysOpenedCount(){return this.history.count("s")}isOverlayOpenedByStandard(){return this.openOverlayTriggerType==="s"}openAtcOverlay(){this.openOverlayTriggerType="a",this.history.push("a")}atcOverlaysOpenedCount(){return this.history.count("a")}isOverlayOpenedByATC(){return this.openOverlayTriggerType==="a"}openExitOverlay(){this.openOverlayTriggerType="e",this.history.push("e")}exitOverlaysOpenedCount(){return this.history.count("e")}isOverlayOpenedByExitTrigger(){return this.openOverlayTriggerType==="e"}},lt=fr;lt.overlayClosedCookie=new Gt(Lu),lt.piiSubmittedCookie=new Gt(Fu);function sv(t){if(!t)return!1;let e=t.getBoundingClientRect(),r=getComputedStyle(t);return r.display!=="none"&&r.visibility!=="hidden"&&e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function cv(t){return[...document.querySelectorAll(t)].some(r=>sv(r))}function rp(t=[]){return t.some(cv)}var kt=class{constructor(e){this.overlayLimitTracker=e}static alreadyExcludedByChannel(){return!!kt.pwoExcludedByChannelNameCookie.get()}static shouldBeExcludedByChannel(){let e=at.safeFromConfigJSON();return!!(e&&e.hasExcludedUrlParams())}static doExcludeByChannel(){kt.pwoExcludedByChannelNameCookie.set(!0,void 0)}static meetsExitOverlayConditions(){let e=lt.piiWasSubmitted(),r=kt.isExcludedByChannel();return!(e||r)}static isEligibleForATCTrigger(e,r){return e.overlay_eligible?!r.channel_excluded&&!r.identified&&!r.pii_submitted:!1}static isExcludedByChannel(){return this.alreadyExcludedByChannel()?!0:this.shouldBeExcludedByChannel()?(this.doExcludeByChannel(),!0):!1}static isOverlayClearedToDisplay(){let e=at.safeFromConfigJSON();return!rp(e?.blockOverlayOnCssSelectors)}isEligibleForExitOverlay(){return kt.meetsExitOverlayConditions()&&this.overlayLimitTracker.canOpenExitOverlay()&&kt.isOverlayClearedToDisplay()}shouldTriggerATCOverlay(e,r){return kt.isEligibleForATCTrigger(e,r)&&this.overlayLimitTracker.canOpenAtcOverlay()&&kt.isOverlayClearedToDisplay()}isEligibleForStandardOverlay(e){return e.isUserIdentified().then(o=>!o&&this.overlayLimitTracker.canOpenStandardOverlay()&&kt.isOverlayClearedToDisplay())}},jr=kt;jr.pwoExcludedByChannelNameCookie=new Gt(Mu);var bi=class{constructor(e){this.maxTotalOverlays=1/0;this.maxStandardOverlays=1;this.maxATCOverlays=1;this.maxExitOverlays=1;this.interactionTracker=e}setMaxTotalOverlays(e=1/0){this.maxTotalOverlays=e}totalOverlayLimitReached(){return this.interactionTracker.totalOverlaysOpenedCount()>=this.maxTotalOverlays}standardOverlayLimitReached(){return this.interactionTracker.standardOverlaysOpenedCount()>=this.maxStandardOverlays}canOpenStandardOverlay(){return!this.interactionTracker.isOverlayOpen()&&!this.interactionTracker.piiWasSubmitted()&&!this.standardOverlayLimitReached()&&!this.totalOverlayLimitReached()}atcOverlayLimitReached(){return this.interactionTracker.atcOverlaysOpenedCount()>=this.maxATCOverlays}canOpenAtcOverlay(){return!this.interactionTracker.isOverlayOpen()&&!this.atcOverlayLimitReached()&&!this.totalOverlayLimitReached()}exitOverlayLimitReached(){return this.interactionTracker.exitOverlaysOpenedCount()>=this.maxExitOverlays}canOpenExitOverlay(){return!this.interactionTracker.isOverlayOpen()&&!this.exitOverlayLimitReached()&&!this.totalOverlayLimitReached()}};var uv={["s"]:"openStandardOverlay",["a"]:"openAtcOverlay",["e"]:"openExitOverlay"},dv={["s"]:"isOverlayOpenedByStandard",["a"]:"isOverlayOpenedByATC",["e"]:"isOverlayOpenedByExitTrigger"},ke=class{constructor(){this._overlayTracker=new lt,this._overlayLimitTracker=new bi(this._overlayTracker),this._overlayEligibility=new jr(this._overlayLimitTracker)}static overlayWasClosed(){return lt.overlayWasClosed()}static piiWasSubmitted(){return lt.piiWasSubmitted()}static setPIISubmitCookie(){lt.setPIISubmitCookie()}setOverlayOpen(e){this._overlayTracker[uv[e]]()}isOverlayOpen(){return this._overlayTracker.isOverlayOpen()}closeOverlay(e=!1){e&&this._overlayTracker.setOverlayClosedCookie(),this._overlayTracker.closeOverlay()}wasOverlayOpenedBy(e){return this._overlayTracker[dv[e]]()}submitPII(){this._overlayTracker.submitPII()}overlayOpenedEvent(e){this._overlayTracker.overlayOpenedEvent(e)}openAttemptEvent(e){this._overlayTracker.openAttemptEvent(e)}setOverlayClosedDuration(e){this._overlayTracker.setOverlayClosedDuration(e)}setMaxTotalOverlays(e){this._overlayLimitTracker.setMaxTotalOverlays(e)}static isExcludedByChannel(){return jr.isExcludedByChannel()}static isOverlayClearedToDisplay(){return jr.isOverlayClearedToDisplay()}isEligibleForATCOverlay(e,r){return this._overlayEligibility.shouldTriggerATCOverlay(e,r)}isEligibleForExitOverlay(){return this._overlayEligibility.isEligibleForExitOverlay()}isEligibleForStandardOverlay(e){return this._overlayEligibility.isEligibleForStandardOverlay(e)}};function Re(){return be(window.location.search)?.pwoOverride==="true"}var Pi=class{constructor(){this.failureReasons=[];this.activeTriggers=[]}setAppState(e){this.appState=e}setPwoResponse(e){this.pwoResponse=e}setPwoSettings(e){this.pwoSettings=e}setIdentified(e){this.identified=e}addFailureReason(e){this.failureReasons.push(e)}setTriggers(e){this.activeTriggers=e}get ignoredText(){return Re()?" (overridden)":""}async getLogData(){try{this.sessionPageViews=await je();let e=[],r=this.getFailureReasons();return r&&e.push(r),e.push(this.getEnvironmentStatus()),e.push(this.getPOSettings()),e.push(this.getResponseStatus()),e.push(this.getUIEligibilityState()),e.push(this.getActiveTriggersStatus()),e}catch(e){return a.error(e),[{title:"Error",lines:[{state:!1,message:"Error geting PO diagnostics"}]}]}}getFailureReasons(){if(this.failureReasons.length!==0)return{title:"Failures",lines:this.failureReasons.map(e=>({state:!1,message:e}))}}getResponseStatus(){return{title:"PWO Decision Response",lines:this.pwoResponse?[{state:this.pwoResponse.overlay_eligible,message:this.pwoResponse.overlay_eligible?"User eligible for overlay.":`User not eligible for overlay.${this.ignoredText}`},{state:!!this.pwoResponse.form_id,message:`FormId is present: ${this.pwoResponse.form_id}`},{state:!!this.pwoResponse.trigger_type,message:`ML Trigger is present: ${this.pwoResponse.trigger_type}`},{state:this.pwoResponse.minimum_page_views<=(this.sessionPageViews??0),message:`Session passed minimum amount of page views of ${this.pwoResponse.minimum_page_views}${this.ignoredText}`}]:[{state:!1,message:"PWO Decision response not received yet."}]}}getUIEligibilityState(){let e=this.appState?[{state:!this.appState.isOverlayOpen(),message:`Overlay not already open.${this.ignoredText}`},{state:!ke.overlayWasClosed(),message:`Overlay not previously presented and dismissed.${this.ignoredText}`},{state:!ke.piiWasSubmitted(),message:`PII not submitted.${this.ignoredText}`},{state:!ke.isExcludedByChannel(),message:`Channel not excluded.${this.ignoredText}`},{state:ke.isOverlayClearedToDisplay(),message:`Overlay not blocked (blockOverlayOnCssSelectors).${this.ignoredText}`}]:[{state:!1,message:"PO Not initialized."}];return e.push({state:this.identified===!1,message:this.identified===void 0?"User identification unknown":`User not identified.${this.ignoredText}`}),{title:"UI Eligibility Status",lines:e}}getPOSettings(){return{title:"PO Config Settings",lines:[{state:!!this.pwoSettings,message:"PO Config present."},{state:!at.isDisabled(),message:"PO config is active"},{state:!!this.pwoSettings?.rendererName,message:`Renderer name is set: ${this.pwoSettings?.rendererName}`},{state:!!this.pwoSettings?.identifierNames,message:"IdentifierPlatforms are set"}]}}getEnvironmentStatus(){return{title:"Environment",lines:[{state:!v(),message:"Bundle not loaded by webpixel."},{state:Re(),message:"PWO Override enabled (when enabled, will override/bypass checks)"}]}}getActiveTriggersStatus(){let e=this.activeTriggers.map(r=>({state:!0,message:`${r.triggerName}`}));return this.activeTriggers.length===0&&e.push({state:!1,message:"No active triggers"}),{title:"Active Triggers",lines:e}}};function Hr(){let t=xt.getAppLogAppender("PO");return t||(t=new Pi,xt.setAppLogAppender(t,"PO")),t}function Z(t){xt.logDiagnostics(t,"PO")}function ne(t){Hr().addFailureReason(t),Z("New failure detected")}function fv(t){return[y.PWO_EMAIL_LEAD,y.PWO_SMS_LEAD].includes(t)}var xi,Ti;function de(t,e,r,o){if(!fv(t))return e;let n={em:e?.em,ph:e?.ph};return o&&!n.em&&(n.em=xr(o),Ti=n.em??Ti),!n.em&&Ti&&(n.em=Ti),r&&!n.ph&&(n.ph=kr(r),xi=n.ph??xi),!n.ph&&xi&&(n.ph=xi),b({},e,n)}var tc="generatedByRenderer",pr=class{constructor(){this.applicationName=V?.toUpperCase();this.initialized=!1}static getPlatformName(){return Cf}processEvent(e,r){return r?.[tc]==="true"?(delete r[tc],r):[y.PWO_EMAIL_LEAD,y.PWO_SMS_LEAD].includes(e)?Cr:r}sendEvent(e,r,o,n){let i={rendered_form_id:r};i[tc]="true",ce(e,de(e,i,n,o))}setup(){return this.initialized||(q("platform",y.PWO_CLOSE,e=>{e.rendered_form_id===window.__bcai_amped_trigger&&delete window.__bcai_amped_trigger}),St("amped.io/gateway/receive",e=>{try{let r=e[1]?.body;if(!r)return;let o=JSON.parse(r);if(!o.campaignId)return;let n;if(o.data?.email){let s=Pr(o.data.email);s&&(n=s)}let i;if(o.data?.phone_number){let s=Ms(o.data.phone_number);$s(s)&&(i=s)}n&&this.sendEvent(y.PWO_EMAIL_LEAD,o.campaignId,n,i),i&&this.sendEvent(y.PWO_SMS_LEAD,o.campaignId,n,i)}catch{Z("unable to parse amped payload")}},!1),this.initialized=!0),Promise.resolve()}isInitialized(){return this.initialized}triggerOverlay(e){let r=Number(e);if(Number.isNaN(r))throw new Error(`[${this.applicationName}] Cannot trigger overlay for ${pr.getPlatformName()} due to an invalid formId: ${e}`);window.__bcai_amped_trigger=r}static getInstance(){return new pr}};var pv=new Map([["OPEN",y.PWO_IMPR],["CLOSE",y.PWO_CLOSE],["EMAIL_LEAD",y.PWO_EMAIL_LEAD],["LEAD",y.PWO_SMS_LEAD]]);function op(t){return pv.get(t)}var lr=class{constructor(){this.windowListenerRegistered=!1;this.applicationName=V?.toUpperCase();this.hasSetupCompletedSuccessfully=!1;this.observedEvents={}}static getPlatformName(){return di}setup(){return this.observedEvents={},this.windowListenerRegistered||(this.windowListenerRegistered=!0,_.addListener(window,"message",e=>{if(e.origin&&e.origin.indexOf(".attn.tv")!==-1){let r=e.data.__attentive||{};if(r&&op(r.action)){let{action:o,creativeId:n,phone:i,email:s}=r,c=this.observedEvents[n];if(c?.includes(o))return;this.observedEvents[n]=c?[...c,o]:[o];let u=op(o);u===y.PWO_EMAIL_LEAD&&s&&Y(s),u===y.PWO_SMS_LEAD&&i&&te(i),u&&ce(u,de(u,{rendered_form_id:n},i,s))}}})),new Promise((e,r)=>D(()=>{if(typeof window.__attentive?.trigger!="function")throw new Error(`${lr.getPlatformName()} globals not found`);e()},()=>{let o=T(`[${this.applicationName}] ${lr.getPlatformName()} globals not found.`);a.error(o),r(o)},100)).then(()=>{this.hasSetupCompletedSuccessfully=!0})}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot trigger overlay ${e} as ${lr.getPlatformName()} was not initialized.`);if(!window?.__attentive)throw new Error(`[${this.applicationName}] Cannot trigger overlay ${e} as ${lr.getPlatformName()} global is missing.`);delete this.observedEvents[e],window.__attentive.trigger(null,null,null,e)}getOverlayNode(){let e=document.querySelectorAll(lr.DEFAULT_OVERLAY_SELECTOR);if(e.length!==0){if(e.length>1)throw new Error(`[${this.applicationName}] Expected exactly one matching Attentive overlay container but found ${e?.length}.`);return e[0]}}isInitialized(){return this.hasSetupCompletedSuccessfully}static getInstance(){return new lr}},yo=lr;yo.DEFAULT_OVERLAY_SELECTOR="[id=attentive_overlay]";function dn(t,e){if(typeof e!="function")return;let r=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(...o){try{o[1]?.match(t)&&e&&_.addListener(this,"load",()=>{this.responseType===""||this.responseType==="text"?e(this.responseText):this.responseType==="json"&&e(JSON.stringify(this.response))})}catch{a.error(new Be(`XHR Sniffer Error For URL: ${t}`))}return r.apply(this,o)}}function Ai(t,e){let r=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(...o){try{o[1]?.match(t)&&e(o)}catch{a.error(new Be(`XHR Intercept Error For URL: ${t}`))}return r.apply(this,o)}}var mt=class{constructor(){this.applicationName=V?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return ir}hasEventBeenObserved(e,r){if(r===y.PWO_IMPR&&e.length===0){if(mt.xhrImpressionCount<=mt.loadImpressionCount)return!0;a.error(T(`[${this.applicationName}] ${mt.getPlatformName()} - Impression event not observed from load ju_windowevent.`))}return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),ce(r,de(r,{rendered_form_id:e},o,n)))}getJustunoApp(){if(!window.juapp){let e=(...r)=>{let o=window?.juapp?.q||[];window.juapp&&(window.juapp.q=o),o.push(r)};window.juapp=e}return window.juapp}setup(){return this.observedEvents={},window.ju_windowevent=(e,r)=>{e==="load"&&(mt.loadImpressionCount+=1,this.handleEvent(r,y.PWO_IMPR)),e==="unload"&&this.handleEvent(r,y.PWO_CLOSE)},Ai("(justuno.com|jst.ai)/api/analytics/impression",()=>{mt.xhrImpressionCount+=1,this.handleEvent("",y.PWO_IMPR)}),this.getJustunoApp()("trackFunc","engagement",(e,r,o,n,i,s)=>{let c=s.find(u=>u.name==="phone_number"&&u.value.length>0)?.value;c?(te(c),this.handleEvent(n,y.PWO_SMS_LEAD,c,e)):e&&(Y(e),this.handleEvent(n,y.PWO_EMAIL_LEAD,void 0,e))}),new Promise((e,r)=>D(()=>{if(window.ju_loadiframe&&typeof window.ju_loadiframe=="function"&&window.ju_initialized)return this.hasSetupCompletedSuccessfully=!0,e();throw new Error(`${mt.getPlatformName()} globals not found`)},()=>{let o=T(`[${this.applicationName}] ${mt.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window.ju_loadiframe)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${mt.getPlatformName()} was not initialized.`);delete this.observedEvents[e],window.ju_loadiframe({campaign_id:e??""})}static getInstance(){return new mt}},vo=mt;vo.loadImpressionCount=0,vo.xhrImpressionCount=0;function lv(t){oe(()=>{_.addListener(document?.documentElement,"mouseleave",t)})}function mv(t){let e=Zn(),r=cd();if(r>0){let o=_.setInterval(()=>{let n=e-Zn();n<0&&(n=0,e=Zn()),(n/r>.3||n>4500)&&(clearInterval(o),t())},150)}}function gv(t){if(v())return;let e=r=>{r.state?.exiting&&(_.removeListener(window,"popstate",e),t())};oe(async()=>{try{let r=await je();window.history.state||(window.history.replaceState({exiting:r===1},"",window.location.href),r===1&&window.history.pushState({exiting:!1},"",window.location.href)),_.addListener(window,"popstate",e)}catch(r){a.error(r)}})}function hv(t){mv(t),gv(t)}function np(t){br(Ee()).deviceType!=="mobile"?lv(t):hv(t)}function _o(t){let e=le("bcaiMockScore");if(e)return e;let r=ot(`${ut}.scores`)??[];return t?r.find(({name:o})=>o===t)?.score:void 0}var Ot=class{constructor(){this.applicationName=V?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1;this.previousEnrolledWorkflows=[]}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),ce(r,de(r,{rendered_form_id:e},o,n)))}handleStateChangeEvent(e){let r=JSON.parse(JSON.stringify(e));delete r.workflowEvalStatus,(!this.previousJustunoAppState||JSON.stringify(this.previousJustunoAppState)!==JSON.stringify(r))&&(r.onsiteOpenState.filter(({workflowID:n})=>!this.previousJustunoAppState||!this.previousJustunoAppState.onsiteOpenState.find(({workflowID:i})=>i===n)).map(({workflowID:n})=>n).forEach(n=>{this.handleEvent(n,y.PWO_IMPR)}),this.previousJustunoAppState=r)}handleFetchInterceptEvent(){let e=(window._jst?.profile?.enrolled_workflows??[]).map(s=>JSON.parse(s)),r=e.filter(s=>s.workflow_id&&!this.previousEnrolledWorkflows.find(c=>c.workflow_id===s.workflow_id&&c.enrolled_time===s.enrolled_time&&c.end_time===s.end_time)),o=window._jst?.profile?.updatedProps?.email,n=window._jst?.profile?.updatedProps?.sms;r.forEach(s=>{o&&(Y(o),this.handleEvent(s.workflow_id,y.PWO_EMAIL_LEAD,n,o)),n&&(te(n),this.handleEvent(s.workflow_id,y.PWO_SMS_LEAD,n,o))}),r.filter(s=>s.end_time&&!this.previousEnrolledWorkflows.find(c=>s.workflow_id===c.workflow_id&&s.enrolled_time===c.enrolled_time&&c.end_time===s.end_time)).forEach(s=>{this.handleEvent(s.workflow_id,y.PWO_CLOSE)}),this.previousEnrolledWorkflows=e}setup(){return this.observedEvents={},window.ju_blackcrow={predictions:{submit:{score:0,triggeredExperienceIds:[]}}},ao(new Promise((e,r)=>D(()=>{if(window.ju4app!==void 0){window.ju4app("initFunc",()=>{window._jst.store.events.subscribe("stateChange",o=>{this.handleStateChangeEvent(o)}),St("justone.ai/v1/public/(display|properties|workflows)",()=>{this.handleFetchInterceptEvent()},!0),this.hasSetupCompletedSuccessfully=!0,e()});return}throw new Error(`${Ot.getPlatformName()} globals not found`)},()=>{let o=T(`[${this.applicationName}] ${Ot.getPlatformName()} globals not found.`);a.error(o),r(o)},15)),5e3,T(`[${this.applicationName}] ${Ot.getPlatformName()} Timed out waiting for initFunc.`))}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window.ju_blackcrow)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${Ot.getPlatformName()} was not initialized.`);window.ju_blackcrow&&(delete this.observedEvents[e],window.ju_blackcrow.predictions.submit.score=_o(at.fromConfigJSON().scoreName),window.ju_blackcrow.predictions.submit.triggeredExperienceIds?.push(e))}static getPlatformName(){return ir}static getInstance(){return new Ot}};var fn=class{static getPlatformName(){return ir}static getInstance(){return at.safeFromConfigJSON()?.rendererVersion==="4"?Ot.getInstance():vo.getInstance()}};function yv(t){let e=t.type,r=t?.metaData,o=null;switch(e){case"open":o=y.PWO_IMPR;break;case"submit":r?.$email&&(o=y.PWO_EMAIL_LEAD,Y(r.$email));break;case"stepSubmit":r?.$phone_number&&(o=y.PWO_SMS_LEAD,te(r.$phone_number));break;case"close":o=y.PWO_CLOSE;break;default:break}return o}var vv=["open","embedOpen","close","redirectedToUrl","submit","stepSubmit"],gt=class{constructor(){this.applicationName=V?.toUpperCase();this.hasSetupCompletedSuccessfully=!1;this.observedEvents={}}hasEventBeenObserved(e,r){return r&&this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}handleEvent(e){let r=e?.formId,o=yv(e);this.hasEventBeenObserved(r,o)||(this.addToObservedEvents(r,o),ce(o,de(o??"unknown",{rendered_form_id:r},e?.metaData?.$phone_number,e?.metaData?.$email)),o===y.PWO_EMAIL_LEAD&&on(["track","Welcome Form Submit"]))}setup(){return this.observedEvents={},_.addListener(window,"klaviyoForms",e=>{e.detail&&vv.includes(e.detail.type)&&this.handleEvent(e.detail)}),new Promise((e,r)=>D(()=>{if(!mi()||typeof zs()!="function")throw new Error(`${gt.getPlatformName()} globals not found`);this.hasSetupCompletedSuccessfully=!0,e()},()=>{let o=T(`[${this.applicationName}] ${gt.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${gt.getPlatformName()} was not initialized.`);delete this.observedEvents[e],$f(e)}getOverlayNode(e=""){if(e==="")return;let r=document.querySelectorAll(`form[data-testid=klaviyo-form-${e}]`);if(r.length===0)return;if(r.length>1)throw new Error(`[${this.applicationName}] Expected exactly one matching ${gt.getPlatformName()} form but found ${r?.length}. Form ID: ${e}`);let o=r[0];function n(i){return i instanceof HTMLBodyElement}for(;o&&!n(o.parentElement);)o=o?.parentNode||void 0;return o}static getPlatformName(){return fi}static getInstance(){return new gt}};async function Le(t,e=2e3,r=100){let o=Date.now()+e,n=t();for(;!n&&Date.now()<o;)await ae(r),n=t();return n}var Ct=class{constructor(){this.applicationName=V?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return pi}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),ce(r,de(r,{rendered_form_id:e},o,n)))}async setup(){if(this.observedEvents={},!await Le(()=>typeof window.postscript?.popups?.open=="function",5*60*1e3)){let r=T(`[${this.applicationName}] ${Ct.getPlatformName()} globals not found.`);throw a.error(r),r}await ae(2e3),_.addListener(window,"postscriptPopup",r=>{if(r.detail.type==="formSubmit"){let{values:o,popupId:n}=r.detail,i=o?.email,s=o?.phone;i&&i.length&&(Y(i),this.handleEvent(n.toString(),y.PWO_EMAIL_LEAD,s,i)),s&&s.length&&(te(s),this.handleEvent(n.toString(),y.PWO_SMS_LEAD,s,i))}}),this.hasSetupCompletedSuccessfully=!0}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${Ct.getPlatformName()} was not initialized.`);let r=Number(e);if(Number.isNaN(r))throw new Error(`[${this.applicationName}] Cannot trigger overlay for ${Ct.getPlatformName()} due to an invalid formId: ${e}`);delete this.observedEvents[e],window.postscript.popups.open(r,{activePopupBehavior:"ALWAYS_DISMISS",respectPopupStatus:!1})}static getInstance(){return new Ct}};var Nt=class{constructor(){this.applicationName=V?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return Nf}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),ce(r,de(r,{rendered_form_id:e},o,n)))}async setup(){if(this.observedEvents={},!await Le(()=>window?._recart?.isReady(),6e3)){let r=T(`[${this.applicationName}] ${Nt.getPlatformName()} globals not found.`);throw a.error(r),r}St(/https:\/\/api.recart.com\/tracking\/v1\/.*\/optin-context.*/gm,r=>{try{let o=r[1]?.body;if(!o)return;let n=JSON.parse(o),i=document.querySelector("#recart-popup-root")?.shadowRoot?.querySelector("[data-testid]")?.getAttribute("data-testid")?.replace("popup-overlay-","").replace("popup-minimized-","");n?.optinToolId&&(this.optinToolId=n.optinToolId),i&&i!==this.optinToolId&&(this.optinToolId=i),n?.optinToolId&&(this.optinToolId=n.optinToolId,this.handleEvent(n.optinToolId,y.PWO_IMPR));let s=n?.email,c=n?.phoneNumber;s&&this.optinToolId&&(Y(s),this.handleEvent(this.optinToolId,y.PWO_EMAIL_LEAD,c,s)),c&&this.optinToolId&&(te(c),this.handleEvent(this.optinToolId,y.PWO_SMS_LEAD,c,s))}catch(o){a.error(T(`[${this.applicationName}] ${Nt.getPlatformName()} could not process impressions event. ${o?.message}`))}},!1),this.hasSetupCompletedSuccessfully=!0}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window?._recart?.showOptinTool)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${Nt.getPlatformName()} was not initialized.`);delete this.observedEvents[e],window._recart.showOptinTool(e)}static getInstance(){return new Nt}};var Ke=class{constructor(){this.applicationName=V?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return Rf}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),ce(r,de(r,{rendered_form_id:e},o,n)))}static async loadSendlane(){return window._Sendlane?Promise.resolve():(window._Sendlane=window._Sendlane||[],new Promise((e,r)=>{try{let o=document.createElement("script");o.src="https://sendlane.com/scripts/pusher.js",o.async=!0,o.onload=()=>{e()},document.getElementsByTagName("head")[0]?.appendChild(o)}catch(o){r(o)}}))}static isSendlaneLoaded(){return typeof window._Sendlane?.push=="function"&&window._Sendlane?.baseUrl}async setup(){try{_.addListener(window,"sendlaneForms",r=>{try{if(!(r instanceof CustomEvent))throw new Error("Invalid Sendlane event");switch(r.detail.type){case"open":this.handleEvent(r.detail.form_key,y.PWO_IMPR);break;case"close":this.handleEvent(r.detail.form_key,y.PWO_CLOSE);break;case"submit":{let{email:o,phone:n,isSubmitSuccess:i}=r.detail.metaData,s=Pr(o);i&&s&&(Y(s),this.handleEvent(r.detail.form_key,y.PWO_EMAIL_LEAD,n,s)),i&&n&&(te(n),this.handleEvent(r.detail.form_key,y.PWO_SMS_LEAD,n,s));break}default:break}}catch(o){a.error(o)}}),this.observedEvents={};let e=T(`[${this.applicationName}] ${Ke.getPlatformName()} globals not found.`);if(window._Sendlane||await ao(Ke.loadSendlane(),5e3,e),Ke.isSendlaneLoaded())this.hasSetupCompletedSuccessfully=!0;else throw e}catch(e){throw a.error(e),e}}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${Ke.getPlatformName()} was not initialized.`);return delete this.observedEvents[e],window._Sendlane?.push({form_key:e}),Le(()=>window._Sendlane?.openForm).then(()=>{if(window._Sendlane?.openForm)Z(`${Ke.getPlatformName()} triggerring after polling for openForm.`),window._Sendlane.openForm(e);else throw new Error(`${Ke.getPlatformName()} failed to trigger since openForm was not found.`)})}static getInstance(){return new Ke}};var _v=new Map([["before-popup-display",y.PWO_IMPR],["before-form-submit",y.PWO_EMAIL_LEAD],["after-popup-close",y.PWO_CLOSE]]),jt=class{constructor(){this.applicationName=V?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return Lf}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),ce(r,de(r,{rendered_form_id:e},o,n)))}addWisepopsEventListeners(){_v.forEach((e,r)=>{window?.wisepops&&(e===y.PWO_EMAIL_LEAD?window.wisepops("listen",r,o=>{let n=o?.target?.elements.email?.value;n&&Y(n);let i=o?.target?.elements["phone-number"]?.data,s;if(i){let c=JSON.parse(i);s=`${c?.dialCode}${c?.value}`,s&&te(s)}(n||!s)&&this.handleEvent(o?.detail?.popup?.id?.toString(),e,s,n),s&&this.handleEvent(o?.detail?.popup?.id?.toString(),y.PWO_SMS_LEAD,s,n)}):window.wisepops("listen",r,o=>{this.handleEvent(o?.detail?.popup?.id?.toString(),e)}))})}async setup(){if(this.observedEvents={},!await Le(()=>{if(typeof window?.wisepops=="function")return window?.wisepops},5e3)){let r=T(`[${this.applicationName}] ${jt.getPlatformName()} globals not found.`);throw a.error(r),r}this.addWisepopsEventListeners(),this.hasSetupCompletedSuccessfully=!0}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window?.wisepops)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${jt.getPlatformName()} was not initialized.`);delete this.observedEvents[e],window.wisepops("event",`trigger-${e}`)}static getInstance(){return new jt}};var Ye=class{constructor(){this.applicationName=V.toUpperCase();this.hasSetupCompletedSuccessfully=!1;this.observedEvents={}}static getPlatformName(){return Df}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),ce(r,de(r,{rendered_form_id:e},o,n)))}setup(){return St(/.*\/forms-impressions.*/gm,e=>{try{let r=e[1]?.body;if(!r)return;let{tool_id:o}=JSON.parse(r);o&&this.handleEvent(o,y.PWO_IMPR)}catch(r){a.error(T(`[${this.applicationName}] ${Ye.getPlatformName()} could not process impressions event. ${r?.message}`))}},!1),new Promise(e=>(oe(()=>{_.addListener(document,"smsbump-custom-form-event",r=>{let{form_id:o,format_phone:n,phone:i,email:s,event:c}=r?.detail;c==="form_submit"&&(s&&(Y(s),this.handleEvent(o,y.PWO_EMAIL_LEAD,n||i,s)),(n||i)&&(te(n||i),this.handleEvent(o,y.PWO_SMS_LEAD,n||i,s)))})}),this.hasSetupCompletedSuccessfully=!0,e()))}createTriggeringElement(){this.blackCrowFormTriggeringElement=document.createElement("div"),this.blackCrowFormTriggeringElement.style.width="0",this.blackCrowFormTriggeringElement.style.height="0",this.blackCrowFormTriggeringElement.style.opacity="0",this.blackCrowFormTriggeringElement.style.pointerEvents="none",document.body.appendChild(this.blackCrowFormTriggeringElement)}static isFormIdVisible(e){return Ye.isFormIdPresent(e)&&document?.getElementById(`smsbump-form-${e}`)?.firstElementChild?.getAttribute("aria-hidden")!=="true"}static isFormIdPresent(e){return!!document?.getElementById(`smsbump-form-${e}`)?.firstElementChild}clickTriggerElement(){this.blackCrowFormTriggeringElement&&this.blackCrowFormTriggeringElement.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0}))}triggerOverlay(e){if(this.blackCrowFormTriggeringElement||this.createTriggeringElement(),!this.blackCrowFormTriggeringElement||!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${Ye.getPlatformName()} was not initialized.`);this.blackCrowFormTriggeringElement.id=`bcai_${e}`,this.blackCrowFormTriggeringElement.className=`bcai_${e}`,delete this.observedEvents[e];let r=1;return Le(()=>Ye.isFormIdVisible(e)?!0:(Z(`Yotpo triggering overlay ${e} attempt# ${r}`),r+=1,this.clickTriggerElement(),Ye.isFormIdVisible(e)),15e3,1e3).then(o=>{if(o)Z(`Yotpo overlay ${e} triggered successfully after ${r} attempts.`);else throw T(`[${this.applicationName}] ${Ye.getPlatformName()} could not trigger overlay for form id: ${e}.`)})}getTriggerElement(){if(!(!this.blackCrowFormTriggeringElement||!this.isInitialized()))return this.blackCrowFormTriggeringElement}isInitialized(){return this.hasSetupCompletedSuccessfully}static getInstance(){return new Ye}};var ht=class{constructor(){this.applicationName=V?.toUpperCase();this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return pi}static isPostscriptLoaded(){return typeof window?.postscript?.getSubscriberId=="function"}setup(){return new Promise((e,r)=>D(()=>{if(!ht.isPostscriptLoaded())throw new Error(`${ht.getPlatformName()} globals not found`);this.hasSetupCompletedSuccessfully=!0,e()},()=>{let o=T(`[${this.applicationName}] ${ht.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}isIdentified(){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call isIdentified as ${ht.getPlatformName()} was not initialized.`);return!!window?.postscript?.getSubscriberId?.()}static getInstance(){return new ht}};var mr=class{constructor(){this.applicationName=V?.toUpperCase()}static getPlatformName(){return Ff}async isIdentified(){try{let e=await z(eo);return!!(e?.email_collected||e?.sms_collected)}catch(e){return a.error(new Error(`[${this.applicationName}] Error checking if user is identified by ${mr.getPlatformName()}: ${e}`)),!1}}setup(){}isInitialized(){return!0}static getInstance(){return new mr}};var wo=class{static getOverlayPlatformClassByName(e){return new Map([[yo.getPlatformName(),yo],[pr.getPlatformName(),pr],[fn.getPlatformName(),fn],[gt.getPlatformName(),gt],[Ct.getPlatformName(),Ct],[Nt.getPlatformName(),Nt],[Ke.getPlatformName(),Ke],[jt.getPlatformName(),jt],[Ye.getPlatformName(),Ye]]).get(e.toLowerCase())?.getInstance()}constructor(e){if(!e)throw new Error("[PWO] No configured overlay renderer");let r=wo.getOverlayPlatformClassByName(e);if(!r)throw new Error(`[PWO] Unrecognized overlay renderer: ${e}`);this.overlayPlatform=r,this.platformName=e}setup(){return this.overlayPlatform.isInitialized()?Promise.resolve():this.overlayPlatform.setup()}triggerOverlay(e){return this.overlayPlatform.triggerOverlay(e)}getOverlayNode(e){if(typeof this.overlayPlatform.getOverlayNode=="function")return this.overlayPlatform.getOverlayNode(e)}processEvent(e,r){return typeof this.overlayPlatform.processEvent!="function"?r:this.overlayPlatform.processEvent(e,r)}get name(){return this.platformName}},Eo=class{static getOverlayPlatformClassByName(e){return new Map([[ir,Ce],[Nr.getPlatformName(),Nr],[Ce.getPlatformName(),Ce],[ht.getPlatformName(),ht],[mr.getPlatformName(),mr]]).get(e.toLowerCase())}constructor(e){if(!Array.isArray(e)||!e.length)throw new Error("[PWO] No configured identity platforms");if(this.identifierPlatforms=e.map(r=>{let o=Eo.getOverlayPlatformClassByName(r?.toLowerCase());return o||a.error(new Error(`[PWO] Unrecognized identity platform: ${r}`)),o}).filter((r,o,n)=>!!r&&o===n.indexOf(r)).map(r=>r.getInstance()),!this.identifierPlatforms.length)throw ne("No configured valid platforms"),new Error("[PWO] No configured identity platforms")}setup(){return Promise.all(this.identifierPlatforms.map(e=>e.isInitialized()?Promise.resolve():e.setup()))}isUserIdentified(){let e=this.identifierPlatforms.map(async r=>{try{return await r.isIdentified()}catch(o){return ne(`Error checking if user is identified: ${o?.message}`),!0}});return Promise.all(e).then(r=>r.some(o=>o===!0),r=>(ne(`Error checking if user is identified: ${r?.message??r}`),!0)).then(r=>(Hr().setIdentified(r),r))}addAttributesToUserProfile(e){this.identifierPlatforms.forEach(r=>{typeof r.addAttributesToUserProfile=="function"&&r.addAttributesToUserProfile(e)})}};var wv={subtree:!0,childList:!0};function ip(t,e){t.style.setProperty("z-index",e,"important")}function ap(t,e="relative"){t.style.setProperty("position",e)}async function sp(t,e,r){try{if(!t||!e||!r)return;let o=r.getOverlayNode(e);if(o){let n=window.getComputedStyle(o).position;(!n||n==="static")&&ap(o),ip(o,t);return}await new Promise((n,i)=>{let s=new MutationObserver(()=>{try{let c=r.getOverlayNode(e);if(c){let u=window.getComputedStyle(c).position;(!u||u==="static")&&ap(c),ip(c,t),s.disconnect(),n()}}catch(c){s.disconnect(),i(c)}});s.observe(document.body,wv)})}catch(o){a.error(o)}}function cp(t,e,r){if(e&&r){let o=t?.filter(({zIndex:i})=>i).map(i=>i.zIndex).sort((i,s)=>parseInt(s,10)-parseInt(i,10))[0];return o&&Number.isNaN(parseInt(o,10))?Promise.resolve():sp(o||"2147483647",e,r)}return Promise.resolve()}var zr=class{constructor(e,r,o){this.isIdentified=e,this._eventData=r,this.pwoSettings=o}static async createPWOEventData(e,r){let o=b({},{session_page_views:await je()});return new zr(e,o,r)}buildOverlayBucketParams(){let e=this.pwoSettings?.overlayBuckets,r=this.pwoSettings?.extractRelevantFormConfig(),o=_o(this.pwoSettings?.scoreName);return e===void 0?void 0:{resolved_trigger_config:{...e},resolved_form_id:r?.formId,resolved_form_profile:r?.profile,resolved_score:o,version:this.pwoSettings?.version}}buildEligibilityParams(){return{closed_overlay:!!ke.overlayWasClosed(),identified:this.isIdentified,pii_submitted:!!ke.piiWasSubmitted(),channel_excluded:ke.isExcludedByChannel()}}get eventData(){return b({},this.buildOverlayBucketParams(),this.buildEligibilityParams(),this._eventData)}extendEventData(e){b(this._eventData,e)}get bucketName(){return this.buildOverlayBucketParams()?.resolved_trigger_config?.name}get showOverlayOnATC(){return this.buildOverlayBucketParams()?.resolved_trigger_config?.triggerBuckets?.showOverlayOnATC}};var yt=class{constructor(e){this.response=e}get delay(){return this.trigger_type!==ar.SESSION_VIEW_COUNT?this.response.trigger_count:0}get minimum_page_views(){return this.trigger_type===ar.SESSION_VIEW_COUNT?this.response.trigger_count:0}get form_id(){return this.response.form_id}get form_profile(){return this.response.form_profile}get overlay_eligible(){return this.response.overlay_eligible}get trigger_type(){return this.response.trigger_type}get trigger_count(){return this.response.trigger_count}_equals(e){return this.form_id===e.form_id&&this.form_profile===e.form_profile&&this.overlay_eligible===e.overlay_eligible&&this.trigger_type===e.trigger_type&&this.trigger_count===e.trigger_count}};var Ii="Add to Cart",bo=class{constructor(e=0,r=0,o){this.delay=e,this.minimumPageViews=r,this.triggerFn=o,q("platform",y.ADD_TO_CART,()=>{this.triggerOverlay()})}get triggerName(){return Ii}get minimumPageViewsRequired(){return this.minimumPageViews}async triggerOverlay(){try{if(!Re()){let e=await je();if(this.minimumPageViews&&this.minimumPageViews>e){Z(`${this.triggerName} overlay not triggering, not enough page views.`);return}this.delay>0&&await ae(this.delay*1e3)}await this.triggerFn()}catch(e){a.error(new Error(`[PWO] Error delaying overlay: ${e}`)),ne(`Error delaying ${this.triggerName} overlay: ${e?.message}`)}}static buildTrigger(e,r,o,n,i){if(!e.showOverlayOnATC)return;let s=new yt(r),c=async()=>{try{if(!Re()&&!o.isEligibleForATCOverlay(s,n.eventData)){Z(`Not eligible for ${Ii} Overlay.`);return}Z(`Triggering ${Ii} overlay.`),o.setOverlayOpen("a"),await i(s)}catch(u){a.error(new Error("[PWO] Error triggering overlay"),u),ne(`Error triggering ${Ii} overlay: ${u?.message}`)}};return new bo(s.delay,1,c)}};var pn="Exit Intent",So=class{constructor(e=0,r=0,o){this.delay=e,this.minimumPageViews=r,this.triggerFn=o,np(()=>this.triggerOverlay())}get triggerName(){return pn}get minimumPageViewsRequired(){return this.minimumPageViews}async triggerOverlay(){try{if(!Re()){let e=await je();if(this.minimumPageViews&&this.minimumPageViews>e){Z(`${this.triggerName} overlay not triggering, not enough page views.`);return}this.delay>0&&await ae(this.delay*1e3)}await this.triggerFn()}catch(e){a.error(new Error(`[PWO] Error delaying overlay: ${e}`)),ne(`Error delaying ${this.triggerName} overlay: ${e?.message}`)}}static buildTrigger(e,r,o,n,i){if(!e.showSecondOverlayOnExitIntent&&r?.trigger_type!==ar.EXIT_INTENT)return;let s=new yt(r),c=new yt(b({},r,{trigger_type:ar.EXIT_INTENT})),u=async()=>{try{if(!Re()){if(!o.isEligibleForExitOverlay()){Z(`Not eligible for ${pn} overlay.`);return}if(n.eventData.identified){Z(`Not eligible for ${pn} overlay, identified user.`);return}}Z(`Triggering ${pn} overlay.`),o.setOverlayOpen("e"),await i(c)}catch(g){a.error(new Error("[PWO] Error triggering overlay"),g),ne(`Error triggering ${pn} overlay: ${g?.message}`)}};return new So(s.delay,1,u)}};var ln="Page View/ML",Po=class{constructor(e=0,r=0,o){this.delay=e,this.minimumPageViews=r,this.triggerFn=o,this.triggerOverlay()}get triggerName(){return ln}get minimumPageViewsRequired(){return this.minimumPageViews}async triggerOverlay(){try{if(!Re()){let e=await je();if(this.minimumPageViews&&this.minimumPageViews>e){Z(`${this.triggerName} overlay not triggering, not enough page views.`);return}this.delay>0&&await ae(this.delay*1e3)}await this.triggerFn()}catch(e){a.error(new Error(`[PWO] Error delaying overlay: ${e}`)),ne(`Error delaying ${ln} overlay.: ${e?.message}`)}}static buildTrigger(e,r,o,n){let i=new yt(e);if(i.trigger_type===ar.EXIT_INTENT||!i.trigger_type)return;let s=async()=>{try{if(!Re()&&!await r.isEligibleForStandardOverlay(o)){Z(`Not eligible for ${ln} overlay.`);return}Z(`Triggering ${ln} overlay.`),r.setOverlayOpen("s"),await n(i)}catch(c){a.error(new Error("[PWO] Error triggering overlay"),c),ne(`Error triggering ${ln} overlay.: ${c?.message}`)}};return new Po(i.delay,i.minimum_page_views,s)}};var Jr=class{constructor(e){this.triggers=[];this.triggers=e}get triggerList(){return this.triggers}static buildTriggerManager(e,r,o,n,i,s){if(!r.overlay_eligible&&!Re())return ne("Triggers disabled as overlay not eligible."),new Jr([]);let c=[Po.buildTrigger(r,o,n,s),bo.buildTrigger(e,r,o,i,s),So.buildTrigger(e,r,o,i,s)].filter(u=>u!==void 0);return Hr().setTriggers(c),new Jr(c)}};function up(){let t=Uu()?.filter(o=>o?.name==="request: view")||[];if(t.length===0)return{};let e=t[t.length-1],r=JSON.parse(e?.data?.body||"{}");return b({},{page_id:r?.page_id})}var Ev={subtree:!0,childList:!0,attributes:!0};function rc(t){let e=t.getAttribute("tabindex");return t.removeAttribute("tabindex"),()=>{t.setAttribute("tabindex",e||"0")}}function bv(t){if(!(!t||window.themeCore===void 0))return ae(1e3).then(()=>{window.themeCore?.utils?.removeTrapFocus()}),()=>{window.themeCore?.EventBus?.emit("cart:drawer:open")}}function Sv(t){if(t)return ae(500).then(()=>{document.querySelector(".js-cartCloseV2")?.click()}),()=>{ae(100).then(()=>{document.querySelector(".js-cartToggle")?.click()})}}var oc=class{constructor(e){this.isRunning=!0;this.focusTrap=e;let r=this.getActiveElement();if(r){this.handleActiveElement(r);return}this._promise=new Promise((o,n)=>{this.resolve=o,this.observer=new MutationObserver(()=>{try{r=this.getActiveElement(),r&&(this.handleActiveElement(r),o())}catch(i){this.observer?.disconnect(),this.isRunning=!1,n(i)}}),this.observer.observe(document.querySelector(e.elementToObserver??e.baseElement),Ev)})}getActiveElement(){return this.focusTrap.activeElements.reduce((e,r)=>{if(e)return e;let o=document.querySelector(r.selector);return o?{element:o,callback:r.callback}:void 0},void 0)}handleActiveElement(e){this.cleanup=e.callback(e.element),this.observer?.disconnect(),this.isRunning=!1}get isActive(){return this.isRunning}get promise(){return this._promise}cancel(){if(!this.isRunning){this.cleanup?.();return}this.isRunning=!1,this.observer?.disconnect(),this.resolve?.()}};function dp(t=[{baseElement:"[id=sidebar-cart]",activeElements:[{selector:"[id=sidebar-cart][aria-hidden=false]",callback:rc}]},{baseElement:"#CartDrawer",activeElements:[{selector:"#CartDrawer.drawer--is-open",callback:rc},{selector:"#CartDrawer.is-transitioning[tabIndex]",callback:rc},{selector:"#CartDrawer.is-active",callback:bv}]},{baseElement:".cart-drawer-v2",additionalElements:[".js-cartCloseV2",".js-cartToggle"],elementToObserver:"html",activeElements:[{selector:".state--cart-drawer-v2-open",callback:Sv}]}]){try{if(t.length===0)return;let e=t.find(({baseElement:r,additionalElements:o})=>[r,...o||[]].every(i=>document.querySelectorAll(i).length>0));return e?new oc(e):void 0}catch(e){a.error(e)}}function Ht(t){let e=new Error(t);return e.name="InvalidResponseBodyError",e.status="warn",e.stack=ue(e.stack,1),e}var st,zt,Jt,Rt,Pv,fp,Oi=Hr(),De=new ke;async function xv(){st=await zr.createPWOEventData(!1,Rt)}async function Tv(){try{De.closeOverlay(),await xv()}catch(t){a.error(t)}}function Av(t){a.push({trigger:y.PWO_OPEN_ATTEMPT}),zt.triggerOverlay(t.form_id),Jt.addAttributesToUserProfile({blackcrow_exposed_population_bucket:st?.bucketName,bcai_trigger:t.trigger_type,profile:t.form_profile})}function Iv(t){let e=t?.apps?.pwo;if(e){Oi.setPwoResponse(new yt(e)),st?.extendEventData({resolved_form_id:e.form_id,resolved_form_profile:e.form_profile,trigger_type:e.trigger_type,trigger_count:e.trigger_count,pwo_response_overlay_eligible:e.overlay_eligible});let r=st?.bucketName;Jt.addAttributesToUserProfile(b({},{blackcrow_all_population_bucket:r,blackcrow_eligible_population_bucket:e?.overlay_eligible?r:void 0})),Pv=Jr.buildTriggerManager(Rt,e,De,Jt,st,Av)}else a.error(Ht(`[${V.toUpperCase()}] missing "pwo" in response: ${JSON.stringify(t)} - PWO may be disabled for current URL pattern.`)),ne('PWO Decision response missing "pwo" node.')}function kv(t,e){return se(t,b({},e,up()),r=>{Iv(r)})}async function Ov(t){try{if(t.renderer&&t.isIdentified&&Ra()){await t.renderer;let e=await t.isIdentified;Oi.setIdentified(e),st=await zr.createPWOEventData(e,Rt);let r=st.eventData;await kv(H.PWO_DECISION,r)}else ne("PWO Decision request skipped, invalid view response or setup incomplete")}catch(e){a.error(e),ne(`Error in renderer, identifier or PWO Decision Request: ${e?.message}`)}}function ki(t,e=!1){let r=De.isOverlayOpen(),o=typeof t?.rendered_form_id=="number"?`${t?.rendered_form_id}`:t?.rendered_form_id?.trim(),n=r&&(o===t.resolved_form_id||e&&!o);return b(t,{bcai_triggered:n,overlay_triggered_by_atc:n&&De.wasOverlayOpenedBy("a"),overlay_triggered_by_seu:n&&De.wasOverlayOpenedBy("e")})}function Cv(){q("platform",y.VIEW_RESPONSE,()=>{Ra()&&(q("platform",y.PWO_CLOSE,t=>{let e=zt.processEvent(y.PWO_CLOSE,t);if(Cr===e){Z("Blocking PWO_CLOSE event, should be replaced by another.");return}let r=ki(b({},e,st?.eventData));se(H.PWO_CLOSE,r),r.bcai_triggered&&(De.closeOverlay(!0),fp?.cancel())}),q("platform",y.PWO_EMAIL_LEAD,t=>{let e=zt.processEvent(y.PWO_EMAIL_LEAD,t);if(Cr===e){Z("Blocking PWO_EMAIL_LEAD event, should be replaced by another.");return}De.submitPII();let r=ki(b({},e,st?.eventData));se(H.PWO_EMAIL_LEAD,r),r.bcai_triggered&&Jt.addAttributesToUserProfile({blackcrow_identified:!0})}),q("platform",y.PWO_SMS_LEAD,t=>{let e=zt.processEvent(y.PWO_SMS_LEAD,t);if(Cr===e){Z("Blocking PWO_SMS_LEAD event, should be replaced by another.");return}De.submitPII();let r=ki(b({},e,st?.eventData));se(H.PWO_SMS_LEAD,r),r.bcai_triggered&&Jt.addAttributesToUserProfile({blackcrow_identified:!0})}),q("platform",y.PWO_IMPR,t=>{let e=zt.processEvent(y.PWO_IMPR,t);if(Cr===e){Z("Blocking PWO_IMPR event, should be replaced by another.");return}let r=ki(b({},e,st?.eventData),!0);De.overlayOpenedEvent(r),se(H.PWO_IMPR,r),r.bcai_triggered&&(fp=dp()),r.bcai_triggered&&r.overlay_triggered_by_atc&&cp(Rt.styleSettings,r?.rendered_form_id,zt)}),q("platform",y.PWO_OPEN_ATTEMPT,t=>{let e=b({},t,st?.eventData);De.openAttemptEvent(e),se(H.PWO_OPEN_ATTEMPT,b(e,{bcai_triggered:!0,overlay_triggered_by_atc:De.wasOverlayOpenedBy("a"),overlay_triggered_by_seu:De.wasOverlayOpenedBy("e")}))}))})}function Nv(){let t={isIdentified:void 0,renderer:void 0};try{if(at.isDisabled()||v())return ne("PO not initializing, disabled or in webpixel."),t;ke.isExcludedByChannel(),Rt=at.fromConfigJSON(),Oi.setPwoSettings(Rt),Oi.setAppState(De),zt||(zt=new wo(Rt.rendererName)),Jt||(Jt=new Eo(Rt.identifierNames)),De.setOverlayClosedDuration(Rt.overlayClosedCookieDuration),De.setMaxTotalOverlays(Rt.maxTotalOverlays),t.isIdentified=Jt.setup().then(()=>Jt.isUserIdentified()).catch(()=>(ne("Identifier failed to initialize, defaulting to identified."),!0)),t.renderer=zt.setup(),Cv()}catch(e){a.error(e),ne("Error on initialization.")}return t}var pp={appName:V,init:Nv,sendAppScores:Ov,cleanup:Tv};var nc="cordial";function Rv(t,e,r){let o=`${d}`,n=U([o,t.integration_product]),i=E(window,"crdl");if(typeof i=="function"){let s={app_name:e,integration_product:t.integration_product,conversion_product:t.conversion_product,conversion_type:t.conversion_type,comparison_population:t.comparison_population,comparison_group:t.comparison_group,comparison_type:t.comparison_type,threshold_setter:t.threshold_setter,threshold_group_count:t.threshold_group_count,score:j(t.score)};i("event",n,s),typeof r=="function"&&r(nc,n)}else throw new Error(B)}var ic={name:nc,send:ee(nc,Rv)};var mn=window.GoogleAnalyticsObject||"ga";window[mn]=window[mn]||function(){(window[mn].q=window[mn].q||[]).push(arguments)};var oB=window[mn];window.dataLayer=window.dataLayer||[];function Lv(){return typeof window.gtag=="function"?window.gtag.toString()!=="function () { }":!1}var Lt=Lv()?window.gtag:function(){window.dataLayer.push(arguments)};function lp(t,e){let r=document.createElement("script");r.src=`https://www.googletagmanager.com/gtag/js?id=${t}`,r.async=!0,document.getElementsByTagName("head")[0].appendChild(r),Lt("js",new Date),Lt("config",t,e)}function mp(t,e,r=!1){Lt("event",t,{send_to:e,non_interaction:r})}async function gn(){try{return(await I("_ga"))?.split(".")?.slice(-2).join(".")}catch(t){a.error(t);return}}async function ac(t,e){try{if(v()){let o=J(t,e).tracking_id,n=await gn();return o!=null&&o.startsWith("UA-")&&n!==void 0}if(Array.isArray(window.dataLayer)){let r=!1;return P(window.dataLayer,o=>{o[0]==="config"&&o[1]&&o[1].indexOf("UA-")===0&&(r=!0)}),r}return!1}catch(r){a.error(r);return}}async function sc(t,e){try{if(v()){let o=J(t,e).tracking_id,n=await gn();return o!=null&&o.startsWith("G-")&&n!==void 0}if(Array.isArray(window.dataLayer)){let r=!1;return P(window.dataLayer,o=>{o[0]==="config"&&o[1]&&o[1].indexOf("G-")===0&&(r=!0)}),r}return!1}catch(r){a.error(r);return}}function xo(t,e={}){!v()&&t&&lp(t,e)}async function Ci(t,e,r,o=!1){try{let n=await re(r),i=en(t,e),s=n.length?n[0].value:void 0;i.forEach(c=>{let u=c.pixelId,g=c.loadPixel===!0;u&&s&&g&&(xo(u,{user_id:s,send_page_view:!1}),o&&mp("page_view_blackcrow",u))})}catch(n){a.error(n)}}var Ni="event",Fe="google_analytics",Dv="https://www.google-analytics.com/collect",Fv="https://www.google-analytics.com/g/collect";function gp(){return!!$("config.google_analytics.gtag_externally_configured")}function Mv(){return!!$("config.google_analytics.gtm_format")}function $v(t,e){let r=J(t,Fe);if(gp()){e();return}let o=r?.tracking_id;xo(o,{send_page_view:!1}),e()}async function Bv(t,e,r,o,n){try{let i=new URL(Dv);i.search=Ie({v:1,t:Ni,tid:t,cid:await gn(),ec:e,ea:r,el:o,ua:Ee(),dl:O(),dt:document.title,ni:1}),K(i.toString(),{method:"GET",mode:"cors"},n)}catch(i){a.error(new Error(`${Fe} api call failed with ${i}`))}}async function Uv(t,{onSuccess:e,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:s,thresholdSetter:c,thresholdGroupCount:u,comparisonPopulation:g,score:h}){try{let S=new URL(Fv);S.search=Ie({v:2,tid:t,en:Ni,cid:await gn(),dl:O(),dt:document.title,ep:{app_name:r,integration_product:o,conversion_product:n,comparison_population:g,comparison_type:s,conversion_type:i,threshold_setter:c,threshold_group_count:u,non_interaction:!0},epn:{score:h}}),K(S.toString(),{method:"POST",mode:"cors"},e)}catch(S){a.error(new Error(`${Fe} api call failed with ${S}`))}}function hp(t,e,r,o,n,i,s,c,u){let g={};return g.category=U([t,e,r,o]),g.action=U([n,i,s,c]),g.label=u,g}async function Vv(t,{onSuccess:e,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:s,thresholdSetter:c,thresholdGroupCount:u,comparisonPopulation:g,score:h}){try{let Xr=function(){typeof e=="function"&&e(Fe,{eventCategory:Kt,eventAction:vr,eventLabel:Ro})};var S=Xr;let W=J(t,Fe);if(W.pageBlocked)return;let ge=window.GoogleAnalyticsObject?window[window.GoogleAnalyticsObject]:window.ga,Zt=hp(r,o,n,i,s,c,u,g,h),Kt=Zt.category,vr=Zt.action,Ro=Zt.label,ca=await ac(t,Fe),Lo=await sc(),Do;if(gp()&&(Do={send_to:W.tracking_id}),Mv()){let Fo=U([r,o],"_");window.dataLayer.push({event:Fo,non_interaction:!0,app_name:r,integration_product:o,conversion_product:n,conversion_type:i,comparison_population:g,comparison_type:s,threshold_setter:c,threshold_group_count:u,score:h,...Do}),Xr();return}if(Lo||Do){let Fo=U([r,o],"_");Lt("event",Fo,{non_interaction:!0,app_name:r,integration_product:o,conversion_product:n,conversion_type:i,comparison_population:g,comparison_type:s,threshold_setter:c,threshold_group_count:u,score:h,...Do}),Xr()}else if(ca)Lt("event",vr,{event_category:Kt,event_label:Ro,non_interaction:!0}),Xr();else if(typeof ge=="function"){let Fo=_.setTimeout(()=>{a.error(new T(`${Fe} ready hook not fired`))},5e3);ge(Au=>{if(clearTimeout(Fo),!(Au&&Au.get("trackingId"))){let On=W.tracking_id;On||P(ge.getAll(),wm=>{let Iu=wm.get("trackingId");if(Iu)return On=Iu,!1}),On?ge("create",On,"auto"):a.error(new Qo(`${Fe} tracking id not found`))}ge("send",{hitType:Ni,eventCategory:Kt,eventAction:vr,eventLabel:Ro,nonInteraction:!0}),Xr()})}else throw new Error(B)}catch(W){a.error(W)}}async function Wv(t,{onSuccess:e,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:s,thresholdSetter:c,thresholdGroupCount:u,comparisonPopulation:g,score:h}){try{let vr=function(){typeof e=="function"&&e(Fe,{eventCategory:ge,eventAction:Zt,eventLabel:Kt})};var S=vr;let W=hp(r,o,n,i,s,c,u,g,h),ge=W.category,Zt=W.action,Kt=W.label,Ro=await ac(t,Fe);if(await sc(t,Fe)){let Lo=J(t,Fe).tracking_id;Uv(Lo,{onSuccess:vr,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:s,thresholdSetter:c,thresholdGroupCount:u,comparisonPopulation:g,score:h})}else if(Ro){let Lo=J(t,Fe).tracking_id;Bv(Lo,ge,Zt,Kt,vr)}else throw new Error(B)}catch(W){a.error(W)}}function qv(t,e,r){let o=`${d}_${e}`;function n(s){s.message===B?a.error(new T(`${Fe} globals not found`),{appName:e}):a.error(s)}if(!t)return;let i=v()?Wv:Vv;D(()=>i(e,{onSuccess:r,eventPrefix:o,integrationProduct:t.integration_product,conversionProduct:t.conversion_product,conversionType:t.conversion_type,comparisonType:t.comparison_type,thresholdSetter:t.threshold_setter,thresholdGroupCount:t.threshold_group_count,comparisonPopulation:t.comparison_population,score:j(t.score)}),n)}var cc={eventHitType:Ni,name:Fe,setup:$v,send:qv};var To="google_ads",Gv="www.googleadservices.com",jv="_gcl_au";function Ri(t){return J(t,To)?.conversion_id}function yp(t){return Ri(t)?.split("-").splice(-1).join()}async function Hv(){try{return(await I(jv))?.split(".").splice(-2).join(".")}catch(t){a.error(t);return}}async function vp(t){try{let e=O(),r=Oe(),o=to(),n=Date.now(),i=await Hv(),s={data:`event=${t};non_interaction=true`,fst:n,random:n,auid:i,url:e,ref:r,tiba:o,hn:Gv,rfmt:3,fmt:4,async:1,cv:11,guid:"ON"};return Ie(s)}catch(e){return a.error(e),Ie({})}}var zv="event",Jv="https://googleads.g.doubleclick.net/pagead/viewthroughconversion";function Zv(t,e){let r=Ri(t);xo(r),e()}function Kv(){if(Array.isArray(window.dataLayer)){let t=!1;return P(window.dataLayer,e=>{e[0]==="config"&&e[1]&&e[1].indexOf("AW-")===0&&(t=!0)}),t}return!1}async function Yv(t,e,r){try{let o=yp(e),n=await vp(t);Qr(`${Jv}/${o}/?${n}`),r()}catch(o){a.error(new Error(`${To} api call failed with ${o}`))}}function Xv(t,e,r){if(Kv())Lt("event",t,{send_to:Ri(e),non_interaction:!0}),r();else throw new Error(B)}function Qv(t,e,r){let o=`${d}_${e}`,n=U([o,t.integration_product,t.conversion_product,t.conversion_type,t.comparison_type,t.threshold_setter,t.threshold_group_count,t.comparison_population,`score_${j(t.score)}`]);function i(){typeof r=="function"&&r(To,{event:n})}v()?Yv(n,e,i):Xv(n,e,i)}var uc={eventHitType:zv,name:To,setup:Zv,send:ee(To,Qv)};var dc="heap";function e_(t,e,r){let o=E(window,"heap");if(o&&typeof o.addUserProperties=="function"){let i={[U([d,t.comparison_group,t.threshold_group_count])]:t.score};o.addUserProperties(i),typeof r=="function"&&r(dc,i)}else throw new Error(B)}var fc={name:dc,send:ee(dc,e_)};var hn="klaviyo";function t_(t,e){if(!v()){let r=J(t,hn).api_key,o=window.klaviyo?window.klaviyo.identify:null;if(r&&typeof o!="function"){let n=document.createElement("script");n.src=`https://static.klaviyo.com/onsite/js/klaviyo.js?company_id=${r}`,n.async=!0,document.getElementsByTagName("head")[0].appendChild(n)}}e()}async function _p(t,e,r,o){try{let s=function(){typeof o=="function"&&o(hn,e)},u=function(){let g=j(r.score),h={[e]:g};return c&&b(h,{email:c}),h};var n=s,i=u;let c=await we();if(v()){let g=J(t,hn).api_key;g&&K(`https://a.klaviyo.com/client/profiles/?company_id=${g}`,{body:JSON.stringify({data:{type:"profile",attributes:{properties:u()}}}),method:"POST",headers:{accept:"application/json",revision:"2024-05-15","content-type":"application/json"}},s())}else window.klaviyo||(window.klaviyo=[],a.error(new T(`${hn} globals not found`))),window.klaviyo.push(["identify",u()]),s()}catch(s){a.error(s)}}var wp={},pc={};function r_(t){let e=wp[t];return()=>{_p(e.appName,e.eventName,e.scoreObj,e.onSuccess)}}function o_(t,e,r){if(!t)return;let o=U([`${d}`,"score",t.threshold_group_count,t.comparison_group]);t.name!==void 0&&(wp[t.name]={appName:e,eventName:o,scoreObj:t,onSuccess:r},pc[t.name]===void 0&&(pc[t.name]=r_(t.name)),_.addListener(window,"beforeunload",pc[t.name])),_.setTimeout(()=>_p(e,o,t,r),5e3)}var lc={name:hn,setup:t_,send:o_};var n_="event",Li="microsoft_ads";function i_(t,{onSuccess:e,eventCategory:r,eventAction:o,eventLabel:n,eventValue:i}){function s(){typeof e=="function"&&e(Li,{event_category:r,event_action:o,event_label:n,event_value:i})}try{window.uetq=window.uetq||[],window.uetq.push("event",o,{event_category:r,event_label:n,event_value:i}),s()}catch{a.error(new T(`${Li} globals not found`),{appName:t})}}function a_(t,e){let o=J(t,Li).tracking_id;o?function(n,i,s,c,u){var g,h,S;n[u]=n[u]||[],g=function(){var W={ti:o};W.q=n[u],n[u]=new UET(W),n[u].push("pageLoad"),e()},h=i.createElement(s),h.src=c,h.async=1,h.onload=h.onreadystatechange=function(){var W=this.readyState;W&&W!=="loaded"&&W!=="complete"||(g(),h.onload=h.onreadystatechange=null)},S=i.getElementsByTagName(s)[0],S.parentNode.insertBefore(h,S)}(window,document,"script","//bat.bing.com/bat.js","uetq"):e()}function s_(t,e,r){let o=`${d}_${e}`;if(!t)return;let n=t.integration_product,i=U([o,n,t.conversion_product,t.conversion_type]),s=U([t.comparison_type,t.threshold_setter,t.threshold_group_count,t.comparison_population,t.comparison_group]),c,u;if(n==="prospecting")u=t.raw_probability;else{c=j(t.score);let g=Number(t.score);g>=0&&(u=g)}i_(e,{onSuccess:r,eventCategory:i,eventAction:s,eventLabel:c,eventValue:u})}var mc={eventHitType:n_,name:Li,setup:a_,send:s_};var gc="oracle_responsys";function c_(t,e,r){let o=E(window,"ORA.click");if(typeof o=="function"){let n=j(t.score);o({data:{bc_score:n,"wt.dl":99}}),typeof r=="function"&&r(gc,n)}else throw new Error(B)}var hc={name:gc,send:ee(gc,c_)};var Ep="track";var yc="outbrain";function u_(t,e,r){let o=E(window,"obApi");if(typeof o=="function"){let n=`${d}`,i=t.integration_product,s=U([n,i,t.threshold_group_count,j(t.score)]," ").replace(/[^0-9a-z\s]/gi,"");o(Ep,s),typeof r=="function"&&r(yc,s)}else throw new Error(B)}var vc={name:yc,send:ee(yc,u_)};var Zr="pinterest",Di=`${d}`;function _c(t){return{lead_type:t.integration_product,video_title:t.conversion_product,order_id:t.conversion_type,property:t.comparison_group,promo_code:t.comparison_type,search_query:t.threshold_setter,order_quantity:j(t.threshold_group_count),value:j(t.score)}}async function bp(t,e,r){try{let o=await I("_pin_unauth"),n=await I("_derived_epik"),i={event:Di,ed:e,tid:t,pd:{...o&&{pin_unauth:o},...n&&{derived_epik:n}}};return r&&(i.ad={loc:O(),ref:document.referrer}),i}catch(o){a.error(o);let n={event:Di,ed:e,tid:t};return r&&(n.ad={loc:O(),ref:document.referrer}),n}}async function d_(t,e,r){try{let o=J(e,Zr).tracking_id;if(o){let n="https://ct.pinterest.com",i=_c(t),s=await bp(o,i,!1),c=Ie(s,!1);K(`${n}/user/?${c}`,{method:"GET"},r,()=>a.error(new Error(`${Zr} api call failed`)));let u=await bp(o,i,!0),g=Ie(u,!1);K(`${n}/v3/?${g}`,{method:"GET"},r,()=>a.error(new Error(`${Zr} api call failed`)))}}catch(o){a.error(o)}}async function f_(t,e){try{let r=_c(t);if(J(e,Zr).advancedMatching){let n=await we();b(r,{em:n})}return r}catch(r){return a.error(r),_c(t)}}function p_(t,e,r){if(v())d_(t,e,r);else{let o=E(window,"pintrk");if(typeof o!="function")throw new Error(B);f_(t,e).then(n=>{o("track",Di,n),typeof r=="function"&&r(Zr,Di)}).catch(n=>a.error(n))}}var wc={name:Zr,send:ee(Zr,p_)};var Kr="snapchat",Fi="_scid",Mi="u_sclid",$i="u_scsid",Sc="snaptr",bc={};function Bi(t,{getItem:e,setItem:r},o,n=Zo){return!e||!r?(a.error(new Error("Storage object is not valid")),Promise.resolve()):Promise.resolve(e(t)).then(i=>{let s=i;s||(s=n(),r(t,s)),o(s)}).catch(i=>{a.error(i)})}function Ec(t){return bc[t]}function Ui(t,e){return bc[t]=e,bc[t]}function l_(t){return J(t,Kr)?.pixel_id}function Sp(t,e){let r=l_(e),o=Yt("navigation")[0],n=Yt(Sc)[0];return{pid:r,ev:t.score,pl:O(),rf:Oe(),ts:Date.now(),trackId:Zo(),u_c1:Ec(Fi),u_sclid:Ec(Mi),u_scsid:Ec($i),m_dcl:o?.domContentLoadedEventEnd,m_pi:o?.domInteractive,m_pl:o?.loadEventEnd,m_pv:o?"v2":"v1",m_rd:Math.floor(Cn()),m_sl:n?.startTime,v:"2.0.0",bt:"1d53c387",if:!1}}function Ao(t){if(typeof Promise.allSettled=="function")return Promise.allSettled(t);let e=t.map(r=>Promise.resolve(r).then(o=>({status:"fulfilled",value:o}),o=>({status:"rejected",reason:o})));return Promise.all(e)}var m_="https://tr.snapchat.com/p";function Pp(t,e){return v()?Ao([Bi(Fi,{getItem:globalThis.browser?.cookie?.get,setItem:globalThis.browser?.cookie?.set},r=>{Ui(Fi,r)}),Bi(Mi,{getItem:ye,setItem:Ue},r=>{Ui(Mi,r)}),Bi($i,{getItem:z,setItem:me},r=>{Ui($i,r)})]).finally(e):e()}function g_(t,e,r){let o=Sp(t,e);K(`${m_}`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Ie(o)},()=>{typeof r=="function"&&r(Kr,`${d},${t.score}`)},()=>{a.error(`Unable to send scores to ${Kr}.`)})}function h_(t,e,r){let o=E(window,Sc);if(typeof o=="function"){if(o("track",t.score),typeof r=="function"){let n=`${d}`,i=U([n,t.score]);r(Kr,i)}}else throw new Error(B)}function y_(t,e,r){return v()?g_(t,e,r):h_(t,e,r)}var yn={name:Kr,identify:Pp,setup:Pp,send:ee(Kr,y_)};var Pc="taboola";function v_(t,e,r){if(!t)return;window._tfa===void 0&&(window._tfa=[],a.error(new T(`${Pc} globals not found`),{appName:e}));let o=`${d}`,n=t.integration_product,i=U([o,n,t.threshold_group_count,j(t.score)],"_");window._tfa.push({notify:"event",name:i}),typeof r=="function"&&r(Pc,i)}var xc={name:Pc,send:v_};function __(){return"product"}async function Tc(){try{let t={},e=await we();return e&&(e=e.toLowerCase()),t.email=e,t}catch(t){return a.error(t),{}}}function Vi(t,e){let r=U([`${d}_${t}`,e]),o=__();return{content_id:r,content_type:o}}async function xp(t){try{let e={context:{page:{referrer:document.referrer,url:O()},pixel:{code:t},userAgent:Ee()}},r={},o=await I("_ttp");o&&(r.anonymous_id=o);let n=await Tc(),i=await ii(n),s={...r,...i};return e.context.user=s,e}catch(e){a.error(e);return}}function Ac(t,e,r,o){return xp(t).then(n=>(n.event=e,n.properties=Vi(o,r),n))}function Tp(t){return xp(t).then(e=>(e.event="EnrichAM",e))}var vn="tiktok",w_="https://analytics.tiktok.com/api/v2/pixel";function E_(t){let e=window.ttq;return e&&e.instances()&&Array.isArray(e.instances())?!!e.instances().find(r=>t===r.pixelCode&&r.loaded):!1}function Ic(){return $("tiktokAccounts")||[]}function b_(t,e){v()||Ic().forEach(o=>{let n=o.pixelId;n&&!E_(n)&&function(i,s,c){i.TiktokAnalyticsObject=c;var u=i[c]=i[c]||[];u.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],u.setAndDefer=function(h,S){h[S]=function(){h.push([S].concat(Array.prototype.slice.call(arguments,0)))}};for(var g=0;g<u.methods.length;g++)u.setAndDefer(u,u.methods[g]);u.instance=function(h){for(var S=u._i[h]||[],W=0;W<u.methods.length;W++)u.setAndDefer(S,u.methods[W]);return S},u.load=function(h,S){var W="https://analytics.tiktok.com/i18n/pixel/events.js";u._i=u._i||{},u._i[h]=[],u._i[h]._u=W,u._t=u._t||{},u._t[h]=+new Date,u._o=u._o||{},u._o[h]=S||{},S=document.createElement("script"),S.type="text/javascript",S.async=!0,S.src=W+"?sdkid="+h+"&lib="+c,h=document.getElementsByTagName("script")[0],h.parentNode.insertBefore(S,h)},u.load(n),u.page()}(window,document,"ttq")}),e()}function kc(){a.error(new Error(`${vn} api call failed`))}async function Ap(t,e){try{let r=await we(),o=await Or();if(r||o){let n=t.pixelId,i=E(window,"ttq.instance");typeof i=="function"&&typeof i(n).identify=="function"&&(i(n).identify({email:r,phone_number:o}),e&&typeof e=="function"&&e())}}catch(r){a.error(r)}}function Oc(t,e,r){K(w_,{body:JSON.stringify(t),method:"POST"},e,r)}async function Ip(t,e){try{let r=t.pixelId;if(r&&(await Tc()).email){let n=await Tp(r);Oc(n,e,kc)}}catch(r){a.error(r)}}function S_(t,e){let r=v();function o(i,s){return()=>{let u=(ot(`${t}.integrations`)||[]).find(g=>vn===g.platform);u&&u.scores&&u.scores.forEach(({score:g,integration_product:h})=>{r?Ac(s,g,h,t).then(S=>{Oc(S,e,kc)}):i(s).track(g,Vi(t,h))}),r||e&&typeof e=="function"&&e()}}Ic().forEach(i=>{let s=i.pixelId,c=E(window,"ttq.instance"),u=o(c,s);r?Ip(i,u):Ap(i,u)})}function kp(t,e){return function(){if(typeof t=="function"){let o=`${d}`,n=U([o,e.score]);t(vn,n)}}}function P_(t,e,r,o){let n=t.pixelId,i=E(window,"ttq.instance");if(n&&typeof i=="function")Ap(t),e.score&&i(n).track(e.score,Vi(r,e.integration_product)),kp(o,e)();else throw new Error(B)}function x_(t,e,r,o){let n=t.pixelId;if(n)Ip(t).then(()=>{let i=e.score,s=e.integration_product;i&&(o=typeof o=="function"?kp(o,e):void 0,Ac(n,i,s,r).then(c=>{Oc(c,o,kc)}))});else throw new Error(B)}function T_(t,e,r){Ic().forEach(n=>{v()?x_(n,t,e,r):P_(n,t,e,r)})}var _n={name:vn,identify:S_,setup:b_,send:ee(vn,T_)};function Cc({src:t,alt:e}){let r=document.createElement("img");return r.width=1,r.height=1,r.alt=e||"",r.src=t,r}var Wi="tradedesk";function A_(t,e,r){let n=J(e,Wi).pixel_id,i=j(t.score)-1,s=t.comparison_type,c=t.conversion_product,u=t.threshold_group_count;n&&!v()&&oe(()=>{if(Cc({src:`https://insight.adsrvr.org/track/pxl/?${n}&fmt=3&td1=blackcrow&td2=comparison_type|${s}&td3=comparison_product|${c}&td4=threshold_group_count|${u}&td5=score|${i}`}),typeof r=="function"){let g=`${d}`,h=U([g,t.score]);r(Wi,h)}else throw new Error(B)})}var Nc={name:Wi,send:ee(Wi,A_)};var gr="target";var qi={[ic.name]:ic,[nr.name]:nr,[cc.name]:cc,[uc.name]:uc,[fc.name]:fc,[lc.name]:lc,[mc.name]:mc,[hc.name]:hc,[vc.name]:vc,[wc.name]:wc,[yn.name]:yn,[xc.name]:xc,[_n.name]:_n,[Nc.name]:Nc};function I_(t,e,r="score_push"){$t(gr,t,r),pe(`${gr} ${r}: ${t}`,e)}function k_(t,e){e&&P(e,r=>{r.name&&qi[t].send(r,gr,I_)})}function O_(){let t=ti(gr),e={};return t.forEach(r=>{let o=qi[r];o!==void 0&&typeof o.setup=="function"?e[r]=new Promise(n=>o.setup(gr,n)).catch(n=>{a.error(n)}):e[r]=Promise.resolve()}),e}function C_(t){let e=ot(`${gr}.integrations`),r=[];return P(e,o=>{let n=o.platform,i=o.scores,s=qi[n];t[n]&&r.push(t[n].then(()=>{s!==void 0&&typeof s.send=="function"&&k_(n,i)}))}),Promise.all(r)}var Op={appName:gr,init:O_,platforms:qi,sendAppScores:C_};var hr="identity";var N_=ie({name:"identity_kpi_sampling",allocations:[{percent:.1,value:!0}]});function Cp(t,e,r){N_&&he(`${t} platform request for ${e}`,{"platform.name":e,"event.name":r,appName:t})}function Rc(){return{fb:window?.trekkie?.config?.S2S?.facebookCapiEnabled}}var Io=/.*\/cart\/{1,2}add(\.js|\.json)?(\?.*)?$/gm;function R_(t,e){return new Promise((r,o)=>{K(t,e,r,o)}).catch(r=>a.error(r))}var Np=/.*(\/cart(\.json|\.js)|\/cart\/(change|update)(\.js|\.json)?)(\?.*)?$/gm,ji="_bcai_cs",Rp=!1;function Gi(t){try{Ue(ji,t)}catch(e){a.error(e)}}async function Fp(){try{return await ye(ji)}catch(t){a.error(t);return}}function L_(){return window?.Shopify?.routes?.root?R_(`${window.Shopify.routes.root}cart.js`):Promise.resolve()}function Lp(t){try{return JSON.parse(t)}catch(e){return a.error(new Ht(e?.message)),null}}async function Dp(t){try{let e=[t];t.items?.length&&(e=t.items);let r=e.reduce((s,c)=>{let u={...s};return c?.id!==void 0&&(u[c.id]=c),u},{}),o=await Fp();if(!o||!t||Object.keys(r).length===0)return;let n=(o.items??[]).map(s=>{let c={...s},u=r[c?.id];return c.quantityAdded=0,u&&(c.quantityAdded=u.quantity-c.quantity,c.quantity=u.quantity,delete r[c.id]),c});Object.keys(r).forEach(s=>{let c=r[s];n.push({...c,quantityAdded:c.quantity})});let i={...o,item_count:n.reduce((s,c)=>s+(c.quantity??0),0),total_price:(o.total_price??0)+n.reduce((s,c)=>s+c.quantityAdded*(c.price??0),0)};i.items=n.map(s=>(delete s.quantityAdded,s)),Gi(i)}catch(e){a.error(e)}}function D_(){v()||Rp||(Rp=!0,dn(Np,t=>{try{t=Lp(t),t&&Gi(t)}catch(e){a.error(e)}}),sn(Np,t=>{t.json().then(e=>Gi(e),e=>{a.error(new Ht(e?.message))}).catch(e=>a.error(e))}),dn(Io,t=>{try{return t=Lp(t),t?Dp(t):void 0}catch(e){a.error(e);return}}),sn(Io,t=>t.json().then(Dp).catch(e=>a.error(e))))}function F_(){return v()?Promise.resolve():Fp().then(t=>t||L_().then(e=>(e&&Gi(e),e)))}var wn={setup:D_,getData:F_};async function ko(t,e,r,o){try{let n=await re(e),i={site_name:f,metadata:Qn(),device_info:Ee(),page_url:O(),page_referrer_url:Oe(),page_title:to(),platform_name:t,platform_event_name:r,ids:n,user_data:{fbc:await I(Xt),fbp:await I(_t),bcvid:(await tt())?.id,sh:{ct:await I("cart")||(await ye(ji))?.token,ch:Nd()}},resolved_score:await z(Uo),capi:Rc()},s={fb_test_event_code:await I("fb_test_event_code")};Vd(b(i,o,s)),Cp(hr,t,r)}catch(n){a.error(n)}}var Mp="klaviyo",Hi;function M_(t){return t==="track"}function $_(t){return t.overrideSampling=!0,t.message=`identity: ${t.message}`,t}function B_(t){return e=>{e.message===`identity: ${B}`?a.error(new T(t)):a.error(e)}}function Lc(t,e){M_(e[0])&&ko(Mp,t,e[1],{data:e[2]})}function U_(t){Array.isArray(window._learnq)&&window._learnq.forEach(e=>{Lc(t,e)})}function V_(t){if(typeof window._learnq.push=="function"){let e=window._learnq.push;window._learnq.push=function(...r){let o=e.apply(this,r);try{let n=r[0];return Lc(t,n),o}catch(n){return a.error(n),o}}}}function W_(t){function e(){let r=Hi.apply(this,arguments);try{let o=arguments?Array.prototype.slice.call(arguments[0]):[];return Lc(t,o),r}catch(o){return a.error(o),r}}window._learnq.push&&typeof Hi!="function"&&(Hi||(Hi=window._learnq.push),window._learnq.push=e)}function q_(t,e){window._learnq=window._learnq||[],!v()&&(window._learnq?._loaded||(U_(e),V_(e)),D(()=>{if(window._learnq?._loaded){W_(e);return}throw $_(new Error(B))},B_("Klaviyo platform load not detected."),500,10))}var Dc={name:Mp,setup:q_};var $p="google_ads";async function G_(t,e){try{await Ci(t,$p,e,!1)}catch(r){a.error(r)}}var Fc={name:$p,setup:G_};var Bp="google_analytics";async function j_(t,e){try{await Ci(t,Bp,e,!0)}catch(r){a.error(r)}}var Mc={name:Bp,setup:j_};var bn="facebook_ads";function H_(t){return t==="track"}function Up(t,e,r,o,n){H_(e)&&ko(bn,t,r,{data:o,platform_event_id:n?.eventID})}var En=[];function z_(t=[]){En=En.concat(t.filter(e=>!En.includes(e)))}function J_(){return En}function Z_(){En=[]}function K_(t,e){if(!window.fbq?.alreadyIntercepted)if(typeof window.fbq?.getState=="function"){let r=window.fbq;window.fbq=(...o)=>{Up(e,...o),r(...o)},Object.keys(r).forEach(o=>{Object.defineProperty(window.fbq,o,{set:n=>{r[o]=n},get:()=>r[o]})}),window.fbq.alreadyIntercepted=!0,J_()?.forEach(([...o])=>{Up(e,...o)}),Z_()}else throw new Error(`${bn} pixel not yet loaded for ${t}.`)}async function Y_(t,e){try{let r=[];if(e?.length){let o=await Yo(t);e.forEach(n=>{let i=n?.loadPixel===!0,s=n?.pixelId,c=r.includes(s);i&&s&&!c&&o&&(r.push(s),ci(s,o))})}}catch(r){a.error(r)}}async function X_(t,e){try{if(v())return;let r=Ir(t).platforms?.filter(o=>o.platform?.toLowerCase()===bn);await Y_(e,r),await new Promise((o,n)=>{D(()=>{z_(window.fbq?.queue),K_(t,e),o()},()=>{a.error(new T(`${bn} pixel not present for ${t}.`)),n()},300)})}catch(r){a.error(r)}}var $c={name:bn,setup:X_};function Q_(){return new Promise((t,e)=>D(()=>{if(window.Shopify.checkout)return t(window.Shopify.checkout);throw new T("Shopify checkout object missing")},r=>{a.error(r),e(r)},100))}function ew(){if(!window.Shopify)throw new T("Shopify global missing")}function tw(t){D(()=>{ew(),t()},r=>a.error(r),300,300)}var Yr={setup:tw,getShopifyCheckout:Q_};var Bc="AddPaymentInfo";function rw(t,e){return t.target.matches(`${["#continue_button",...e].filter(r=>!!r).join(",")}`)}function Vp(){return Me()?.replace(/\/$/,"").split("/").pop()}function ow(t,e){Wa()&&t(Bc,{data:zn(),platform_event_id:Vp()}),Yr.setup(()=>{Hn()==="payment"&&_.addListener(document,"click",r=>{rw(r,e?.additionalSelectors??[])&&wn.getData().then(o=>{o=o||{};let n=JSON.parse(JSON.stringify(o)),i=jn();i&&(n.total_price=i),t(Bc,{data:o,platform_event_id:Vp()})})},!0)})}var Wp={eventName:Bc,setup:ow};async function nw(){let t=od();if(!t)throw new Error("Cart URL not available");let e=await fetch(t);if(!e.ok)throw new Error(`Failed to fetch cart: ${e.statusText}`);return await e.json()}var Uc=class extends Error{constructor(){super("Root route or cart route not available"),this.status="warn"}},Sn=class{static async fromAPI(){try{await bt(()=>{if(!qo()&&!Ua())throw new Uc})}catch{}try{let e=await bt(nw,2);return new Sn(e)}catch(e){throw e.status="warn",e}}constructor(e){this.cart=e}getEventDataForItem(e){let r=this.cart?.items?.find(o=>o?.id===e);return r&&(r={...r},delete r.sections,r.currency=oo(),r.total_item_count=this.cart?.item_count,r.total_price=this.cart?.total_price),r}},zi=Sn;var Oo="AddToCart";function iw(t){return typeof t=="number"&&t>=0}var Vc=class{constructor(e){this.sendEvent=e}async sendAddToCartEvents(e){try{let r=e?.items||[e];r=r.filter(n=>n?.id&&iw(n?.quantity)?!0:(a.error(new Ht(`SHOPIFY ${Oo} addToCart request did not return valid item: ${JSON.stringify(n)}`)),!1));let o=await zi.fromAPI();r.forEach(n=>{let i=o.getEventDataForItem(n.id);if(!i){a.error(new Ht("SHOPIFY updated cart did not contain the item that was added to the cart"));return}this.sendEvent(Oo,{data:i})})}catch(r){a.error(r)}}interceptXhr(){dn(Io,e=>{let r=JSON.parse(e);this.sendAddToCartEvents(r)})}interceptFetch(){sn(Io,e=>{e.json().then(r=>{this.sendAddToCartEvents(r)})})}},qp=Vc;var Wc=class{constructor(e){this.sendEvent=e}async logATCOnCartPage(){if(td())try{let e=await zi.fromAPI();if(!e?.cart?.items?.length)return;let r=e.cart.items[0],o=e.getEventDataForItem(r.id);this.sendEvent(Oo,{data:o})}catch(e){a.error(e)}}},Gp=Wc;var aw={eventName:Oo,setup(t,e={}){v()||(this._interceptor||(this._interceptor=new qp(t),this._interceptor.interceptXhr(),this._interceptor.interceptFetch()),e.logATCOnCartPage&&!this.cartPageLogger&&(this.cartPageLogger=new Gp(t),this.cartPageLogger.logATCOnCartPage()))},cleanup(){delete this._interceptor,delete this.cartPageLogger}},jp=aw;var Hp="CompleteRegistration";function sw(t){try{return t.target.matches('form:has(input[type="email"])')}catch(e){if(e?.message.includes("is not a valid selector"))return new RegExp(/<input.*type="email".*>/).test(t.target.innerHTML)}return!1}function cw(t){v()||_.addListener(document,"submit",e=>{sw(e)&&t(Hp)},!0)}var zp={eventName:Hp,setup:cw};var uw=["button#checkout[type=submit]","button#checkout[type=submit] *","button[name=checkout]","button[name=checkout] *","input[id*=checkout][type=submit]","input[id*=checkout][type=submit] *",'[href*="/checkout"]','[href*="/checkout"] *',"button.rebuy-cart__checkout-button","button.rebuy-cart__checkout-button *","i.rebuy-button-icon","i.rebuy-button-icon *",'form[action="/cart"] [name="checkout"]','form[action="/cart"] [name="checkout"] *','form[action="/cart"] button[type="submit"]','form[action="/cart"] button[type="submit"] *','form[action="/checkout"] button','form[action="/checkout"] button *',"button.rebuy-cart__flyout-checkout-button","button.rebuy-cart__flyout-checkout-button *",".cart-drawer__action button",".cart-drawer__action button *",'button[class*="checkout"]','button[class*="checkout"] *','button[id*="checkout"]','button[id*="checkout"] *','a[class*="checkout"]','a[class*="checkout"] *','a[id*="checkout"]','a[id*="checkout"] *','a[name="checkout"]','a[name="checkout"] *',".checkout-btn",".checkout-btn *","button#simpl_buynow-button","button#simpl_buynow-button *",".c-button.rebuy-button",".c-button.rebuy-button *"],dw=["#dynamic-checkout-cart button","#dynamic-checkout-cart button *","#dynamic-checkout-cart [role=button]","#dynamic-checkout-cart [role=button] *",".additional-checkout-buttons button",".additional-checkout-buttons button *",".additional-checkout-buttons [role=button]",".additional-checkout-buttons [role=button] *"];function fw(t,e){return t.target.matches(`${[...uw,...dw,...e].filter(r=>!!r).join(",")}`)}function pw(t,e,r){if(fw(t,e?.additionalSelectors??[])&&t.isTrusted){let o=t.target.parentNode?.form;(!o||o.checkValidity())&&r()}}function lw(t,e){return new Promise(r=>{oe(()=>{["click",...e?.additionalListeners?.length?e.additionalListeners:[]].forEach(o=>_.addListener(document,o,n=>pw(n,e,t),!0)),r()})}).catch(r=>a.error(r))}var Jp={setup:lw};function qc(t){let e=new Error(t);return e.name="BadRenderError",e.status="warn",e.stack=ue(e.stack,1),e}var mw=new Promise(t=>{oe(t)}),gw="div.paypal-checkout-sandbox";function hw(t){return new MutationObserver(e=>{e.forEach(r=>{r.addedNodes.forEach(o=>{o instanceof Element&&o.matches(gw)&&t()})})})}async function yw(t){try{if(v())return;await mw;let e=hw(t);D(()=>{if(!(document.body instanceof Node))throw new Error;e.observe(document.body,{childList:!0})},()=>{a.error(new qc(`document.body did not render in time and had value: ${document.body}`))})}catch(e){a.error(e)}}var Zp={setup:yw};async function vw(t){try{let e=t.filter(o=>o.status==="fulfilled").map(o=>o.value.json());return(await Ao(e)).filter(o=>o.status==="fulfilled"&&o.value.product).map(o=>o.value)}catch(e){let r=new Error(`Error occurred while parsing json from promise results. Error: ${e.message}`);return r.status="warn",a.error(r),Promise.resolve([])}}async function _w({items:t}){try{let e=t.filter(o=>o.url).map(o=>{let n=new URL(`https://${Mo()}${o.url}`);return n.pathname+=".json",hi(n.href)}),r=await Ao(e);return await vw(r)}catch(e){let r=new Error(`Error occurred while fetching product info with tags. Error: ${e.message}`);return r.status="warn",a.error(r),Promise.resolve([])}}function ww(t,e){let r={...t},{items:o}=r;return e.forEach(n=>{let i=o.find(s=>s.product_id&&n.product?.id&&s.product_id===n.product.id);i&&n.product.tags&&(i.tags=n.product.tags)}),r}async function Kp(t){try{if(t?.items?.length>0){let e=await _w(t);return ww(t,e)}}catch(e){let r=new Error(`Error occurred while including product tags. Sending event without tags. Error: ${e.message}`);r.status="warn",a.error(r)}return t}var Yp="InitiateCheckout";function Ew(t,e){if(rd())return Promise.resolve();wn.setup();let r=async()=>{try{let o=await wn.getData(),n=o;e?.loadProductTags===!0&&(n=await Kp(o)),t(Yp,{data:n})}catch(o){a.error(o)}};return Promise.all([Jp.setup(r,e),Zp.setup(r)])}var Xp={eventName:Yp,setup:Ew};var Qp="PageView";function bw(t){(!v()||nd())&&t(Qp)}var el={eventName:Qp,setup:bw};var rl="Purchase";function tl(t){return["order_id","line_items","total_price_set.shop_money.currency_code","total_price_set.shop_money.amount"].every(e=>E(t,e)!==void 0)}function Sw(t){if(window.cart_json){let{line_items:e,currency:r,total_price:o}=window.cart_json;return b({},t,{line_items:e,total_price_set:{shop_money:{currency_code:r,amount:o}}})}return t}function Pw(t){function e(r){t(rl,{data:{...r},platform_event_id:r.order_id||r?.order?.id})}Va()?e(zn()):q("platform",y.VIEW_RESPONSE,()=>{Yr.setup(()=>{$("page.log_purchase")&&Yr.getShopifyCheckout().then(r=>{if(tl(r))return e(r);let o=Sw(r);if(tl(o))return e(o);throw new T("Shopify checkout required fields are missing")}).catch(r=>a.error(r))})})}var ol={eventName:rl,setup:Pw};function nl(t,e){return b({},{content_ids:e?.map(r=>r?.product_id).filter(r=>r),currency:t?.currency,content_type:"product_group",num_items:e?.reduce((r,o)=>r+(o?.quantity?o.quantity:0),0)})}function il(t){let e=t?.lineItems||[];return{content_ids:e?.map(r=>r?.variant?.product?.id).filter(r=>r),content_type:"product_group",num_items:e?.reduce((r,o)=>r+(o?.quantity?o.quantity:0),0),order_id:t?.order?.id,currency:t?.totalPrice?.currencyCode,value:t?.totalPrice?.amount,contents:e?.map(r=>({id:r?.variant?.product?.id,quantity:r?.quantity,item_price:r?.variant?.price?.amount,title:r?.title}))}}function xw(t){if(v())return il(t);let e=t?.line_items??[];return b(nl(t,e),{order_id:t?.order_id,currency:t?.total_price_set?.shop_money?.currency_code,value:t?.total_price_set?.shop_money?.amount,contents:e?.map(r=>({id:r?.product_id,quantity:r?.quantity,item_price:r?.price,title:r?.title}))})}function al(t){function e(o){return b({},{id:o?.product_id,quantity:o.quantity,item_price:rr(o.price),title:o.product_title,description:o.product_description,category:o.product_type})}let r=t?.items??[];return b(nl(t,r),{value:jn()||rr(t?.total_price),contents:r?.map(o=>e(o))})}function Tw(t){let e={};return t?.items?.length?e=JSON.parse(JSON.stringify(t?.items[0])):t&&(e=JSON.parse(JSON.stringify(t))),{content_category:e.product_type,content_ids:e.product_id?[e.product_id]:[],content_name:e.title,content_type:"product_group",currency:e.currency||oo(),num_items:e.quantity||1,value:e.price?rr(e.price):void 0}}function Aw(t){return{search_string:t?.search_string}}function Iw(t){let e=v()?{...il(t)}:{...al(t)};return delete e?.num_items,e}function kw(t){return b({},{content_category:t?.type,content_ids:t?.id&&[t?.id],content_name:t?.title,content_type:"product_group",currency:t?.currency,value:rr(t?.price)})}var Ow={addtocart:{eventName:"AddToCart",convert:Tw},purchase:{eventName:"Purchase",convert:xw,isValid:t=>t?.total_price_set?.shop_money?.currency_code&&t?.total_price_set?.shop_money?.amount||t?.totalPrice?.currencyCode&&t?.totalPrice?.amount},addpaymentinfo:{eventName:"AddPaymentInfo",convert:Iw},viewedproduct:{eventName:"ViewContent",convert:kw},pageview:{eventName:"PageView"},initiatecheckout:{eventName:"InitiateCheckout",convert:al},search:{eventName:"Search",convert:Aw},completeregistration:{eventName:"CompleteRegistration"}};function sl(t,{data:e}={}){let r=Ow[t?.toLowerCase()];if(!r||r.isValid&&!r.isValid(e))return;let o=r.convert&&r.convert(e);return{eventName:r.eventName,data:o}}function Gc(t,e){return t.filter(r=>r.eventSource==="shopify"&&r.originalEventName===e)}var Hc="facebook_ads",cl=[],Pn,xn,jc;function Cw(t,e,r){if(jc=r.includes("facebook_ads"),v()){Pn=!1;return}async function o(){try{let n=en(e,Hc);xn=await Yo(t),n.forEach(i=>{let s=i?.loadPixel===!0,c=i?.pixelId,u=cl.includes(c);s&&c&&!u&&xn&&(cl.push(c),ci(c,xn))})}catch(n){a.error(n)}}jc?D(()=>{let n=window?.trekkie?.config?.S2S?.facebookCapiEnabled;if(typeof n=="boolean")n?Pn=!1:(Pn=!0,o());else throw new Error("Trekkie facebookCapiEnabled not loaded.")},()=>a.error(new T("Trekkie not loaded")),100):(Pn=!0,o())}async function Nw(t){try{if(v()){if(xn=await Yo(t),!jc)return!0;let e=await z(Un);if(typeof e=="boolean"&&!e)return!0}}catch(e){a.error(e)}return!1}async function Rw(t,e,r,o="identity"){let n=await Nw(r);if(Pn||n){let i=sl(t,e),s=xn?.external_id;en(o,Hc).forEach(c=>{let u=Gc(c?.eventTrackers||[],t);function g(h,S){return h&&S&&i&&c.pixelId}u.forEach(h=>{let S=h?.overrideEventName||h?.originalEventName;g(h,S)&&(v()?ai(c.pixelId,e?.platform_event_id,s,S,i?.data):D(()=>{if(typeof window.fbq=="function")window.fbq("trackSingle",c.pixelId,S,i?.data,{eventID:e?.platform_event_id});else throw new Error("FBQ not loaded")},()=>a.error(new T("FBQ not loaded")),100))})})}}var zc={name:Hc,setup:Cw,sendEvent:Rw};var ul={[zc.name]:zc},dl,fl,Ji,Jc;function Lw(t,e,r,{browserEventPlatforms:o,validatePlatforms:n}={}){dl=t,fl=e,Ji=r,Jc=o??[],n=n??[],Jc.forEach(i=>{ul[i]?.setup(Ji,e,n)})}function Dw(t,e={},{browserEventPlatforms:r}={}){let o=r??Jc;e.platform_event_id||(e.platform_event_id=Zo()),ko(dl,Ji,t,e),o.forEach(n=>{ul[n]?.sendEvent(t,e,Ji,fl)})}var ct={setup:Lw,sendEvent:Dw};function pl(){let t=be(window.location.search).variant,e=t?t.split("?")[0]:null;if(e)return parseInt(e,10);let r=[...document.querySelectorAll('input[name="id"]')];if(r.length===1)return parseInt(r,10);let o=window.ShopifyAnalytics?.meta;if(o?.product?.id){let n=[...document.querySelectorAll(`input[name="id"][data-productid="${o?.product?.id}"]`)];if(n.length===1&&n[0]?.value)return parseInt(n[0].value,10)}if(o?.product?.variants&&o?.selectedVariantId){let n=parseInt(o?.selectedVariantId,10),i=o?.product?.variants.filter(c=>c.id===n);if(window.ReCharge&&window.ga&&document.querySelector('[name="properties[shipping_interval_frequency]"]')?.value){let c=window.ReCharge.products.filter(u=>typeof u.variant_to_duplicate[`${n}`]=="string");if(c.length===1)return c[0].variant_to_duplicate[`${n}`]}if(i.length)return n}return null}var ll="ViewedProduct";function ml(t,e){let r=JSON.parse(JSON.stringify(t));if(r.variants&&r.variants.length){let n=r?.variant_id??pl()??r.variants[0].id,i=r.variants.find(s=>s.id===n)??r.variants[0];i.name&&(r.title=i.name),r.variants=[i]}r.featured_image?.startsWith("//")&&(r.featured_image=`https:${r.featured_image}`),delete r.description,delete r.media;let o=oo();o&&(r.currency=o),e(ll,{data:r})}function Fw(t){Yr.setup(()=>{if(Ma()){let e=`${Me()}.js${window.location.search}`;Ge(e,{},r=>ml(r,t))}})}var gl={eventName:ll,setup:Fw,sendProductDataToPlatform:ml};async function Mw(t,e){try{if(await z(Ea))return;(e?.validatePlatforms||[]).includes("facebook_ads")&&D(()=>{let n=window?.trekkie?.config?.S2S?.facebookCapiEnabled;if(typeof n=="boolean")t(n?"FB_CAPI_ENABLED":"FB_CAPI_DISABLED"),me(Ea,!0),me(Un,n);else throw new Error("Trekkie facebookCapiEnabled not loaded.")},()=>a.error(new T("Trekkie not loaded")),100)}catch(r){a.error(r)}}var hl={setup:Mw};var yl="Search";function $w(t){if(ed()){let e=O(),r={search_string:be(e)?.q};t(yl,{data:r})}}var vl={eventName:yl,setup:$w};var _l="ActiveOnSite";async function Bw(t){try{if(await z(ba))return;t(_l),me(ba,!0)}catch(e){a.error(e)}}var wl={eventName:_l,setup:Bw};var Zc="shopify";function Uw(t){let e=Ir(t),[r]=e?.platforms?.filter(o=>o?.platform===Zc.toUpperCase());return r}function Vw(t,e){let r=Uw(t),o=r?.eventTriggerSettings;ct.setup(Zc,t,e,r),hl.setup(ct.sendEvent,r),Wp.setup(ct.sendEvent,o?.AddPaymentInfo),zp.setup(ct.sendEvent,o?.CompleteRegistration),jp.setup(ct.sendEvent,o?.AddToCart),Xp.setup(ct.sendEvent,o?.InitiateCheckout),el.setup(ct.sendEvent,o?.PageView),vl.setup(ct.sendEvent,o?.Search),ol.setup(ct.sendEvent,o?.Purchase),gl.setup(ct.sendEvent,o?.ViewedProduct),wl.setup(ct.sendEvent,o?.ActiveOnSite)}var Kc={name:Zc,setup:Vw};var Ww="shopify_webhook";async function qw(t,e){try{if(v())return;let r={method:"POST",body:JSON.stringify({attributes:{_bcai:btoa(JSON.stringify({site_name:f,ids:await re(e),user_data:{fbp:await I(_t),fbc:await I(Xt),bcvid:(await tt())?.id}})),_bcai_aid:await I("_shopify_y")}}),mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}};D(()=>{let o=qo();if(!o)throw Error("Shopify Root Route Not Found");Ge(`${o}cart/update.js`,r)},()=>a.error(new Be("Cart update failed","ShopifyCart",!1,"warn")))}catch(r){a.error(r)}}var Yc={name:Ww,setup:qw};function Gw(){let t="https://api.blackcrow.ai/user/?";return Dt(f)&&(t="https://api.sandbox.blackcrow.ai/user/?"),t}function jw(t={}){return{site_name:f,ids:t}}function Xc(t){Ae(hr,y.IDENTIFY,b({},t),{})}function Hw(t){me(eo,t),Xc(t)}function Ve(t=[]){let e=jw(t),o={servlet:"user",method:"POST",cache:"no-cache",body:JSON.stringify(e)};Ge(Gw(),o,Hw,n=>{a.error(n)})}function zw(t){async function e(r){try{let o=await re(t),n=rt("e",xr(r));o.length&&n.length&&Ve(o.concat(n))}catch(o){a.error(o)}}bd(e)}var Qc={name:"email",setup:zw};function Jw(t){async function e(r){try{let o=await re(t),n=rt("p",kr(r));o.length&&n.length&&Ve(o.concat(n))}catch(o){a.error(o)}}pf(e)}var eu={name:"phone",setup:Jw};async function Tn(t,e){try{return await z(t)===e?!0:(me(t,e),!1)}catch(r){return a.error(r),!1}}var Zw="_kx";async function Kw(t){try{let o=function(s){let c=rt("klx",s);r.length&&c.length&&Ve(r.concat(c))};var e=o;let r=await re(t),n=await no();o(le(Zw)),await Tn("_bcai_s_keid",n)||o(n)}catch(r){a.error(r)}}var tu={name:"klaviyo",setup:Kw};async function Yw(t){try{let i=function(){let S=le($u);return S?.trim().length>0?`fb.1.${Date.now()}.${S}`:n},c=function(S){let W=Object.entries(S).reduce((ge,[Zt,Kt])=>ge.concat(rt(Zt,Kt)),[]);s.length&&W.length&&Ve(s.concat(W))};var e=i,r=c;let o=await I(_t),n=await I(Xt),s=await re(t),u=i(),[g,h]=[await Tn("_bcai_s_fbc",u),await Tn("_bcai_s_fbp",o)];c({...!g&&{fbc:u},...!h&&{fbp:o}})}catch(o){a.error(o)}}var ru={name:"facebook_ads",setup:Yw};async function Xw(t){try{let e=await re(t),r=yf();r&&e.length&&r.forEach(o=>{let n=[];n=n.concat(rt("fn",ni(o.fn))),n=n.concat(rt("ln",ni(o.ln))),n=n.concat(rt("fln",ni(o.fln))),n.length&&Ve(e.concat(n))},[])}catch(e){a.error(e)}}var ou={name:"name",setup:Xw};async function Qw(t){try{let e=await Le(()=>[...document.querySelectorAll("iframe[srcdoc]")].find(u=>u.srcdoc?.includes("sendlane.com")),12e4);if(!e)return;let o=(await new Promise(c=>e.contentDocument?.addEventListener("submit",c,{once:!0,capture:!0}))).target;if(!o||o.constructor.name!=="HTMLFormElement")throw new Error("Sendlane form is not an HTMLFormElement");let n=await re(t),i=o.querySelector('input[type="email"]');i&&(n=n.concat([{name:"e",value:xr(i.value)}]));let s=o.querySelector('input[type="tel"]');s&&(n=n.concat([{name:"p",value:kr(s.value)}])),Ve(n)}catch(e){a.error(e)}}var nu={name:"sendlane",setup:Qw};async function El(t=[]){try{let e=await z(eo);if(e)Xc(e);else{let r=await re(t);r.length&&Ve(r)}}catch(e){a.error(e)}}var eE={[Dc.name]:Dc,[$c.name]:$c,[Kc.name]:Kc,[Yc.name]:Yc,[Fc.name]:Fc,[Mc.name]:Mc},tE={[Qc.name]:Qc,[eu.name]:eu,[tu.name]:tu,[ru.name]:ru,[ou.name]:ou,[nu.name]:nu};function rE(t,e){e.forEach(r=>{let o=tE[r];o&&typeof o.setup=="function"&&o.setup(t)})}function iu(t,e){t.length!==0&&e&&e.forEach(r=>{let o=eE[r];o&&typeof o.setup=="function"&&o.setup(hr,t)})}function oE(t){return t.filter(e=>e.source==="cookie"&&e.cookieLoadUrl)}async function nE(t){try{for(let e=0;e<t.length;e+=1)await I(t[e].value)||await an(Ge,t[e].cookieLoadUrl,{mode:"no-cors",credentials:"include"})}catch(e){a.error(e)}}async function iE(){try{let s=function(c){q("platform",y.VIEW_RESPONSE,()=>{let u=_o(e?.scoreName);me(Uo,u),c&&c(o,i)})};var t=s;let e=Ir(hr),r=e.userAttributes||[],o=e.userIdentifiers||[],n=oE(o),i=new Set((e.platforms||[]).map(c=>c?.platform?.toLowerCase()).filter(c=>c));n.length&&await nE(n),oe(()=>{rE(o,r)}),El(o),e?.scoreName?await z(Uo)?(iu(o,i),s()):s(iu):iu(o,i)}catch(e){a.error(e)}}function aE(){return iE(),{}}var bl={appName:hr,init:aE};var sE=C.object({name:C.string().optional(),percent:C.number().min(0).max(1).default(1),enabled:C.boolean().default(!0),platforms:C.object({googleAnalytics:C.object({variantName:C.string().regex(/^\S+-\S+-\S+$/)}).optional()}).optional()}),cE=C.object({experimentBuckets:C.array(sE)}),Co=class{constructor(e){this.config=e}static fromAppSettings(){let e=dt("site_speed")?.appSetting?.siteSpeed||{},r=cE.parse(e);return new Co(r)}get settingsBucket(){let e=this.config.experimentBuckets.map(r=>({name:r.name,percent:r.percent,value:r}));return ie({name:"site_speed_enabled",allocations:e})}get enabled(){return this.settingsBucket.enabled}get googleAnalyticsVariantName(){return this.settingsBucket.platforms?.googleAnalytics?.variantName}get bucketName(){return this.settingsBucket.name}};var Zi="bcai-speed-override";function Sl(){localStorage.setItem(Zi,"force_disabled")}function Pl(){localStorage.setItem(Zi,"force_enabled")}function xl(){localStorage.removeItem(Zi)}function au(){return localStorage.getItem(Zi)}async function su(){try{let t=await navigator?.serviceWorker?.getRegistration();t&&(t.active&&t.active.postMessage({message:"clear cache"}),await t.unregister())}catch(t){a.error(t)}}var yr,In,Cl,Ki;var Nl=-1,uu=function(t){addEventListener("pageshow",function(e){e.persisted&&(Nl=e.timeStamp,t(e))},!0)},Rl=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Ll=function(){var t=Rl();return t&&t.activationStart||0},Yi=function(t,e){var r=Rl(),o="navigate";return Nl>=0?o="back-forward-cache":r&&(document.prerendering||Ll()>0?o="prerender":document.wasDiscarded?o="restore":r.type&&(o=r.type.replace(/_/g,"-"))),{name:t,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:o}},Dl=function(t,e,r){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var o=new PerformanceObserver(function(n){Promise.resolve().then(function(){e(n.getEntries())})});return o.observe(Object.assign({type:t,buffered:!0},r||{})),o}}catch{}},Xi=function(t,e,r,o){var n,i;return function(s){e.value>=0&&(s||o)&&((i=e.value-(n||0))||n===void 0)&&(n=e.value,e.delta=i,e.rating=function(c,u){return c>u[1]?"poor":c>u[0]?"needs-improvement":"good"}(e.value,r),t(e))}},uE=function(t){requestAnimationFrame(function(){return requestAnimationFrame(function(){return t()})})},Fl=function(t){var e=function(r){r.type!=="pagehide"&&document.visibilityState!=="hidden"||t(r)};addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0)},Ml=function(t){var e=!1;return function(r){e||(t(r),e=!0)}},No=-1,Tl=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Qi=function(t){document.visibilityState==="hidden"&&No>-1&&(No=t.type==="visibilitychange"?t.timeStamp:0,dE())},Al=function(){addEventListener("visibilitychange",Qi,!0),addEventListener("prerenderingchange",Qi,!0)},dE=function(){removeEventListener("visibilitychange",Qi,!0),removeEventListener("prerenderingchange",Qi,!0)},$l=function(){return No<0&&(No=Tl(),Al(),uu(function(){setTimeout(function(){No=Tl(),Al()},0)})),{get firstHiddenTime(){return No}}},Bl=function(t){document.prerendering?addEventListener("prerenderingchange",function(){return t()},!0):t()};var An={passive:!0,capture:!0},fE=new Date,Il=function(t,e){yr||(yr=e,In=t,Cl=new Date,Vl(removeEventListener),Ul())},Ul=function(){if(In>=0&&In<Cl-fE){var t={entryType:"first-input",name:yr.type,target:yr.target,cancelable:yr.cancelable,startTime:yr.timeStamp,processingStart:yr.timeStamp+In};Ki.forEach(function(e){e(t)}),Ki=[]}},pE=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;t.type=="pointerdown"?function(r,o){var n=function(){Il(r,o),s()},i=function(){s()},s=function(){removeEventListener("pointerup",n,An),removeEventListener("pointercancel",i,An)};addEventListener("pointerup",n,An),addEventListener("pointercancel",i,An)}(e,t):Il(e,t)}},Vl=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return t(e,pE,An)})},kl=[100,300],Wl=function(t,e){e=e||{},Bl(function(){var r,o=$l(),n=Yi("FID"),i=function(u){u.startTime<o.firstHiddenTime&&(n.value=u.processingStart-u.startTime,n.entries.push(u),r(!0))},s=function(u){u.forEach(i)},c=Dl("first-input",s);r=Xi(t,n,kl,e.reportAllChanges),c&&Fl(Ml(function(){s(c.takeRecords()),c.disconnect()})),c&&uu(function(){var u;n=Yi("FID"),r=Xi(t,n,kl,e.reportAllChanges),Ki=[],In=-1,yr=null,Vl(addEventListener),u=i,Ki.push(u),Ul()})})};var p3=1/0;var Ol=[2500,4e3],cu={},ql=function(t,e){e=e||{},Bl(function(){var r,o=$l(),n=Yi("LCP"),i=function(u){var g=u[u.length-1];g&&g.startTime<o.firstHiddenTime&&(n.value=Math.max(g.startTime-Ll(),0),n.entries=[g],r())},s=Dl("largest-contentful-paint",i);if(s){r=Xi(t,n,Ol,e.reportAllChanges);var c=Ml(function(){cu[n.id]||(i(s.takeRecords()),s.disconnect(),cu[n.id]=!0,r(!0))});["keydown","click"].forEach(function(u){addEventListener(u,function(){return setTimeout(c,0)},!0)}),Fl(c),uu(function(u){n=Yi("LCP"),r=Xi(t,n,Ol,e.reportAllChanges),uE(function(){n.value=performance.now()-u.timeStamp,cu[n.id]=!0,r(!0)})})}})};var lE="site_speed";function mE(){return!!window?.navigator?.serviceWorker}async function gE(){try{let o=function(){let n=au();return n==="force_enabled"?!0:n==="force_disabled"?!1:e.enabled};var t=o;if(v()||!mE())return;let e=Co.fromAppSettings();se(H.SITE_SPEED_BUCKETING,{bucketing:{bucket_name:e.bucketName}});let r=fe("web_vitals_metrics");if(r.get("FID")||(Wl(({name:n,navigationType:i,value:s,delta:c,rating:u})=>{se(H.SITE_SPEED_FID_METRIC,{web_vitals:{name:n,navigation_type:i,value:s,delta:c,rating:u},bucketing:{bucket_name:e.bucketName}})}),r.set("FID",!0)),r.get("LCP")||(ql(({name:n,navigationType:i,value:s,delta:c,rating:u})=>{se(H.SITE_SPEED_LCP_METRIC,{web_vitals:{name:n,navigation_type:i,value:s,delta:c,rating:u},bucketing:{bucket_name:e.bucketName}})}),r.set("LCP",!0)),window.blackcrowSpeed={async forceEnable(){Pl(),location.reload()},async forceDisable(){Sl(),await su(),location.reload()},async reset(){xl(),location.reload()},get appStatus(){let n=e.enabled?"enabled":"disabled";return au()??n}},e.googleAnalyticsVariantName&&Lt("event","experience_impression",{exp_variant_string:e.googleAnalyticsVariantName,event_label:e.googleAnalyticsVariantName}),o()){let n=await navigator.serviceWorker.register("/sw.js",{scope:"/"}),i=n.installing??n.waiting??n.active;if(i){let{id:s}=await tt(),c=ie({name:"error_sampling",allocations:[{percent:.1,value:!0}]});i.postMessage({message:"config",data:{SITE_NAME:f,VISITOR_ID:s,SAMPLE_ERRORS:!!c}})}}else await su()}catch(e){a.error(e)}}var Gl={appName:lE,init:gE};var ea={audience:of,measure:Of,pwo:pp,target:Op,identity:bl,site_speed:Gl};var kn={};function hE(t){let e=dt(t.appName);if(typeof t.init=="function"&&e.active)return t.init();let r=ti(t.appName),o={};return r.forEach(n=>{o[n]=Promise.resolve()}),o}function yE(t,e){let r=dt(t.appName);return typeof t.sendAppScores=="function"&&r.active?t.sendAppScores(e):Promise.resolve()}function jl(){P(ea,(t,e)=>{dt(e).active&&(kn[t.appName]=t)})}function Hl(){let t={};return P(kn,e=>{t[e.appName]=hE(e)}),t}function du(t){if(Dt(f))return Promise.resolve();let e=[];return P(kn,r=>{e.push(yE(r,t[r.appName]))}),Promise.all(e)}function zl(){P(kn,t=>{typeof t.cleanup=="function"&&t.cleanup()}),kn={}}function ta(t){q("platform",y.VIEW_RESPONSE,e=>t(e))}function Jl(t,e){return Wo(t),du(e)}function ra(t,e){Wo(t),Td(t.history_id),qd(),xs(),Md(),du(e),Ae("platform",y.VIEW_RESPONSE,t)}var oa=`${d}_overrides`,Zl=!1,na=null;function vE(){na=null,me(oa,{})}async function Kl(t){try{let e=b({},na||await z(oa),t);na=e,me(oa,e),Zl&&console.log(`Your <${d}> settings will apply on the next page load. Please refresh the page.`)}catch(e){a.error(e)}}function _E(){P(ea,(t,e)=>{q("platform",`force_${e}`,()=>{Kl({apps:{[e]:{active:!0}}})})})}function Yl(){q("platform",y.OVERRIDES,Kl),q("platform",y.CLEAR_OVERRIDES,vE),_E()}async function Xl(){try{return Zl=!0,na||await z(oa)}catch(t){return a.error(t),{}}}function Ql(){return jl(),Hl()}var Xe={platforms:{attentive:{submitEvents:["EMAIL_LEAD"]},bounceExchange:{submitEvents:["input_submission","campaign_submit"]},justUno:{},klaviyo:{submitEvents:["submit"]},sleekNote:{submitEvents:["submit"]},wisePops:{submitEvents:["after-form-submit"]},generic:{}},platformIdentifiers:["kl-","klaviyo","attn","fieldcaptureform","sleeknote","justuno","bx","bounceexchange","wisepops"],platformIdentifierExceptions:["kmail"],metadataViolators:["phone","email","sentIdentifiers"],page_id:"EmailSubmit"};var{platformIdentifiers:wE,platformIdentifierExceptions:EE,metadataViolators:bE}=Xe,tm=(t,{qualified:e,resolveTarget:r})=>t?e(t)?r?t:!0:t.parentElement?tm(t.parentElement,{qualified:e,resolveTarget:r}):!1:!1,SE=t=>t.style.position==="fixed"||t.style.top==="0"||t.style.top==="0px",PE=t=>t.nodeName.toLowerCase()==="iframe",xE={form:{qualified:t=>t.nodeName.toLowerCase()==="form",resolveTarget:!0},footer:{qualified:t=>t.nodeName.toLowerCase()==="footer",resolveTarget:!1},overlay:{qualified:t=>SE(t)||PE(t),resolveTarget:!1}},fu=(t,e)=>tm(t,xE[e]),rm=t=>fu(t,"form"),TE=t=>fu(t,"footer"),AE=t=>fu(t,"overlay"),IE=t=>{if(!t)return"unknown";try{if(AE(t))return"overlay";if(TE(t))return"footer";if(Tr()==="checkout")return"checkout"}catch{a.error(new T("email location failed"))}return"unknown"},om=()=>{let t=Tr()==="checkout",e=document.querySelector('input[type="checkbox"]');return t&&e&&!e.checked},kE=(t,e)=>t.some(r=>typeof r=="string"&&r.toLowerCase().includes(e)),em=(t,e)=>e.some(kE.bind(null,t)),nm=t=>{let e=[...Array.from(t.classList),t.action,t.id];return em(e,wE)&&!em(e,EE)},OE=t=>{window._learnq=window._learnq||[],window._learnq.push(["identify",{$email:t}])},CE=(t,e)=>{let r={...t};return P(Object.keys(r),o=>{P(e,n=>{o.includes(n)&&(r[o]="redacted")})}),r},NE=t=>{a.push({trigger:y.VIEW,data:{page_id:Xe.page_id,custom_dimensions:t}})},We=(t,e)=>{let r=t.email||t.$email,o=es(r);ts(o)&&(Y(o),OE(o),NE({...CE(t,bE),location:IE(e)}),ke.setPIISubmitCookie())};var im=["checkout","account","login"],RE=Tr(),LE=Me(),am=t=>{if(im.includes(RE)||im.some(r=>LE.includes(r))||om())return;let e=t.value;e&&We({email:e},document.activeElement)},DE=()=>{let t;P(rs(),e=>{if(t=rm(e),t){if(nm(t))return;_.addListener(t,"submit",()=>{am(e)})}else _.addListener(e,"focusout",()=>{am(e)})})};function pu(){oe(()=>{_.setTimeout(DE,5e3)})}var{submitEvents:FE}=Xe.platforms.attentive;function lu(){_.addListener(window,"message",t=>{let{origin:e,data:r,target:o}=t;if(e.includes(".attn.tv")){let{__attentive:n}=r;FE.includes(n?.action)&&We(n,o.document.activeElement)}})}var ME=(t,e)=>{if(e.isWrapped)return e;function r(){try{t.apply(this,arguments)}catch{}return e.apply(this,arguments)}return r.isWrapped=!0,r},ia=(t,e)=>ME(t,typeof e=="function"?e:()=>{});var{submitEvents:$E}=Xe.platforms.bounceExchange;function mu(){_.setTimeout(()=>{window.bouncex=window.bouncex||{},window.bouncex&&typeof window.bouncex.push=="function"&&(window.bouncex.push=ia((...t)=>{let{email:e,source:r}=t[0][1];$E.includes(r)&&We({email:e})},window.bouncex.push))},8e3)}function gu(){_.setTimeout(()=>{window.ju_callback=ia((t,e)=>{We({email:e})},window.ju_callback)},5e3)}var{submitEvents:BE}=Xe.platforms.klaviyo;function hu(){_.addListener(window,"klaviyoForms",t=>{let{detail:e,target:r}=t,{type:o,metaData:n}=e;BE.includes(o)&&We(n,r.document.activeElement)})}var{submitEvents:UE}=Xe.platforms.sleekNote;function yu(){_.addListener(window,"sleekNote",t=>{let{data:e,target:r}=t;UE.includes(e.type)&&We(e.data,r.activeElement)})}var{submitEvents:VE}=Xe.platforms.wisePops;function vu(){_.setTimeout(()=>{VE.forEach(t=>{window[window.WisePopsObject]&&typeof window[window.WisePopsObject]=="function"&&window[window.WisePopsObject]("listen",t,e=>{let{target:r}=e,o=r.querySelector('input[type="email"]')?.value;We({email:o},r)})})},5e3)}var WE={attentive:lu,bounce_exchange:mu,just_uno:gu,klaviyo:hu,sleek_note:yu,wise_pops:vu};function _u(){let t=$("config.emailFormTracking"),e=t?.active||!1,r=t?.platforms||[];e&&e===!0&&(pu(),r.map(o=>o.name).forEach(o=>{let n=WE[o];n&&n()}))}var sm=!1;function qE(t){let e="cart/add",r=y.ADD_TO_CART;Ai(e,()=>{a.push({trigger:r})}),St(e,()=>{a.push({trigger:r})},t)}function GE(t){_.addListener(window,"click",e=>{let r=E(e,"target.className");(e.target.getAttribute("name")==="checkout"||t&&typeof r=="string"&&r.match(t))&&a.push({trigger:"initiate_checkout"})})}function jE(t){let e=[];return t.items.forEach(r=>{e.push({sku:r.sku,id:r.id,quantity:r.quantity})}),t.items=e,t}function HE(t){return t.items&&(t=jE(t)),{cart_json:t}}function zE(t,e,r){Ge("/cart.json",{servletName:"ShopifyCart"},o=>{let n={custom_dimensions:HE(o)};r?e(r,b({},t,n)):e(b({},t,n))})}function wu(t){sm===!1&&(D(()=>{if($e()&&$("config.shopify.add_to_cart.active"))return qE(!0);throw new Error("Shopify globals not found")}),$("config.shopify.checkout.active")&&GE($("config.shopify.checkout.class_name")),sm=!0),ta(()=>{$e()&&$("config.shopify.add_to_cart.active")&&q("platform",y.ADD_TO_CART,e=>{zE(b({},e,{page_id:"AddToCart"}),t,void 0)}),q("platform",y.INITIATE_CHECKOUT,e=>t(b({},e,{page_id:"checkout"})))})}var cm=[_u,wu];var aa="target",JE=[nr,yn,_n];function Eu(){function t(r){let o="advanced_matching";$t(aa,r,o),pe(`${aa} ${o}: ${r}`,"update")}function e(r){let o=J(aa,r.name);!o||Object.keys(o).length===0||typeof r.identify=="function"&&r.identify(aa,()=>t(r.name))}JE.forEach(r=>e(r))}function bu(){function t(){Sd(Eu),lf(Eu),mf()}($("config.visitor.set_info")||si())&&oe(t)}var um=!0;function ZE(t){zl(),bs(),Ia(),ys(),Wo({}),Ca({}),t&&Object.keys(t).length>0&&qn(t)}async function Su(t={}){try{async function e(n){try{let u=function(g={}){ys(),se(H.VIEW,g,h=>{Jl(h,c)})};var i=u;Yl();let s=b(n,await Xl());if(Ca(s),Ae("platform",y.START,{build:"15769"}),q("platform",y.REFRESH,r),E(s,"page.ignored"))return;await qf();let c=Ql();ta(()=>{q("platform",y.VIEW,g=>u(g))}),cm.forEach(g=>g(u)),await se(H.VIEW,{},g=>{ra(g,c)},()=>{ra({},c)})}catch(s){a.error(s)}}async function r(n={}){try{let i=t.pages||[],s=O(),c=kd(i,s);if(pe(`page: ${c.id} ${c.isNewPage?"\u2714":"\xD7"}`,c),c.isNewPage){let u=b(t,c.config);um?(Ia(),um=!1):ZE(n),await e(u)}bu()}catch(i){a.error(i)}}async function o(n=0){try{await Qt(t)?await r():n<5?_.setTimeout(()=>{o(n+1)},400):(await r(),a.error(new T("vendor id not found (google id)")))}catch(i){a.error(i)}}E(t,"config.visitor.id_source")==="google"?await o():await r()}catch(e){a.error(e)}}var KE=ie({name:"log_spa_refresh_sampling",allocations:[{percent:.1,value:!0}]});function dm(t,e){KE&&he(t,{url:e})}var fm={SPA_REFRESH_ENABLED:"config.spa.refresh.enabled",SPA_REFRESH_DELAY:"config.spa.refresh.delay"};function Pu(){if(!v()&&$(fm.SPA_REFRESH_ENABLED)){let t=$(fm.SPA_REFRESH_DELAY)||1e3;(e=>{if(e===void 0){a.error("Unable to setup SPA refresh: window.history is undefined");return}function r(i){dm("history_intercepted_initial",i),_.setTimeout(()=>{dm("history_intercepted_timeout",i),a.push({trigger:y.REFRESH})},t)}let o=e.pushState;e.pushState=function(){try{let s=arguments.length>=3?arguments[2]:"not passed";r(s)}catch(s){a.error(s)}return o.apply(e,arguments)};let n=e.replaceState;e.replaceState=function(){try{let s=arguments.length>=3?arguments[2]:"not passed";r(s)}catch(s){a.error(s)}return n.apply(e,arguments)}})(window.history)}}async function pm(){let t=await Le(()=>window?.Shopify,12e4);if(t)return t.customerPrivacy||await new Promise(e=>{t.loadFeatures?t.loadFeatures([{name:"consent-tracking-api",version:"0.1"}],e):e(void 0)}),window?.Shopify?.customerPrivacy}async function YE(){let t=await I("_cmp_a");if(!t)return!1;let e=JSON.parse(decodeURIComponent(t));return!!(e?.purposes?.a&&e?.purposes?.m)}function XE(t){return new Promise(e=>YE().then(r=>{r&&(t(),e(!0))})).catch(e=>{})}function QE(t){window?.Shopify?.customerPrivacy?.userCanBeTracked?.()?t():_.addListener(document,"visitorConsentCollected",()=>{window?.Shopify?.customerPrivacy?.userCanBeTracked?.()&&t()})}function eb(t){return new Promise(e=>pm().then(r=>{r&&(QE(t),e(!0))})).catch(e=>{})}async function lm(t){if(v())return t(),Promise.resolve(!0);let r=(o=>{let n=!1;return()=>{n||(n=!0,o())}})(t);return Promise.race([XE(r),eb(r),new Promise(o=>ae(1e4).then(()=>{window?.Shopify?.customerPrivacy||(r(),o(!0))}))])}function mm(){let t=$("config.events");return t&&t.purchase&&t.purchase.fbEventsToIntercept&&t.purchase.fbEventsToIntercept.length>0?t.purchase.fbEventsToIntercept:null}function gm(){let t=$("config.events");return t&&t.view&&t.view.fbEventsToIntercept&&t.view.fbEventsToIntercept.length>0?t.view.fbEventsToIntercept:null}var tb=["load","error"],rb=ie({name:"log_intercepted_fb_event",allocations:[{percent:.1,value:!0}]});function hm(t,e){let r="Interepted FB event - ".concat(t.event,". Event fired - ",e.type);rb&&he(r)}function ym(t,e){return t.find(r=>{let o=r.event,i=(r.filters||[]).map(c=>`.*${c}`).join(),s=`facebook.com/tr/\\?id=.*&ev=${o}${i}`;return e.src.match(s)})}function ob(t,e,r){let o=ym(e,r);o&&(hm(o,t),a.push({trigger:y.PURCHASE}))}function nb(t,e,r){let o=ym(e,r);o&&(hm(o,t),!$e()&&o.event==="AddToCart"&&a.push({trigger:y.ADD_TO_CART}),a.push({trigger:y.VIEW,data:{page_id:o.page_id}}))}var ib=(t,e,r,o)=>{r&&ob(e,r,t),o&&nb(e,o,t)};function xu(){if(!v()){let t=mm(),e=gm();if(t||e){let r=Image;Image=function(...n){let i=new r(...n);return tb.forEach(s=>_.addListener(i,s,c=>{ib(i,c,t,e)})),i}}}}async function sa(t,e){try{if(await z(t)===!1)return!1;await Vf(e,!1)}catch(r){a.error(r)}return!0}async function vm(){try{if(!v())return Ba()?Promise.resolve(await sa("loadBundleOnThankYouPage","loadWebPixelOnThankYouPage")):$a()?Promise.resolve(await sa("loadBundleOnCheckoutPage","loadWebPixelOnCheckoutPage")):Promise.resolve(!0);let t=E(window,"shopifyEvent.name")==="checkout_completed";return Ba()||t?Promise.resolve(await sa("loadWebPixelOnThankYouPage","loadBundleOnThankYouPage")):$a()?Promise.resolve(await sa("loadWebPixelOnCheckoutPage","loadBundleOnCheckoutPage")):Promise.resolve(!1)}catch(t){return a.error(t),Promise.resolve(!0)}}var Tu=class extends Error{constructor(){super(`Failed to fetch config from CDN - ${qa()}`),this.status="warn"}},ab=8,sb=10;async function cb(){try{return await bt(id,ab,sb,!0)}catch{throw new Tu}}async function ub(t=()=>{},e=()=>{}){try{if(Qu(),Xu()||!await vm())return;let o=await cb();if(await t(o),o?.config?.consentManager==="shopify"&&await new Promise(n=>{lm(n)}),a.SITE_NAME=f,Yu(),ws(),a.coreStarted){a.push({trigger:y.REFRESH});return}a.coreStarted=!0,Es(),Od(o.param_transforms),Gd(),await Su(o),Pu(),xu(),Fd(),e()}catch(r){a.error(r)}}var _m=ub;_m();})();
}catch(e){try{e.message=e.name+':'+e.message;e.name='ParseError';if(blackcrow&&blackcrow.BUILD_NUMBER==='DEV')(blackcrow.error||console.error||console.log)(e);else(blackcrow&&blackcrow.error&&blackcrow.error(e));}catch(_){}}})();
